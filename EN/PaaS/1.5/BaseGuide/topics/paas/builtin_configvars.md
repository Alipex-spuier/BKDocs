# Built-in Environment Variable Description

### What are Built-in Environment Variables?

Built-in environment variables are a set of environment variables that are **pre-generated** for each application by the BlueKing Developer Center.

Unlike custom environment variables, built-in environment variables do not require manual addition by developers and cannot be deleted. This allows you to use these variables to reduce hardcoding, making your code more flexible and elegant.

In Python code, you can easily retrieve these environment variables:

```python
foo = os.environ.get("BKPAAS_XXX")
```

**Note**: The priority of environment variables (from high to low) is: platform built-in environment variables > custom environment variables in the application.

## Basic Environment Variables

> Tip: The basic environment variables injected by the platform all start with `BKPAAS_`, please avoid using this prefix when creating custom environment variables.

Extension: [How to Use Custom Environment Variables](./custom_configvars.md)

### BKPAAS_APP_ID

bk_app_code, BlueKing application ID, e.g., `blue-app`.

### BKPAAS_APP_SECRET

BlueKing application secret, mainly used when calling cloud API services. This value can be viewed on the application's "Basic Information" page.

### BKPAAS_APP_MODULE_NAME

The current module name of the application, e.g., `default`.

### BKPAAS_ENVIRONMENT

The current environment of the application, `stag` for staging environment, and `prod` for production environment.

### BKPAAS_MAJOR_VERSION

The version of the Developer Center that the application is currently running, with a value of 3.

### BKPAAS_ENGINE_REGION

Identifies the application version, with a value of `default`.

### BKPAAS_URL

The access URL for the BlueKing PaaS platform.

### BKPAAS_ENGINE_APP_NAME

The deployment identifier for each application in a specific environment, including application ID, module name, and environment information. The concatenation rules are as follows:

- Main module: bkapp-{appID}-{BKPAAS_ENVIRONMENT}.
- Non-main module: bkapp-{appID}-m-{moduleName}-{BKPAAS_ENVIRONMENT}.

Examples:

- `bkapp-blueapps-stag`
- `bk.org-app-m-api-prod`

### BKPAAS_DEFAULT_PREALLOCATED_URLS

Contains the access addresses for each environment of the application module. The addresses here are "pre-allocated" built-in addresses generated by the platform based on configuration and algorithms, and may not be completely consistent with the real addresses used when users actually access the application (for example, users may use custom access addresses configured later).

Example:

```text
{"stag": "http://stag-dot-api-dot-bk-user.example.com", "prod": "http://prod-dot-api-dot-bk-user.example.com"}
```

This value is a JSON object string, where the key represents the name of each environment, and the value is the access address. Developers can use the JSON library of their respective languages to parse and use it.

Attachment: Python Code Example

```python
>>> import json, os
>>> value = os.environ['BKPAAS_DEFAULT_PREALLOCATED_URLS']
>>> urls = json.loads(value.decode('utf-8'))

# Get staging environment access address
>>> urls['stag']
# Get production environment access address
>>> urls['prod']
```

### BKPAAS_BK_CRYPTO_TYPE

The recommended algorithm for encrypting database content, with two optional values:

- **`SHANGMI`**: Corresponds to the `SM4CTR` algorithm.
- **`CLASSIC`**: Corresponds to the `Fernet` algorithm.

### BKPAAS_BK_DOMAIN

The BlueKing root domain, used to obtain login tickets, internationalization language, and other cookie information.

### BKPAAS_LOGIN_URL

The unified login access address for BlueKing.

### BKPAAS_SHARED_RES_URL

The path for custom configuration of resources such as title/footer/name/logo for BlueKing products.

### BK_API_URL_TMPL

Gateway API access address template, in the form of: http://bkapi.example.com/api/{api_name}.

### BK_COMPONENT_API_URL

Component API access address, in the form of: http://bkapi.example.com.

### BK_PAAS2_URL

The address of the PaaS2.0 Developer Center, which some older versions of the development framework will use this variable to concatenate the BlueKing unified login service access address.

### BK_DOCS_URL_PREFIX

The address of the BlueKing Documentation Center.

### BKPAAS_CONSOLE_URL

The access address for the BlueKing desktop.

### BKPAAS_CC_URL

The access address for the BlueKing Configuration Platform.

### BKPAAS_JOB_URL

The access address for the BlueKing Job Platform.

### BKPAAS_IAM_URL

The access address for the BlueKing Identity and Access Management Center.

### BKPAAS_USER_URL

The access address for the BlueKing User Management.

### BKPAAS_MONITORV3_URL

The access address for the BlueKing Monitoring Platform.

### BKPAAS_LOG_URL

The access address for the BlueKing Log Platform.

### BKPAAS_REPO_URL

The access address for the BlueKing Artifact Repository.

### BKPAAS_CI_URL

The access address for the BlueKing Continuous Integration Platform (BlueShield).

### [Deprecated] BKPAAS_ENGINE_APP_DEFAULT_SUBDOMAINS

If the current access method for the application is "subdomain" _ (this configuration can be confirmed on the "Network & Domains" page within the application)_, then this variable will contain all subdomains assigned by the platform for it in the current deployment environment.
Multiple domains will be separated by `;`. If the application does not use independent subdomains for access, the value of this variable is an empty string `''`. The application can use this field to concatenate the complete access address of static files within the application.

Example:

- `foo.bkapps.example.com;prod-dot-foo.bkapps.example.com`

> Note: If the application's access method is subpath (which is the case for most community versions), there is no `BKPAAS_ENGINE_APP_DEFAULT_SUBDOMAINS` environment variable. To accommodate differences in various versions, it is recommended to use `BKPAAS_DEFAULT_PREALLOCATED_URLS` to obtain the application's access address.

### [Deprecated] BKPAAS_SUB_PATH

The application access subpath, concatenation rule: `/{BKPAAS_ENGINE_REGION}-{BKPAAS_ENGINE_APP_NAME}/`.

Example:

- `/ieod-bkapp-blueapps-stag/`
- `/tencent-bkapp-anotherapp-prod/`

> Note: Some legacy applications use `BKPAAS_SUB_PATH` to get the application's path prefix, it is recommended to modify to obtain from the HTTP request header `HTTP_X_SCRIPT_NAME`.

## Add-ons Related

The BlueKing PaaS platform will inject the application's add-ons information into the application's environment variables. You can access the enabled add-ons through them.

### Acquisition Method

Taking RabbitMQ's `vhost` as an example,

```python
vhost = os.environ.get('RABBITMQ_VHOST')
```

> Tip: For the Key values of add-ons environment variables, please refer to the 'Add-ons' - 'Instance Details' page.

## Others

### PORT

The target port number for the process service rule created by default when the application is first deployed, with a value of `5000`.

For more information, you can view [Process Service Description](./entry_proc_services.md).