## Version Information

## Version Log

### Overall new features

- [General] Access the notification center (not enabled by default), support publishing platform announcements (need to deploy the message notification center)
- [General] Use Windows.open to open the login box to adapt to third-party login methods
- [Security] Support national encryption algorithms

### CMDB

#### Added

- [Business] Supports display of container topology and container-related information
- [Business] Dynamic grouping conditions are upgraded to "variable conditions" and "locked conditions"
- [Security] Resources add model-level permission management function
- [Security] Supports the national secret SM4 algorithm
- [Resources] Supports two search modes of "IP" and "Control area: IP" in the homepage host search
- [Resources] The homepage host search supports automatic parsing of IP from text
- [Resources] The table page of resource instances supports the shortcut key shift selection function
- [Resources] When editing resource instances, support the display of the default value and fill-in function of the field
- [Resources] Added "unassigned" control area. When adding a host, if the control area is not specified, the default is "unassigned"
- [Resources] Added hover to view the basic information of the field on the instance details page
- [Model] The model adds four built-in fields: "Creation time", "Creator", "Update time", and "Updater"
- [Model] The host model adds "Cloud region" and "Cloud availability zone" fields
- [General] Access to the notification center (not enabled by default), support for publishing platform announcements (need to deploy the message notification center)
- [General] Product architecture layering, backend functions and SaaS functions split into modules

#### Optimization

- [Business] Optimized the interaction related to dynamic group creation, preview, and editing
- [Security] Added "business access" permission authentication to 7 interfaces: `find_module_host_relation`, `find_host_by_service_template`, `find_host_by_set_template`, `list_biz_hosts`, `list_biz_hosts_topo`, `find_host_by_topo`, `list_host_total_mainline_topo`
- [Resources] Adjust the host disk capacity calculation method
- [Resources] In the search, support the user type field to search for people who do not exist in "User Management"
- [Others] Optimized several functions and interactive experience

#### Fix

- [Fix] Fixed several issues


### JOB

- [General] Supports script execution and file distribution of container objects (BCS needs to be deployed)
- [General] Access the notification center (not enabled by default), support publishing platform announcements (message notification center needs to be deployed)
- [Security] Supports national encryption algorithms
- [Security] Supports audit log recording (audit center needs to be deployed)


### NodeMan

#### New

- [Proxy Installation] Proxy installation is compatible with CentOS 8 / Ubuntu.
- [Proxy Installation] 2.0 Proxy supports configuration of temporary file transfer path.
- [Agent Installation] Data compression switch configuration is added for Agent / Proxy installation, and the node detection switch is closed by default.
- [Agent Installation] Added health check and retry mechanism for installation scripts.
- [Agent Installation] Default templates and additional configurations are provided when Agent configuration rendering, and differential rendering according to grayscale rules is supported.
- [Agent Status] Linux 2.0 Agent / Proxy supports configuration of process hosting mode.
- [Agent Status] Agent / Proxy operations support multi-access point Agent operations.
- [Agent Status] Supports filtering by "BT transfer", "data compression", and "control area: IP".
- [Agent Status] Provides related changes, upgrades and adaptations for the new features of Agent 2.0 and GSE2.0.
- [Agent Status] Supports fine-grained control of rendering Agent package process launch & hosting mode.
- [Plugin Installation] The plugin package description file supports defining configuration templates to fill in parameters.
- [Control Area Management] The installation channel is compatible with scenarios with multiple access points.
- [Notification] Access the notification center (not enabled by default) and support publishing platform announcements (message notification center needs to be deployed).

#### Optimization

- [Agent Installation] Optimize the query performance of business hosts when installing Agent.
- [Agent Installation] Add a retry mechanism to some interfaces of Agent installation to improve the success rate of Agent installation.
- [Agent Installation] Optimize the startup performance of the Windows installation script detection process.
- [Agent Status] Optimize the performance of the Agent configuration reload function.
- [Agent Status] Display the real-time status of the Agent when paging.
- [Plugin Status] Optimize the synchronization performance of the plugin process status.
- [Deployment Strategy] Optimize the problem of slow list pull of plugin deployment strategy.
- [Task History] Optimize the pull style of task history filtering conditions.
- [Task History] Optimize the query and indexing capabilities of task history, and support filtering by host IP.

#### Fix

- [Agent Installation] Fixed several issues with Agent installation errors on Windows hosts.
- [Agent Installation] Fixed the issue with the installation package being sent to the Proxy access point in the installation channel scenario.
- [Agent Installation] Fixed the issue with no error when the installation script failed to create the relevant directory.
- [Agent Status] Fixed the issue with Agent data compression attributes not being displayed correctly.
- [Agent Status] Fixed the issue with inaccurate synchronization architecture of some ARM machines.
- [Agent Status] Fixed the issue with exceptions and null values ​​when adding or updating host information.
- [Plugin Installation] Fixed the issue with concurrent installation of agent and third-party plugins on the host.
- [Plugin Installation] Fixed the issue with the installation plugin script not exiting after an error.
- [Plugin Status] Fixed the issue with version information being lost when synchronizing plugin status.
- [Plugin Status] Fixed the issue with duplicate display of plugin filter versions.
- [Proxy Installation] Fixed the issue with the Proxy external network/login IP not verifying itself when editing and verifying.
- [Proxy Upgrade] Fixed the issue that the gse_agent process could not be successfully started after upgrading the Proxy.
- [Basic Capabilities] Fixed the issue that some configuration items in Proxy gse_agent.conf were missing.
- [Task History] Fixed the issue that an error occurred when a non-admin user queried all business history tasks.


### SOPS

#### New

- [Process] The value in the `<SOPS_VAR>key:value</SOPS_VAR>` syntax supports multi-line text.
- [Process] Variable expressions support the use of the json package, such as using json.loads to convert strings to lists/dicts.
- [Process] When editing a process, enter $ to quickly reference the created variable and display it as a label for quick reference and identification.
- [Process] Node configuration, variable editing, and node details support dragging to adjust the width.
- [Task] Tasks have a new "Waiting for Processing" status, which is used to identify situations that require human intervention, such as approval, manual confirmation, and sub-process suspension.
- [Task] When a task is "Waiting for Processing" or "Failed", a new status detail display is added. It is convenient to quickly locate the relevant node.
- [Task] When a task is executed, the canvas and node details add the display of the number of retries and skip methods.
- [Task] When a task is paused, the canvas adds the display of the pause position.
- [Plugins] "Job Platform (JOB)-Quick Execution Script" adds global variable effective range restrictions, no longer supports global variables in script references, and needs to be passed in using script parameters.
- [Plugins] The background supports setting a certain version of the plug-in as the default version.
- [Plugins] Support third-party plug-in callback notifications.
- [Whole Site] The business selection box adds a collection function, and supports searching for businesses by business name, business pinyin, business first letter, etc.
- [General] Access to the notification center (not enabled by default), support publishing platform announcements (need to deploy the message notification center)
- [General] The login box is opened with Windows.open to adapt to third-party login methods
- [Security] Supports national encryption algorithms

#### Optimization

- [Process] Optimize the icons and texts of plug-in fields converted to variables, and no longer allow deletion of such variables from the variable panel. Only support automatic deletion after canceling use from the node configuration.
- [Process] Adjust the failure processing option logic of the node, and automatic skip and manual skip are not allowed to be checked at the same time.
- [Task] Optimize the layout of the task parameter filling page.
- [Task] Optimize the execution plan interaction.
- [Task] Add notification claim guidance interaction when creating functional tasks.
- [Task] Optimize the sub-process node details and support the simultaneous display of the sub-process canvas and input parameters.
- [Task] The task status supports filtering failure, execution, pause and other sub-status.
- [Task] Task records only display the records of the last six months by default to save storage space.
- [Task] When the task is "waiting for processing", it is no longer allowed to "pause" the task.
- [Task] Optimize the style of built-in plug-ins such as approval and manual confirmation.
- [Task] Optimize the top navigation of the task, and add a "re-execution" entrance to the task details.
- [Whole site] Optimize the interaction of text input, add length limit and prompts.
- [Whole site] Optimize the scrolling interaction of the list, and fix the top operation area and header.
- [Whole site] Optimize the display style of error information
- [Plugins] Remove the host ID option in "Nodeman-Plugin Operation".
- [Plugins] Optimize the "Nodeman-New Task" plug-in, remove unnecessary options for installation and reinstallation operations; add configuration reload and restart operations.
- [Others] The executor of the periodic task is changed to the last updater of the periodic policy.
- [Others] In the periodic task list, the opened tasks are displayed at the top.
- [Others] For periodic tasks that have not been updated for a long time, add email reminders.

#### Fix

- [Process] Fix the problem of abnormal node size and operation panel position when the canvas is scaled.
- [Process] Fix the problem of lack of authentication for cloned processes when there is a process view but no new creation permission.
- [Process] Fix the problem of missing global variables when importing yaml.
- [Process] Fix the problem of some nodes being covered after clicking "View Subprocesses to be Updated".
- [Process] Fixed the problem that the parameter name of the input variable of the sub-process node is not displayed.
- [Process] Fixed the error problem of renaming the execution plan.
- [Variable] Fixed the problem that the "Cluster Module IP Selector" variable can filter out the IP list even if the service template does not exist.
- [Variable] Fixed the problem that the output result of the selected cluster/module of the "IP Selector" variable is incorrect when the CMDB is removed.
- [Variable] Fixed the abnormal filtering problem of the "IP Selector" variable.
- [Variable] Fixed the value transfer problem when the sub-process node text drop-down box is checked as a variable.
- [Variable] Fixed the problem that the drop-down box variable remote data source does not support URL parameter transfer.
- [Variable] Fixed the problem that the "Cluster Resource Filter" variable displays NaN when the number of clusters is input as a non-digit.
- [Plug-in] Fixed the problem that the "Configuration Platform (CMDB) Batch Update Cluster Properties" plug-in is unavailable due to parameter transfer errors.
- [Plugin] Fixed the problem that the exception is not displayed when the "Monitoring Platform (Monitor) Blue Whale Monitoring Alarm Shielding (by Policy)" plugin fails to execute.
- [Plugin] Fixed the style display problem of third-party plugins.
- [Plugin] Fixed the problem that when using the "Blue Whale Monitoring Alarm Shielding (by Range)" plugin to shield a business, you still need to select the business again.
- [Plugin] Fixed the problem that the variable value has more double quotes when pulling the execution plan for the "Job Platform (JOB)-Execute Job" plugin.
- [Plugin] Fixed the problem that the "Configuration Platform (CMDB)-Transfer Host Module" plugin does not support the control area.
- [Plugin] Fixed the problem of third-party plugin log acquisition exception (depending on Paas v1.1.0-beta.38 version).
- [Task] Fixed the problem that node details cannot be opened in some scenarios.
- [Task] Fixed the problem that the task cannot be terminated when the sub-process is paused.
- [Task] Fixed the problem that switching TAB returns empty data when the task list is still loading.
- [Task] Fixed the problem that the drop-down box options cannot be reused and the pasted text is automatically selected when re-executed.
- [Task] Fixed the execution agent error before task execution.
- [Task] Fixed the problem that the last selected node is not remembered when re-executed.
- [Others] Fixed the problem that the drop-down box data is incorrect when editing the parameters of periodic tasks.
- [Others] Fixed the bug in the display of some operational data.
- [Others] Fixed the problem that the selected execution plan is not associated when the light application creates a task.
- [Others] Fixed the problem that the interface returns an unfriendly error message when the permission is insufficient when calling the "create_task" interface.
- [Others] Fixed the problem that when the switching action requires secondary confirmation, if the user cancels the switch, the option is still switched.
- [Others] Fixed the problem that the modification time is not refreshed when modifying the periodic task configuration.


### ITSM

#### Added

- [Invoice] Added "My Handler" to my invoice
- [General] Access to the notification center (not enabled by default), support for publishing platform announcements (need to deploy the message notification center)
- [General] Use Windows.open to open the login box to adapt to third-party login methods
- [Security] Support national encryption algorithms

#### Optimization

- [Security] Upgrade some pip dependency versions to improve security
- [Invoice] Limit the length of the reason for closing the work order
- [Invoice] Optimize the index of the work order data table
- [Invoice] Fix the problem of abnormal upload when the attachment is stored as a product library
- [Invoice] Allow configuration of the timeout time of the permission center SDK
- [Invoice] Skip automatic authorization for resources created by Admin
- [Invoice] Support URL parameters to fill in default values ​​on the bill of lading page
- [Invoice] The problem of internationalization errors when processing the quick switching of the document list
- [Invoice] Custom tables support URL new page or iframe to open the link
- [Invoice] Optimize the rendering performance of the states node and improve the interface access speed
- [Document] Fixed the problem that automatic order passing does not work when importing and updating
- [Document] Expand the number of gthreads and optimize the concurrent performance of interface performance
- [Document] The process supports selecting the parent of a specified variable
- [API] The gateway adds a method to obtain the approval result of a certain node

#### Fixes

- [Security] Fixed the problem of XSS in rich text of work order
- [Document] Fixed the problem of joint verification not processing node fields
- [Document] Fixed the problem that some variables on the print page do not exist, causing interface abnormalities
- [Document] Fixed the problem of incorrect field linkage condition judgment
- [Document] Fixed the problem that the document information field on the document details page is not fully displayed
- [Document] Fixed the problem that the processor has no authority when the standard operation and maintenance node task fails under the parallel gateway
- [Document] Fixed the problem that the order of the fields of the quick approval document is inconsistent with the actual one
- [Document] Fixed the deletion logic of TicketLog
- [Document] Fixed the problem of get_service_roles order
- [Document] Fixed the problem of mandatory verification of the document details field on the mobile terminal
- [Document] Fixed the issue that the custom document status was not effective
- [Service] Fixed the issue that the directory field was not verified when creating a service
- [Notification] Fixed the issue that the notification center in the containerized environment was not registered
- [Permission] Fixed the issue that the role of the initial import permission center was empty and abnormal
- [Permission] Added a prompt related to the document without permission on the mobile terminal
- [Trigger] Fixed the issue that the line trigger was not displayed
- [Login] Fixed the issue that the mobile terminal login jumps


### BKIAM

#### New

- [User Group] Added department display to user group member list
- [User Group] Added batch unlimited permissions for creating, cloning, and adding groups to user groups
- [User Group] Added batch copying of users and organizational personnel to user groups
- [User Group] Added "cannot be applied" attribute setting to user groups
- [User Group] Added personnel template display for associated user groups to user group details
- [My Permissions] Personal Workbench—> My Permissions Added associated personnel templates to the permission display of the user group
- [Management Space] Added personnel template function under management space
- [Management Space] Platform Management—> Organizational Structure Personnel Details under User Menu Added the user group permission display of the affiliated personnel template
- [Management Space] Added user/department permission management under management space
- [Management Space] First-level administrators can directly enter second-level administrators
- [Custom Permissions] Custom permission drop-down list supports users to collect commonly used systems
- [Personnel Selector] Added personnel template option to the organizational structure member selector
- [System Management] System administrators added the function of querying personnel with permissions
- [Permission Renewal] Permission renewal notification supports enterprise WeChat
- [Permission Renewal] Add permission details to the expired permission list
- [Approval] Custom permission application supports hierarchical administrator approval
- [Approval] Add API - Create a custom permission application approval form, support custom approval content
- [Audit] Audit module adds sensitive level business block
- [Sensitivity Level] Supports operation sensitivity level setting

#### Optimization

- [User Group] Support batch exit of user groups joined by users
- [User Group] Add description, administrator, and management space data display to the user group permission renewal page
- [User Group] Add user group members, copy members and organizational structure functions
- [User Group] Apply to join a user group -> Add management space filtering to resource instance search
- [User Group] User group member list supports cross-page batch deletion and batch renewal
- [User Group] Custom error message for applying to join a user group with more than 100 entries
- [My Permissions] Add search function to my permission page
- [My Permissions] Add bottom version statement to my permission list
- [User] User module -> Add resource instance search to user type
- [User] User module -> Add personnel to organizational structure members
- [Staff Selector] Organizational structure staff selector design revision
- [Product Documentation] Product documentation link changed to dynamic configuration item
- [Custom Permissions] Apply for custom permissions—> Add custom message when adding more than 100 user groups to the access system

#### Fix

- [Renewal] Fix the error in the cumulative calculation of the valid period timestamp of user group member renewal
- [Renewal] Fix the problem that the application for renewal—> Custom permissions belong to the system filter cannot be customized by paging
- [Renewal] Fix the problem that the number of days after rounding is displayed incorrectly when the user group member renewal timestamp calculation is a floating point number
- [User Group Application] The user applies for multiple groups with too long titles, resulting in an error
- [User Group] "Cannot be applied" takes effect in the automatic recommendation rule
- [User Group] Fix the abnormal display of the page turn button after the template association user group page is pulled down to the bottom
- [User Group] Fix the disappearance of the user group number display after deleting the user group on the user group page, and the page needs to be refreshed to be displayed again
- [User Group] Fixed the problem that adding group permissions to user groups -> adding operations and permission templates first, then canceling the operation or reducing the number of permission templates does not display
- [User Group] Fixed the problem that only adding permission templates to user groups will cause the table data to be cleared after quick closing
- [User Group] Fixed the problem that the number of paths for individual instances of adding group permissions to user groups is not synchronized, resulting in a prompt that the hierarchical link list is empty
- [Management Space] Fixed the problem that multiple unrestricted operation instances cannot be batch pasted under hierarchical administrators
- [Management Space] Fixed the problem that editing authorization boundaries or editing management spaces does not synchronize dependent operations
- [Management Space] No response when the administrator adds members repeatedly (a tip is given when members cannot be added)
- [Management Space] The unapplicable operations registered by the system are effective for "My Management Space"
- [Management Space] Fixed the problem that direct access to links to the management space and user group details pages will redirect to the corresponding list page
- [Instance Operation] Fixed the problem that processing individual operation aggregation errors under aggregated batch operations will result in failure to obtain authorization scope interface data
- [Instance Operation] Fixed the problem that batch copy and paste of content without copyable attribute conditions will result in unlimited display
- [Instance Operation] Fixed the blank page caused by batch editing of non-intersection operations
- [Instance Operation] Fixed the problem that the authorized user group update information is incomplete after editing the associated instance in the permission template
- [Instance Operation] Fixed the problem that the old selected data was not cleared when there was no instance selected in the management space module
- [Instance Operation] Fixed the problem that the custom date picker could not display the currently selected days according to the timestamp
- [Instance Operation] Fixed the problem that there was only one topology and multiple resource types, resulting in incorrect type value
- [Staff Selector] Handled the problem that the staff role prompted no permissions in the staff selector
- [Staff Selector] Fixed the problem that the content of the staff selector editing component was empty, and re-adding would reset the last data
- [Staff Selector] Add members to support fuzzy search (solve the problem that the login domain cannot be searched)
- [Custom Permission] Fixed the problem that the custom permission application—> edit echo could not display the selected resource instance as unlimited type data
- [User] Optimize the organizational structure staff selector to hide the type with a selected quantity of 0
- [Permission Template] Fixed the problem that the permission template cannot batch paste when adding instances
- [My Permission] Fixed the problem that my permission—> user group permissions added cross-page selection
- [My Permissions] Repair My Permissions—>Add cross-page selection for administrator handover
- [Staff Template] Repair the staff template of the associated user group so that it can be successfully deleted during batch deletion
- [User Synchronization] Add user synchronization policy adjustment


### User Management

#### Added

- [Navigation] Add resource view, cluster, deployment, project, and plugin management classification pages to the function menu
- [Internationalization] Supports switching to the English interface
- [Cluster Management] Supports creating highly available K8S native clusters
- [Cluster Management] Supports Tencent Cloud TKE cluster management
- [Cluster Management] Supports importing Google Cloud clusters using cloud credentials and can configure cluster elastic scaling (CA)
- [Container Log] Supports business using independent ES storage clusters

#### Optimization

- [Cluster Management] Cluster list page interaction optimization
- [Resource View] Several function optimizations
- [Helm] Several function optimizations
- [Container Log] Collection rule configuration interaction optimization

#### Fix

Several known issues.


### BKMonitor

#### New

- [APM] Brand new Profiling performance analysis
- [APM] Brand new Trace display mode (topology diagram, timing diagram, flame diagram, statistics, etc.), and support folding, comparison and other capabilities
- [APM] Brand new APM scenario view, better full correlation capability of Metric, Log, Trace, Profiling and other data
- [Integration] Collection status link monitoring
- [Policy] Rotation function upgrade
- [Policy] Alarm strategy supports configuration priority
- [Policy] Log keyword alarm strategy supports year-on-year and month-on-month strategy
- [Policy] Policy advanced month-on-month algorithm upgrade, support mean and instantaneous value
- [Alarm] System event alarm details page supports viewing charts
- [Alarm source] Public cloud alarm source plug-in
- [Event retrieval] System events support retrieval on the event retrieval page
- [Routing] Backend cache supports routing capabilities to expand performance

#### Optimization

- [Performance optimization] Optimization of several page loading performance
- [Performance optimization] Optimization of several performance & stability of the alarm background
- [Alarm] Alarm push message queue: Alarm status changes will be automatically pushed
- [Performance optimization] Optimize the display performance of the collection task status
- [Policy] Optimize the alarm dispatch function and page experience. After the dispatch hits, the default notification will no longer be triggered
- [Policy] The alarm policy effective time is optimized to within 1 minute
- [Integration] Optimize the automatic discovery function of the plug-in production indicator
- [Permission] The permission granularity of the dashboard is to the dashboard instance
- [Host monitoring] The host filtering of the host monitoring list page supports custom business topology level filtering

#### Fix

- [Dashboard] Fix the dashboard jump link 404 problem
- [Dashboard] Fix the dashboard editable permission error
- [Policy] Fix the log keyword indicator backfill strategy display problem
- [Integration] Fix the plug-in editing indicator without opening the automatic discovery will report an error
- [APM] Fix the APM application list interface error guide page display
- [Tag] Fix the built-in tag initialization value error problem
- [Other] Fix several other problems



### BKLog

#### New

- [Log Search] Added result field sorting capability
- [Log Search] Added UI conditional logic configuration capability
- [Log Search] Added index set joint query capability
- [Log Access] Supports custom access index set configuration and uses context
- [Log Access] Supports reverse selection of container logs
- [Log Access] Supports independent saving of links in access process
- [Log Management] Supports custom tags and grouping
- [Log Cleaning] Supports custom word breakers and different field-level cleaning configurations
- [Log Cleaning] Supports adding custom fields
- [Log Desensitization] Added log query desensitization capability, which can perform encryption and desensitization processing on logs
- [Cluster Management] Added cluster lossless switching feature
- [Collector] Supports ES automatic sharding feature

#### Optimization

- [Log Search] Optimize the display of the index set drop-down list, and post-place the index set without data
- [Log Search] Optimize the original log display style
- [Log Search] Optimize log query error, syntax, and style, and provide automatic syntax optimization capability
- [Log Search] Supports case-insensitive queries
- [Log Search] Optimize log search speed and page rendering speed
- [Collector] Improve collector performance, collection speed can reach 110m/s

#### Fix
- [Log Search] Fixed the problem of third-party ES directory positioning error


### PaaS Platform 3.0

#### New

- [Basic functions] Introducing application models to provide cloud-native deployment experience, providing a centralized module configuration interface and global process view, adding multiple new functions such as mounting volumes, DNS configuration, and domain name resolution configuration

- [Build] Enhanced build capabilities: Added Dockerfile support, which can more flexibly complete application code construction in various programming languages, and can also directly deploy pre-built images

- [Monitoring] Monitoring alarm function (depends on the Blue Whale monitoring platform)

- [Log] Application logs support collection and query from the Blue Whale log platform

- [Basic functions] Key replacement function

- [Credentials] Enhanced service credential information support switch settings to control whether to write to environment variables

- [General] Access to the notification center (not enabled by default), support for publishing platform announcements (need to deploy the message notification center)

#### Optimization

- [Codebase] The default timeout for code repository operations is changed to: 10 minutes

- [Application] S-mart application supports modifying Chinese names

- [API] Add renewal operations after cloud API permissions expire

- [Application] Login box is opened with windows.open
- [Application] Optimize application list, basic information, enhanced service instance details, access management and other pages
- [API] All APIs registered to the API gateway in the developer center need to apply for permissions before they can be called
- [Component] Python, Nodejs component dependency upgrade

#### Fix

- [Credentials] The image credential cannot be filled with more than 255 characters
- [Application Deployment] The error problem of declaring undeployed modules in service discovery


### APIGateway

#### Added

- [Backend Service] Support the same gateway to connect to multiple backend services
- [Product Page] Release process display
- [Plugin] Support header-rewrite
- [General] Version log
- [General] Access to the notification center (not enabled by default), support publishing platform announcements (need to deploy the message notification center)

#### Optimization

- [Product Page] Redesign of the environment management/resource management/authority management pages to improve user experience
- [Product Page] Redesign of the plugin management page, with clearer binding relationships
- [Product Page] Performance issues of the component management page
- [General] Use Windows.open to open the login box
- [Backend Service] Code refactoring, upgrade interface protocol
- [Backend Service] Python/Go dependency upgrade (upgrade Python to 3.10)
- [Backend Service] Migrate access policies to plugins, and migrate the proxy to multiple backend services that was originally implemented through environment variables to backend services
- [Documentation] Gateway SDK and ESB SDK documentation

#### Fix

- [Plugin] IP whitelist cannot be edited

### User Desktop

#### New

- [General] Access to the notification center (not enabled by default), support for publishing platform announcements (need to deploy the message notification center)

- [App Market] Add application rating function (not enabled by default)

#### Optimization

- [Component] Python, Nodejs component dependency upgrade

- [Application Authentication] Request ESB application authentication information to the header

#### Fix

- [App Market] When the application rating is None, it cannot be displayed in the market

### BKCI

#### New

- [Pipeline] Support Pipeline as Code
- [Pipeline] Support pipeline viewing status page
- [Pipeline] Support draft and debugging
- [Pipeline] Refactor version management function, support version comparison, support rollback to historical version
- [Pipeline] Upgrade pipeline variable management, support distinguishing input parameters and non-input parameters, support constants, and support convenient reference to system built-in variables
- [Pipeline] Drop-down type variables, support obtaining data from interfaces
- [Pipeline] Support viewing the reason for code library trigger failure, and can replay events
- [Pipeline] Support viewing operation logs
- [Pipeline] Support quick access to trigger source from trigger materials
- [Pipeline] Job context adds keyword node_alias
- [Pipeline] Context command word supports setting notes
- [Pipeline] Build_msg is refined according to event trigger scenarios
- [Pipeline] Time-consuming display optimization
- [Pipeline] Sub-pipeline calls the triggered run, and the trigger material displays the parent pipeline
- [Pipeline] Support callback notification of ban
- [Pipeline] Callback information adds buildNo
- [Pipeline] Add voice to notification method of pipeline completion
- [Pipeline] In the built-in notification template for users, the variable reference method should be changed to ${{}}
- [Pipeline] Template instance in constraint mode, add source template version information on the build details page
- [Pipeline] Build history table drag table column width supports memory, and the number of pipeline lists selected by the user supports memory
- [Pipeline] Pipeline group sidebar supports width adjustment
- [Trigger] Github trigger supports merge success trigger event
- [Trigger] Github pr review event outputs source branch and target branch URL
- [Trigger] Github trigger supports issue, comment and review events
- [Trigger] SVN trigger, add built-in variable BK_REPO_SVN_WEBHOOK_FINAL_INCLUDE_PATH for trigger path
- [Pipeline plugin] Support plugin developers to set the default timeout and default failure strategy
- [Pipeline plugin] Archive artifact plugin supports archive directory
- [Pipeline plugin] Quality redline indicator supports placeholders
- [Pipeline plugin] Plugin internationalization properties file value supports importing files
- [Pipeline template] Support setting permissions for a single pipeline template
- [Pipeline template] Instance list supports copying instances
- [Pipeline plugin] Manual review plugin parameters support variables
- [Builder] Third-party builders support locking within a single build
- [Builder] Kubernetes builders support dedicated machine configuration
- [Builder] Public builders support persistent build container scheduling
- [Codebase] Codebase list revision, support wide and narrow tables
- [Codebase] Support viewing codebase details
- [Codebase] Support viewing codebase event trigger results from the codebase dimension
- [Codebase] Support codebase event replay
- [Codebase] Support reset authorization
- [Codebase] Support viewing associated triggers from the codebase dimension
- [Environment Management] Nodes support paging and search optimization
- [OpenApi] Support customizing project-level user groups through interfaces
- [OpenApi] Support obtaining user group users through interfaces
- [OpenApi] Support archiving pipelines
- [OpenApi] Support obtaining build tasks based on nodes
- [Project Management] Project list, display enabled and disabled projects separately
- [Project Management] Support broadcast notifications for project enablement and disablement
- [Project Management] Automatic deactivation of inactive projects
- [Permission Management] Support adding pipeline permissions to a group of users
- [Platform] Optimize browser title display
- [Security] Support national secret algorithm

#### Optimization and repair

- [Pipeline] Triggers and variables are mentioned in the first-level entrance
- [Pipeline] Permission management is mentioned in the view page, no need to enter the edit page to modify permissions
- [Pipeline] The pipeline name length is relaxed to 128 characters
- [Pipeline] The trigger person should be displayed in the pipeline list for recent execution
- [Pipeline] Optimize when building group concurrency
- [Pipeline] Log component jump function is compatible with Firefox browser
- [Pipeline] Pipeline email notification, "Time Consumed" parameter is displayed as empty
- [Pipeline] Job quota exceeds the limit and the pipeline is not interrupted in time after polling prepareTimeout
- [Pipeline] When there is a quality red line task before the manually skipped task in the pipeline job, it will cause the build details page rendering error
- [Pipeline] Exceptions occur when retrying and skipping during concurrent job operation
- [Trigger] When calling SVN API, it is necessary to be compatible with the three-layer SVN project hierarchy
- [Pipeline plug-in] The plug-in installation package supports caching to improve the execution speed of the pipeline
- [Pipeline plug-in] UI grouping function optimization
- [Pipeline plug-in] The latest test version logo is updated abnormally after the plug-in test version ends the test phase or the review phase
- [Pipeline template] The test version plug-in is not allowed to be used in the template
- [Pipeline template] Optimize the performance of dragging and adding plug-ins
- [Pipeline template] Template layout page drag logic is incorrect
- [Builder] Optimize GoAgent for background resource usage
- [Builder] Add retries when GoAgent terminates the build task
- [Builder] GoAgent refines abnormal status prompts
- [Builder] Environment sharing builder optimization
- [Permission management] Fix IAM callback Blue Shield to obtain projects slowly
- [Permission management] Optimize batch addition of project member interface
- [Permission management] Optimize the search for projects when applying for permissions
- [Permission management] Apply to join the user group ITSM document content is not detailed
- [Permission management] Fix the code base permission loss problem
- [Permission management] Project management-the maximum authorized personnel range of the project is selected as all staff and the display is empty
- [OpenApi] Limit the maximum paging when pulling interface data
- [Platform] Optimize the gateway kernel parameters
- [Platform] Solve the problem that the user reinstalls Blue Shield and fails to initialize the image due to inconsistent project data


### BKCI(CodeCC)

#### Added

- [Permission] Permissions are connected to the new version of the permission center
- [Task] The prompts and errors of the CodeCC service support switching between Chinese and English, including pop-ups, toasts, etc.
- [Task] The code statistics page supports the number of files, and supplements the statistics of empty files
- [Task] The self-built tasks of the CodeCC service support deletion
- [Code Scanning] Supports P4 code base scanning
- [Code Scanning] The MR/PR scanning method is more intelligent, and the final alarm generated by this MR can be determined based on the granularity of the scanning rules, such as function level, file level, line level, etc.
#### Optimization

- [Rule Set] Add correct examples to the rule list
- [Code Scanning] Distinguish whether the scanning failure indicator is caused by the user or the platform
- [Task] Optimize the problem details viewing experience through caching technology
- [Task] Overview-automatically generate according to the rule set selected by the user according to the tool tag of the tool
- [Task] The date filter of code problems/cyclomatic complexity should be "submission date" instead of "creation date"

#### Fix
- [Task] Fix the problem that the SVN project cannot find the relevant alarm in the selection path by the file name
- [Task] Fix the problem that the database query is slow
- [Task] Fix the problem that the addition of an irregular filter path will cause all filter paths to be deleted
- [Task] Fix the problem that the alarm that appears after pulling the SVN code scan occasionally appears "System abnormality"
- [Task] Fix the problem that the cyclomatic complexity alarm cannot be set to "Tool false alarm"
- [Task] Fix the problem that the permission verification return information of the alarm processing is inaccurate
- [Task] Fix the problem that the batch ignore alarm of the cyclomatic complexity tool snapshot does not take effect
- [Code scanning] Fix the problem that the alarm tracking adds Hash deduplication and ignore priority matching
- [Code scanning] Fix the problem that the performance is too poor when using upsert when ignoring the snapshot alarm
- [Code scanning] Fix For projects connected to the Perforce warehouse, the warning code is abnormal after scanning
- [Code Scanning] Fixed the error of duplicate billing
- [Code Scanning] Fixed the problem that the scanning task of frequently changing warehouses will cause the warehouse analysis record to be too long
- [Code Scanning] Fixed the problem that there should not be two records with the same buildId in the lint warning statistics and code warehouse information statistics
- [Rule Set] Fixed the problem that the user cannot reselect the latest version after selecting another version of the rule set

### GSE

#### New

- [New] Agent module (GSE Agent) supports basic control capabilities of container environment
- [New] Agent module (GSE Agent) supports basic control capabilities of Apple MacOS system
- [New] Agent module (GSE Agent) supports basic atomic capabilities of chaos engineering scenarios
- [New] Agent module (GSE Agent) supports fake seed strategy for non-fixed hardware fingerprint scenarios
- [New] Task service (GSE Task) supports querying and returning task results in batches according to limits
- [New] Data service (GSE Data) supports reporting data and delivering it to the nearest location according to label matching
- [New] Data service (GSE Data) supports data delivery in kafka standard compression mode

#### Optimization

- [Optimization] Agent module (GSE Agent) optimizes the final data reporting mode of file transfer and keeps retrying until success
- [Optimization] Agent module (GSE Agent) separates compression and decompression threads for file transfer to improve file transfer stability
- [Optimization] Agent module (GSE Agent) implements hook for system clock to avoid machine tick Tampering causes system abnormality
- [Optimization] Basic platform service (GSE Cluster) Uplink message random service routing selection logic optimization improves the efficiency of uplink message delivery
- [Optimization] Basic platform service (GSE Cluster) replaces random implementation with non-deterministic random numbers to reduce random bit collisions during ID generation
- [Optimization] Task service (GSE Task) optimizes the expiration time refresh rule of task redis storage data to reduce the overall average storage usage

#### Repair

- [Fix] Agent module (GSE Agent) fixes the memory leak problem in script execution implementation
- [Fix] Agent module (GSE Agent) fixes the problem of libtorrent transmission under Windows causing intranet drop package
- [Fix] Agent module (GSE Agent) optimizes the problem of task state expiration caused by no log reporting during long-term task execution
- [Fix] Agent module (GSE Agent) fixes the problem that process management setenv may have environment variables overlapping each other when executing scripts concurrently
- [Fix] Agent module (GSE Agent) fixes the problem of file transfer under Windows - [Fix] The agent module (GSE Agent) fixed the problem that the pipe resource was closed incorrectly during task execution, causing confusion in the process fd
- [Fix] The agent module (GSE Agent) fixed the problem that the dependencies between task execution scripts were not executed in the expected order
- [Fix] The agent module (GSE Agent) fixed the problem that the getpwnam function for obtaining basic account information during task execution was not safe in multi-threading
- [Fix] The agent module (GSE Agent) fixed the problem that the file was still held by libtorrent when cleaning compressed files on Windows, resulting in deletion failure
- [Fix] The agent module (GSE Agent) fixed the problem that the character encoding conversion error caused by nssm on Windows caused the task to fail to execute as expected
- [Fix] The task service (GSE Task) fixed the problem that the task screen information was out of order and lost due to internal data processing errors
- [Fix] The task service (GSE Task) fixed the problem that the incorrect timed call in the file transfer strategy caused the callback accumulation to affect the normal loading logic


### Deployment Scripts

#### Added

- [Middleware] Added optional deployment of MySql8
- [Blue Whale Component] Blue Whale Message Notification Center

#### Optimization
- [Middleware] Upgrade xxx component version.
- [Middleware] The storage index type of influxdb is changed to tsi1 by default.
- [Blue Whale Component] Adapt to bcs 1.29 version deployment
- [Blue Whale Component] The operation platform defaults to lightweight deployment
- [Blue Whale Component] Optimize default resource quota
- [Blue Whale Component] Clean up outdated deployment parameters

#### Repair

- [Blue Whale Component] Configure the cookieDomain configuration of bk_language switch in the configuration platform and permission center


### LessCode

#### New

- [Application] New applications distinguish between Vue2 and Vue3, and support dragging Vue3 applications
- [Application] Update the menu navigation layout in the application
- [Application] Applications support archiving
- [Application] Forms are uniformly modified to top-bottom layout
- [Application] When creating applications and pages, merge the creation from blank and the creation from template entries
- [Application] Form type pages are integrated into custom pages as form container components
- [Application] Data management type pages are integrated into custom pages as data management container components
- [Application] Markdown type pages are integrated into custom pages as components
- [Platform] Connect to "Permission Center"
- [General] Access the notification center (not enabled by default), support publishing platform announcements (need to deploy the message notification center)
- [General] Login box is opened with window.open
- [Canvas] Canvas UI reconstruction, material area, menu bar, configuration area update
- [Canvas] Component property panel supports search
- [Canvas] Added support for form container and data management container components
- [Canvas] When leaving the canvas, if no changes have been made, the exit confirmation pop-up window will not pop up
- [Canvas] Public custom components are displayed by category, and mobile and PC custom components are distinguished
- [Canvas] The built-in margin of the page is echoed to the padding attribute of the page style
- [Canvas] Add an "undo" shortcut key
- [Canvas] Components such as transfer, cascade, process, big-tree can configure the corresponding actual use fields and display fields
- [Canvas] The value setting and verification of components with switchable types need to be consistent with the type
- [Canvas] Table supports setting the status column
- [Canvas] Navigation supports setting the draggable area
- [Canvas] Navigation route parameters support application-level variables
- [Mobile Canvas] Add side navigation
- [Mobile Canvas] Add grid layout
- [Mobile Canvas] Add simple time selection components, selector components, and tab components
- [Function & API] Requests support setting Headers, and Headers support setting variables
- [Function & API] Support configuration parameter verification when requesting configuration parameters
- [Release and Deployment] Newly created applications are deployed as cloud-native types in the developer center, and the release and deployment module is adapted to cloud-native applications
- [Release and Deployment] Refactoring of the release and deployment module page
- [Data Source] Supports access to third-party databases

#### Optimization

- [Application] Optimize the loading speed of custom components on the preview page and canvas edit page
- [Application] Automatically locate the error field when creating a page fails
- [Application] Verify the variable format and error prompt when saving variables
- [Function & API] Optimize API usage prompts
- [Data Source] SQL statements are encrypted and transmitted at the API level
- [Data Source] Compatible with ENUM type

#### Repair

- [Application] Internationalization-related style issues
- [Canvas] Data is not updated when entering the canvas
- [Canvas] Data anomaly when copying components of the same type
- [Canvas] Paste position issue for free layout
- [Canvas] Inconsistency between v-vtml preview and post-deployment monetization
- [Canvas] Echart chart cannot adapt to screen width and height changes
- [Canvas] Occasionally, the table in Vue3 cannot be deleted or rendered
- [Mobile Canvas] Wrong scroll position of floating bar
- [Mobile Canvas] vant style conflict
- [Form Container] Fixed issues related to form field data source support for data tables
- [Form Container] Radio events in the form container do not take effect


### BSCP

#### New

- [Configuration Management] Centrally manage business and service-level configurations

- [Configuration Management] Supports file-based (File) and key-value (KV) configuration types

- [Configuration Management] Implements configuration version control

- [Configuration Release] Provides full release and grouped grayscale release functions

- [Script Management] Supports script execution before and after configuration release

- [Templates and Variables] Adapts to multi-service shared configuration scenarios and supports configuration templates and variables

- [Client] Provides client types such as Sidecar containers, multi-language SDKs, GSE plug-ins, and command lines

- [Client] Implements client key management to verify identity

- [Client] Displays graphical statistics of client data
- [Client] Supports querying client lists


### BKNotice

- [General] Supports sending platform announcements (ceiling marquee) and operation notices (pop-up window display)
- [General] Supports third-party SaaS docking