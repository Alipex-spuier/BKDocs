# 1   自定义建模

自定义建模的步骤，依据是否在实验内进行训练，稍有不同。如下图所示：

![](./assets/0.png)

1)   实验内训练：需要在平台上准备样本集（训练数据），并选择算法依次进行训练和评估，才能得到模型进行发布和应用（本期暂不提供）；

2)   实验内不训练：模型托管。在线下已经训练并打包好了模型，上传到实验中进行模型定义，然后就可以对模型进行发布和应用

# 2   功能介绍

## 2.1    创建模型

创建模型的入口与场景化建模一致，在场景信息中选择自定义场景，并填写模型信息，即可完成创建。

![](./assets/1-1620469158002.png)

创建模型后会为您展示模型实验的两种开发方式，即上文介绍的：实验内训练/不训练。

![](./assets/2-1620469160738.png)

## 2.2    模型实验

创建一个模型实验，并选择开发方式（关闭实验内训练/评估）：

![](./assets/3-1620469163567.png)

### 2.2.1 上传模型文件

选择完开发方式后，可上传模型并对其进行定义。以下是注意事项：

1)   目前支持的算法框架：

目前支持的框架为 scikit-sklearn 0.21.3 和 PySpark MLlib 2.4.4。

2)   目前支持的模型文件大小和格式

目前支持上传的模型文件大小是 35M 以内。

scikit-sklearn 框架下支持上传 pkl 文件，对应的序列化方法为 Pickle。

PySpark MLlib 框架下支持上传 zip 文件，对应的序列化方法为算法自带的 save 方法，要求把 save 后的整个文件夹压缩上传。

请按照规范上传模型文件，并填写配置。

### 2.2.2 选择算法

您可以选择平台提供的算法或者自定义算法，这取决于您的模型文件中使用的算法。官方算法可以直接选择，自定义算法则必须先定义再使用。

![](./assets/4-1620469166617.png)

自定义算法必须填写以下内容：

1)   基本信息

2)   训练/预测输入：必填。训练/预测函数的输入字段，支持可变输入（使用算法时除了已配置的输入，可新增其他输入）

3)   预测输出：必填。预测函数的输出字段

4)   训练参数：非必填。训练函数的参数

5)   预测参数：非必填。预测函数的参数

![](./assets/5-1620469169357.png)

### 2.2.3 应用输入

选择完算法后，可以配置算法在线上执行预测时使用的应用输入，包括应用输入数据的规范和字段。如果您使用的算法已经指定了预测输入，此处会您自动添加这些字段，您只需填写应用输入的字段名即可。

![](./assets/6-1620469172105.png)

确认模型信息无误，即可提交。

![](./assets/7-1620469174757.png)

##  模型发布

您可以在模型发布 tab 填写发布配置，然后将模型发布至线上。

![](./assets/8-1620469176892.png)

![](./assets/9-1620469179683.png)

## 2.3    模型应用

在数据开发工作台中应用模型的步骤与场景化建模一致，详情请参考【单指标异常检测】的介绍文档。