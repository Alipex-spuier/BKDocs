
# **CodeCC简介**
代码检查，一般又称为静态代码分析，是指无需运行被测代码，仅通过分析或检查源程序的语法、结构、过程、接口等来检查程序的正确性，找出代码隐藏的错误和缺陷，如内存泄漏，空指针引用，死代码，变量未初始化，复制粘贴错误，重复代码，函数复杂度过高等等。

CodeCC（代码检查中心）提供专业的代码检查解决方案，检查缺陷、漏洞、规范等多种维度问题，为产品质量保驾护航。


# **CodeCC能解决的问题以及交付后默认支持的工具集**

|  维度   | 工具示例 | 规则示例 |
|  ----  | ---- | ---- |
| 发现代码缺陷  | bkcheck（即将发布）、ClangWarning、Clang、SpotBugs | API使用、内存非法访问、程序卡死、资源泄露、空指针、性能低效…… |
| 发现安全漏洞  | 啄木鸟敏感信息、Checkmarx（需自行采买工具） | 密码/密钥等信息泄露、加密风险、XSS、CSRF、注入攻击…… |
| 代码规范，检查一些逻辑错误  | CppLint、CheckStyle、ESLint、StyleCop、Gometalinter、detekt、PHPCS、PyLint等 | 注释、空代码块、异常处理、命名、格式化、风格…… |
| 控制复杂度  | 圈复杂度 | 函数圈复杂度>=20 |
| 检测重复率  | 重复率 | 文件代码重复率>=5% |
| 统计代码行数  | 代码统计 | 统计代码中各类语言代码行、注释行、空白行的情况 |


# **CodeCC的特色功能**
**支持五大检查维度：**

目前已集成十余款含商用、开源、腾讯自研的代码检查工具，覆盖代码缺陷、安全漏洞、编码规范、圈复杂度、代码重复率五大维度。

**丰富的平台功能：**

通过快速准确地分析源代码，找出质量问题和安全漏洞，并提供自助接入、实时扫描、告警展示、告警屏蔽、定时日报、修复激励等功能。

**质量红线：**

与 BK-CI 流水线进行了深度整合，通过质量红线服务，可以在流水线中使用CodeCC的检查结果来控制代码库MR/PR、转测、部署等流程，从而使得每一阶段的流水线产出都符合质量标准。

**工具自助上架（计划2024年对外开放）：**

支持工具开发框架和规则开发框架，覆盖八种常用编程语言。



# **如何启动下一步**
**如果您想要先试用：**

我们的体验环境能够满足您对功能测试的需求，欢迎随时联系您的对接人。他会为您提供体验环境账号以及登录方式等信息。

**如果您想要直接部署使用：**

CodeCC部署需要额外的[硬件资源](../../Services/Codecc/codecc-cost.md)。在资源准备就绪后，我们会立即启动CodeCC落地相关的事宜。

# **FAQ**
**Q：我可以使用Coverity的能力吗？**

A：Coverity需要您自行进行License采买。采买完成后，可以直接通过CodeCC插件调用Coverity对您的代码进行扫描。其他商业的代码扫描工具同理。

**Q：我可以把我使用的，但是不包含在现有工具集中的工具接入CodeCC使用吗？**

A：我们将在22年下半年提供“自定义上架工具”满足该需求。

**Q：我可以对工具中涵盖的规则集进行自定义的调整从而满足我们的使用需求吗？**

A：我们将在24年提供“自定义上架工具”满足该需求。

# **附录：部分工具详细介绍**

|  维度   | 工具名 | 工具ID | 支持语言 | License类型 | CodeCC交付后立即可用 | 工具介绍 |
|  ----  | ----  | ----  |  ----  | ----  | ----  | ----  |
| 代码缺陷  | bkcheck（即将发布） | BKCHECK  | C++、C#、Lua | 自研  | 否 | Bkcheck是CodeCC自研缺陷检查工具，覆盖空指针检查、逻辑缺陷、除零、内存泄露等多种检查规则。相比Coverity、Klocwork等编译型工具，Bkcheck无需编译代码，扫描时间较快，可以快速接入项目。王者荣耀、火影忍者、微信支付等数十个项目都在使用。 |
| 代码缺陷  | Clang | CLANG | C/C++、OC/OC++ |  开源 | 是 | Clang静态检查工具是Clang编译器下的一款代码检查工具，可以通过推理代码的语义，在项目编译的过程中扫描出项目中存在的bug，例如空指针、API错误使用、无效代码、安全问题等。目前支持84种问题类型。 |
| 代码缺陷  | SpotBugs | SPOTBUGS  | JAVA | 开源  | 是 | SpotBugs是Findbugs的继任者（Findbugs已经于2016年后不再维护），用于对代码进行静态分析，查找相关的漏洞，包含400多条规则，例如空指针取消引用，无限递归循环，对Java库的错误使用和死锁。 |
| 安全漏洞  | 啄木鸟敏感信息 | PECKER_SENSITIVE  | 所有语言 | 自研  | 是 | 由腾讯TEG安全平台部打造的安全工具。覆盖认证凭证泄露、不和谐内容、员工信息泄露等等，支持任意文本内容，不局限于特定编程语言范围。 |
| 代码规范  | CppLint | CPPLINT  | C++ | 开源  | 是 | 谷歌开源的C++代码风格检查工具，可确保C++代码符合谷歌编码规范，并能检查语法错误。 |
| 代码规范  | CheckStyle | CHECKSTYLE  | JAVA |  开源  | 是  | 用于检查Java源代码是否符合编码规范。它可以找到类和方法设计问题，还能够检查代码布局和格式问题。 |
| 代码规范  | ESlint | ESLINT  | JS |  开源  | 是  | 开源的 JavaScript 代码检查工具，可以在开发阶段发现代码问题，支持最新的ES6语法标准，支持前端框架Vue和React等。 |
| 代码规范  | StyleCop | STYLECOP  | C# |  开源  | 是 | 微软的开源静态代码分析工具，它检查C＃代码是否符合StyleCop推荐的编码样式和Microsoft .NET Framework设计指南。 |
| 代码规范  | Gometalinter | GOMETALINTER  | Go |  开源  | 是 | 一款开源的 Golang 代码检查工具，支持检查代码规范、死代码、语法错误和安全漏洞等问题。 |
| 代码规范  | detekt | DETEKT  | kotlin |  开源  | 是 | Kotlin语言代码分析工具，除了能扫出编码的风格规范问题之外，还能检查出代码的复杂度、某些潜在逻辑错误以及性能问题，告警类型多达152种。 |
| 代码规范  | pylint | PYLINT  | python |  开源  | 是 | Python代码风格检查工具，可检查代码行的长度、变量命名是否符合编码规范或声明的接口是否被真正的实现等。 |
| 代码规范  | occheck | OCCHECK  | oc/oc++ |  开源  | 是 | OCCheck是一款基于ANTLR4的Objective-C代码分析工具，可检查Obj-C常见的风格规范问题，目前支持11种告警类型。 |
| 代码规范  | bkcheck-cpp | BKCHECK-CPP  | C++ | 自研  | 是 | 自研的oc代码规范检查工具 |
| 代码规范  | bkcheck-oc | BKCHECK-OC  | oc/oc++ | 自研  | 是 | 自研的cpp代码规范检查工具 |
| 复杂度  | 圈复杂度 | CCN  | C/C++、JAVA、C#、JS、OC/OC++、Python、PHP、Ruby、Golang、Swift、Scala、Lua、TTCN-3、Rust |  开源  | 是  | 通过计算函数的节点个数来衡量代码复杂性。复杂度越高代码存在缺陷的风险越大。 |
| 重复率  | 重复率 | DUPC  | C/C++、JAVA、C#、JS、OC/OC++、Python、Golang、Kotlin、Lua、PHP、Ruby  | 开源 | 是 | 可以检测项目中复制粘贴和重复开发相同功能等问题，帮助开发者发现冗余代码，以便代码抽象和重构。 |
| 代码统计  | 代码统计 | CLOC  | 所有语言 | 开源  | 是 | 可以统计代码中各类语言代码行、注释行、空白行的情况。 |
