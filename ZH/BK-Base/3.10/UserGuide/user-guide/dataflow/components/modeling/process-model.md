# 1   场景化建模

场景化建模的闭环步骤，如下图所示： 

![image-20210508150545237](./assets/image-20210508150545237.png)

 

1)   确认场景：根据需求确认建模场景；

2)   样本准备：构建样本数据、并进行标注；

3)   特征工程：模型构建时和模型应用时，不同的数据流都会经过相同的步骤；

4)   模型训练&评估：选择算法进行训练，根据评估结果调整超参；

5)   发布模型：包括模型记录的发布、管理；

6)   应用模型：将业务数据应用到已发布的模型；

7)   样本闭环：在场景化建模中将为模型应用者提供应用数据的标注反馈功能。经过人工确认、修改后的模型检测结果将作为已标注的样本数据反馈至样本集，以供模型后续优化升级，形成闭环。在单指标异常检测场景中，从样本集的构建到样本集的使用（模型构建），用流程图表示如下：

![img](./assets/000.png)

# 2   功能介绍

## 2.1    建模入口

用户可在自己的项目下创建模型。在用户中心和数据开发工作台都有创建模型的入口。

![image-20210508150752987](./assets/image-20210508150752987.png)

 

数据开发工作台的【组件库 - 机器学习】目录下，找到时序模型应用，创建模型。

![image-20210508150759322](./assets/image-20210508150759322.png)

## 2.2    创建模型

首先选择单指标异常检测场景，再填写模型的基本信息，点击创建模型，即可进入构建模型步骤。

![image-20210508150807120](./assets/image-20210508150807120.png)

 

## 2.3    模型实验

包括样本准备、模型训练、模型评估三个步骤。

### 2.3.1 样本准备

首先选择一个已准备好的样本集，若需创建一个新样本集，请在弹框中点击创建样本集，以进入样本集创建页。

![image-20210508150813975](./assets/image-20210508150813975.png)

 

选择样本集后，可在右侧进行数据预览。

![image-20210508150819264](./assets/image-20210508150819264.png)

 

确认无误即可进行数据切分，将样本划分为训练集和验证集，分别用于训练模型和测试模型效果。在右侧可以查看切分结果。

![image-20210508150823696](./assets/image-20210508150823696.png)

### 2.3.2 模型训练

选择一个或多个算法，并指定超参。用训练集的数据对算法进行训练，在右侧可以查看训练结果。

![image-20210508150828569](./assets/image-20210508150828569.png)

### 2.3.3 模型评估

用验证集的数据对已训练的模型进行评估。您可以调整阈值以预览评估总览，根据实际情况判断是否通过评估。评估通过后即可提交实验。

![image-20210508150834147](./assets/image-20210508150834147.png)

确认模型信息无误，即可提交。

![image-20210508150840117](./assets/image-20210508150840117.png)

## 2.4    模型发布

在模型发布 tab 可以查看已生成的备选模型，备选模型有已发布和未发布两种状态。未发布的备选模型可以点击右侧发布按钮进行发布。

![image-20210508150845183](./assets/image-20210508150845183.png)

## 2.5    模型应用

在数据开发工作台中应用模型，请选择【时序模型应用】节点，并配置输入。配置页如下图所示：

![image-20210508150850357](./assets/image-20210508150850357.png)