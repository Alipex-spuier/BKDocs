
    <html lang="zh-cn">
    <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <link href="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/default.css" rel="stylesheet">
    </head>
    <body>
    <h1 id="_1">产品简介</h1>
<p>蓝鲸配置平台是一款面向应用的 CMDB，在 ITIL 体系里，CMDB 是构建其它流程的基石，而在蓝鲸智云体系里，配置平台就扮演着基石的角色，为应用提供了各种运维场景的配置数据服务。它是企业 IT 管理体系的核心，通过提供配置管理服务，以数据和模型相结合映射应用间的关系，保证数据的准确和一致性；并以整合的思路推进，最终面向应用消费，发挥配置服务的价值。</p>
<p>目前，蓝鲸配置平台已正式对外开源，GitHub 地址： <a href="https://github.com/Tencent/bk-cmdb">https://github.com/Tencent/bk-cmdb</a></p>
<p><img alt="fuction" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/function.png" /></p><h1 id="_1">术语解释</h1>
<ul>
<li>
<p><strong>业务</strong>：可以理解为项目，是蓝鲸配置平台的基础对象，可以定义业务角色分工（如产品、测试、开发、运维）、业务的生命周期等。在作业平台、监控、标准运维等系统中，均以已有业务为基础进行运作。</p>
</li>
<li>
<p><strong>集群</strong>：用于区分一个业务的不同环境，或者同一个环境的多个部署区域。常见定义有，按照环境类型区分：正式集群、测试集群。按照区域区分：华东区、华北区。</p>
</li>
<li>
<p><strong>模块</strong>：模块是业务拓扑管理的最小单位，通常用于标识一组固化的进程集合，例如 DB、DR、Login、Web 等。</p>
</li>
<li>
<p><strong>空闲机</strong>：通过资源池分配到业务默认会放到空闲机模块中，在空闲机模块下即被定位为没有被实际使用的主机资源。</p>
</li>
<li>
<p><strong>故障机</strong>：当主机在实际应用中被发现有异常，建议转移到“故障机”模块中进行标识，修复以后可以转移到空闲机或者再划分到业务模块中。</p>
</li>
<li>
<p><strong>云区域</strong>：云区域是主机内网的逻辑区域划分，跨云区域之间的主机不可以通过内网直接互相访问，且 IP 可重复。默认主机属于直连区域。</p>
</li>
<li>
<p><strong>模型</strong>：模型是对同类配置实例进行标准格式的定义，例如主机和机房有不同的配置记录需要：主机需要包含固资编号，机房需要包含运营商信息，可以定义主机、机房两个模型，以保证相关配置录入 CMDB 的时候必须包含所需信息。除了属性列表以外，模型还能够定义唯一性校验、可关联性等。</p>
</li>
<li>
<p><strong>模型分组</strong>：模型分组可以帮助对模型进行归类，便于查询和理解，例如通常会把交换机、路由器、硬件防火墙归类到网络设备分组下。</p>
</li>
<li>
<p><strong>关联类型</strong>：模型关联关系的分类，如主机与交换机、路由之间的关系可以分类为“上联”类型，软件与主机之间的关系是 “运行” 等。</p>
</li>
<li>
<p><strong>模型关联</strong>：模型之间的可关联性定义。</p>
</li>
<li>
<p><strong>关联关系</strong>：实例关联是代表实例之间的关联关系，例如主机“上联”了一个交换机。在 CMDB 中，这种关系可以通过网状可视化展示。</p>
</li>
<li>
<p><strong>实例</strong>：也称为配置实例，CMDB 每条有意义的记录主体都是一个配置实例，例如一个交换机、一个主机等。</p>
</li>
<li>
<p><strong>动态分组</strong>：动态分组主要用于定义常用的条件查询，在使用作业平台或标准运维时可以根据动态分组快速检索目标主机。</p>
</li>
<li>
<p><strong>事件推送</strong>：事件推送主要指当配置信息发生变化的时候，实时通知到关联的系统中。目前支持按照模型分类进行推送配置。</p>
</li>
</ul><h1 id="_1">产品架构</h1>
<p><img alt="产品架构" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/Architecture/产品架构.png" />
<center>图1.配置平台产品构架</center></p><h1 id="_1">特点及优势</h1>
<ul>
<li>自定义配置模型（CI）管理</li>
<li>Web 可视化的业务拓扑</li>
<li>全面的 API 服务</li>
<li>自动发现和主机快照</li>
<li>支持跨云管理</li>
<li>动态查询分组</li>
<li>对外开源</li>
</ul><h1 id="_1">如何创建业务并导入主机到业务中</h1>
<p>具体步骤：</p>
<p><strong>创建业务 -- 创建业务拓扑 -- 导入主机到资源池 -- 查看未分配到业务的主机 -- 分配主机到业务空闲机池 -- 分配主机到业务模块</strong></p>
<p><img alt="img" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case1/guide1.png" /></p>
<h2 id="_2">创建业务</h2>
<p>业务是蓝鲸持续部署环节比较重要的概念，主要用于资源和配置隔离，在配置平台创建的业务，默认同时应用于作业平台、标准运维、监控平台、故障自愈等场景。</p>
<p>通过导航栏点击“基础资源 - 业务”，进入业务管理功能页，然后点击【新建】按钮。</p>
<p><img alt="1581942469125" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581942469125.png" /></p>
<blockquote>
<p><strong>注意：</strong> 初始状态下，业务只有配置平台管理员能够新增和管理业务。管理员可以根据实际企业需要，通过权限分组的方式，给指定用户组分配业务管理权限。</p>
</blockquote>
<ul>
<li>
<p>业务是蓝鲸体系内较为关键的资源，所以业务不提供删除功能，当业务不再需要的业务可以使用 <strong>业务归档</strong> 功能把业务从列表中移除。</p>
</li>
<li>
<p>当业务归档的时候，用户需要确认其他 SaaS 已经没有使用此业务，包含并不限于业务下的定时任务、监控配置已经停止，否则会产生过多异常。</p>
</li>
</ul>
<p><img alt="1581942631295" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581942631295.png" /></p>
<p>业务被归档以后，所有 SaaS 均无法看到此业务。</p>
<ul>
<li>归档的业务需要还原时，可以使用 <strong>业务归档的还原</strong> 功能恢复到正常使用状态：</li>
</ul>
<p>业务归档还原以后，可以在业务的归档列表中，看到已经归档的业务。</p>
<p><img alt="1581942689604" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581942689604.png" /></p>
<p>点击【恢复业务】可把业务恢复到正常使用状态，为了方便用户辨识，从归档恢复的业务会默认在业务名称后方加上（-archived）标识，用户根据需要修改业务名称即可。</p>
<p><img alt="1581942749641" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581942749641.png" /></p>
<h2 id="_3">创建业务拓扑</h2>
<p>创建业务以后，在“业务资源 - 业务拓扑”中，可以看到下拉菜单中增加了刚刚新增的业务。业务创建完成会自动创建“空闲机”，“故障机”,“待回收”三个模块。</p>
<p><img alt="1581942817456" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581942817456.png" /></p>
<p>此时我们可以对业务定义业务拓扑。点击拓扑树上的业务，后方出现的【新建】按钮可以创建业务的直接下级即“集群”和其直接下级“模块”。</p>
<h2 id="_4">导入主机到资源池</h2>
<p>为了标准化管理和提高主机资源利用率，设计了资源池模式，所有主机需要统一先录入到主机资源池中，然后再分配到业务中。</p>
<p>导航进入“基础资源 -- 主机”页面，点击【导入主机】按钮进行导入主机。</p>
<p><img alt="image-20201103110259268" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case1/image-20201103110259268.png" /></p>
<p>目前在配置平台导入主机分以下两种，一种是 <code>Excel 批量导入</code>，一种是通过 <code>节点管理</code> 进行自动导入。</p>
<p>首先点击“基础资源 -- 主机”页面的 【导入主机】 按钮打开导入对话框。</p>
<h3 id="1-excel">方法 1：通过 Excel 批量导入</h3>
<p>当主机在直连区域（蓝鲸中控环境可以直接访问区域）时，可以使用此方法。点击 【下载模版】 按钮，下载到符合格式好的 Excel 文档。</p>
<p><img alt="image-20201103110320923" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case1/image-20201103110320923.png" /></p>
<p>打开 Excel 文档以后，可以到内网 IP 是必填属性，其他属性如果不需要导入，可以把相关列删除。Excel 中第二个 Sheet 中有详细的填写说明，建议首次使用用户先查看此说明。</p>
<blockquote>
<p><strong>注意：</strong> 录入同样内网 IP，是属性覆盖的操作，可以使用此特性对主机属性进行批量更新。</p>
</blockquote>
<h3 id="2">方法 2：节点管理进行自动导入</h3>
<p>切换到自动导入的 Tab 页，通过点击跳转到链接可以打开 <code>Agent 安装</code> 应用，根据节点管理对 Agent 的安装流程，相关主机会自动录入到配置平台对应业务下的的资源池中。</p>
<p><img alt="image-20201103110357994" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case1/image-20201103110357994.png" /></p>
<h2 id="_5">查看未分配到业务的主机</h2>
<p>通过侧边导航“基础资源 -- 主机”，默认功能页面中即显示了当前企业中尚未分配到业务的主机。</p>
<p><img alt="image-20201103110426219" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case1/image-20201103110426219.png" /></p>
<ul>
<li>查看企业内所有主机：</li>
</ul>
<p>在主机资源池管理页面，同构勾选查询范围下的已分配主机，进行查询，可以查询到当前企业中所有的主机资源。</p>
<p><img alt="image-20201103110455502" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case1/image-20201103110455502.png" /></p>
<h2 id="_6">分配主机到业务空闲机池</h2>
<p>选中目标主机后，选择上方分配到指定业务，默认是放到业务的空闲机池。</p>
<p><img alt="image-20201103110644833" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case1/image-20201103110644833.png" /></p>
<h2 id="_7">分配主机到业务模块</h2>
<p>导航进入“业务资源 -- 业务拓扑”页面。</p>
<p>可以看到主机已经被分配到业务的“空闲机”模块中，勾选需要转移的主机，点击上方的【转移】按钮，在对话框中选择目标模块，点击【保存】完成转移。</p>
<p><img alt="image-20201103110755291" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case1/image-20201103110755291.png" /></p>
<blockquote>
<p>Note :
需要注意，考虑到实际业务的应用场景，主机转移有以下特性：
1. 一个主机可以属于多个模块
2. 主机归属于空闲机、故障机时，不可同时属于其他业务模块（当选中空闲机、故障机时系统会提示是否去除其他选中模块）
3. 主机需要归还企业的资源池时，必须先转移到空闲机模块</p>
</blockquote><h1 id="a-b">主机由 A 业务模块转移到 B 业务模块</h1>
<p>具体步骤：</p>
<p><strong>主机分配到 A 业务空闲机池 -- 主机上交资源池 -- 主机分配到 B 业务空闲机池 -- 主机分配到 B 业务</strong></p>
<p><img alt="guide2" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/guide2.png" /></p>
<blockquote>
<p>Note：
主机的业务属性变更信息不会与节点管理同步，所以在主机转移之前请在节点管理卸载主机的 Agent ,主机转移之后再在节点管理重装 Agent 。</p>
</blockquote>
<h2 id="1-a">1. 从普通模块下的主机分配到 A 业务空闲机池</h2>
<p>导航栏进入 "业务资源 -- 业务拓扑" 页面。</p>
<p>查看 A 业务 a1 模块下的主机，勾选需要转移的主机，点击上方的 【转移到】 按钮，在对话框中选择目标模块 "空闲模块"，在对话框中选择转移的目标模块，这里选中“空闲机”。进入下一步确认服务实例的变化，即完成转移操作</p>
<p><img alt="image-20201105103528565" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case2/image-20201105103528565.png" /></p>
<p><img alt="image-20201105103603145" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case2/image-20201105103603145.png" /></p>
<h2 id="2">2. 主机上交资源池</h2>
<p>导航进入 "业务资源 -- 业务拓扑" 页面</p>
<p>查看业务的 "空闲机" 模块，勾选刚刚转移过来的主机，点击上方的 【转移到】 按钮，在对话框中选择 "资源池"，点击 【确认】 完成转移。</p>
<p><img alt="image-20201105103804867" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case2/image-20201105103804867.png" /></p>
<p><img alt="image-20201105103834516" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case2/image-20201105103834516.png" /></p>
<h2 id="3-b">3. 主机分配到 B 业务空闲机池</h2>
<p>进入到“资源--主机--未分配”，选中刚刚转入过来的主机，选择“分配到--业务空闲机”</p>
<p><img alt="image-20201105104649279" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case2/image-20201105104649279.png" /></p>
<p>选择需要转移到的目标业务</p>
<p><img alt="image-20201105104834184" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case2/image-20201105104834184.png" /></p>
<h2 id="b">主机分配到 B 业务的模块</h2>
<p>进入到业务中，找到空闲机下的主机，转移到所需要分配的模块即可</p>
<p><img alt="image-20201105105048611" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case2/image-20201105105048611.png" /></p><h1 id="_1">快速入门模型和模型拓扑管理</h1>
<p>随着企业的发展，CMDB 会逐步承担更多的基础配置责任，蓝鲸配置平台通过构建了底层的 "模型"，提供了动态拓展的能力，帮助企业在线实现 CMDB 的能力升级。以下通过以一个机房例子介绍如何操作：</p>
<p>具体步骤：</p>
<p><strong>创建机房模型 -- 完善机房属性 -- 完善关联关系 -- 创建实例</strong></p>
<h2 id="_2">创建机房模型</h2>
<p>配置平台内置一些通用的模型，当现有的模型不能够满足需要的时候，可以通过新建的方式增加模型。</p>
<p>点击左上角的 【新建模型】 按钮，打开新建模型的对话框，然后选择所属分组，选择模型图标（后续可自定义图标），填写模型唯一标识以及名称，最后点击保存新建完成</p>
<p><img alt="image-20201105105142618" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105105142618.png" /></p>
<p><img alt="image-20201105105224370" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105105224370.png" /></p>
<p>创建模型需要填写 "唯一标识" 和 "名称"：</p>
<p><strong>唯一标识</strong>：是模型在系统中的唯一标识，需要保证不可重复。</p>
<p><strong>名称</strong>：是用户在产品中能够看到的描述名称。</p>
<p>点击确认后新的模型创建成功。新的模型会自带一个默认的必填唯一字段 "实例名"，用户可根据模型的实际定位修改此字段的中文名称，但是英文名称因为作为系统底层唯一标识不可调整。</p>
<p><img alt="image-20201105105425125" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105105425125.png" /></p>
<p>在实际场景中，我们需要给模型丰富更多的字段，通过点击“新建字段”增加更多字段（可以批量导入字段，详见 <a href="../产品功能/Model.md">模型字段导出和导入</a>小节）。</p>
<p><img alt="image-20201105105449717" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105105449717.png" /></p>
<p>目前支持 "短字符"（长度 256 个英文）、"长字符"（长度 2000 个英文）、"数字"、"枚举"、“列表”、"日期"、"时间"、"时区"、"用户"、"布尔"、“组织”等类型。</p>
<p>根据所选择的字段类型，分别支持用户定义验证方式："是否必填"、"正则验证"、"大于小于范围" 等。</p>
<p><img alt="image-20201105105749968" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105105749968.png" /></p>
<h2 id="_3">完善关联关系</h2>
<p>为了让机房能够和主机有关联能力，我们接下来配置主机到机房的关联关系。</p>
<p>切换到模型关联 Tab 页，点击新建</p>
<p><img alt="image-20201105105907518" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105105907518.png" /></p>
<p>关联关系的配置，核心需要分析两个对象之间的关系限制，由于一个主机只有可能属于一个物理机房，因此我们配置机房作为原，主机作为目标，约束设定为 1-N：</p>
<h2 id="_4">创建实例</h2>
<p>完成以上操作后，我们已经为配置平台拓展了机房的管理能力，接下来创建实际的机房记录</p>
<p>在资源页面</p>
<p><img alt="image-20201105105950250" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105105950250.png" /></p>
<p>点击新建，填写必要属性完成创建</p>
<p><img alt="image-20201105110132817" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105110132817.png" /></p>
<blockquote>
<p>Note: 如果需要批量添加，可以点击【导入】按钮进入到导入功能对话框，如果是初次导入，可以先下载实例导入模板进行编辑。</p>
</blockquote>
<p><img alt="image-20201105110200939" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105110200939.png" /></p>
<p>关联的管理可以打开刚刚创建的机房详情，切换到关联选项卡，可以看到当前机房还没有和任何其他实例关联。</p>
<p>创建关联,点击关联管理，此时会显示当前可以关联的主机，选中关联即可。</p>
<p><img alt="image-20201105110511066" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105110511066.png" /></p>
<p>完成以后关闭此视图，可以看到关联关系或者关联拓扑。</p>
<p><img alt="image-20201105110540021" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105110540021.png" /></p>
<p><img alt="image-20201105110618098" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/case3/image-20201105110618098.png" /></p><h1 id="cmdb">业务上线时 CMDB 如何管理主机</h1>
<h2 id="_1">情景</h2>
<p>新业务（常见的三层架构：接入层、逻辑层、存储层）上线，需要用 CMDB 管理业务上线依赖的主机资源，便于后续实现发布、变更、故障处理等场景的自动化流程。</p>
<h2 id="_2">前提条件</h2>
<p>在配置平台中 <a href="../快速入门/case1.md">新建完业务</a>，并导入主机及将主机分配到业务中。</p>
<h2 id="_3">操作步骤</h2>
<ul>
<li>梳理业务架构</li>
<li>新建集群</li>
<li>新建模块</li>
<li>使用场景：在作业平台中查询接入层的磁盘使用率</li>
</ul>
<h3 id="_4">梳理业务架构</h3>
<p>业务的架构设计最终要体现在 CMDB 的业务拓扑树上，所以我们先梳理业务的架构。</p>
<p>以业务“欢乐游戏( demo )"为例，其架构是常见的三层架构：<code>接入层</code> -&gt; <code>逻辑层</code> -&gt; <code>存储层</code></p>
<p>为了满足全国各地用户就近接入，按照地域划分了不同的区，但架构一致。</p>
<p><img alt="-w758" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/15625775986620.jpg" /></p>
<h3 id="_5">新建集群</h3>
<p>按照上述业务架构，可将做如下对应：</p>
<ul>
<li>业务中的区 &lt;-&gt; CMDB 中的集群</li>
<li>业务中的分层架构 &lt;-&gt; CMDB 中模块</li>
</ul>
<p>在<code>业务资源</code> -&gt; <code>业务拓扑</code>中，选中根节点<code>业务</code>，新建节点<code>集群</code>一区。</p>
<p><img alt="image-20201105111505952" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_hosts/image-20201105111505952.png" /></p>
<p>创建完成以后，可以在“节点信息”中看到当前集群的属性</p>
<blockquote>
<p>环境类型：一般保持<code>正式</code>；测试环境设置为<code>测试</code>，让测试环境的发布流程模板只能选择<code>测试</code>集群；</p>
<p>服务状态：一般保持<code>开放</code>，在某些场景如开区准备的时候，状态可置为<code>关闭</code>，让发布系统无法选中；</p>
</blockquote>
<p><img alt="image-20201105111608014" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_hosts/image-20201105111608014.png" /></p>
<p>新建完集群<code>一区</code>、<code>二区</code>后，可看到如下业务拓扑。</p>
<p><img alt="image-20201105111639714" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_hosts/image-20201105111639714.png" /></p>
<p>接下来，在集群下创建模块。</p>
<h3 id="_6">新建模块</h3>
<p>选中<code>集群</code>节点，新建模块。</p>
<p><img alt="image-20201105111705838" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_hosts/image-20201105111705838.png" /></p>
<p><img alt="image-20201105111739203" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_hosts/image-20201105111739203.png" /></p>
<blockquote>
<p>服务分类用于标识当前模块的实际功能组件，例如 mysql 组件、Nginx 组件，甚至业务的自定义组件等</p>
</blockquote>
<p>创建完成以后，可以在“节点信息”中看到当前模块的详情属性</p>
<blockquote>
<p>模块类型：一般为<code>普通</code>，当模块类型为数据库类时，选择<code>数据库</code>
主要维护人、备份维护人：该模块维护人，一般在告警推送时会用到；区别在于电话通知时优先<code>主要维护人</code>，如果<code>主要维护人</code>未接听，自动转<code>备份维护人</code>，此处逻辑需要自行实现；</p>
</blockquote>
<p><img alt="image-20201105112002977" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_hosts/image-20201105112002977.png" /></p>
<p>模块创建好了，接下来 <a href="../快速入门/case1.md#分配主机到业务空闲机池">分配主机</a>，将 <code>主机资源</code> -&gt; <code>主机</code> 中的资源按照业务架构分配至对应的模块；</p>
<p><img alt="image-20201105112952109" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_hosts/image-20201105112952109.png" /></p>
<h3 id="_7">使用场景：在作业平台中查询接入层的磁盘使用率</h3>
<p>通过一个简单的场景，体验 <a href="../../../作业平台/产品白皮书/Introduction/What-is-Job.md">作业平台</a> 如何消费主机实例。</p>
<p>{% video %}media/cmdb_job_consume.mp4{% endvideo %}</p>
<h2 id="_8">扩展阅读</h2>
<h3 id="saas-cmdb">蓝鲸内置 SaaS 的 CMDB 消费场景</h3>
<h4 id="_9">应用发布、变更：资源编排工具 标准运维</h4>
<p>应用发布、变更流程包含版本在多台主机上的文件分发、命令执行等操作，如何优雅的选择这批主机，需要使用 CMDB 的查询主机实例功能。</p>
<p><img alt="CMDB场景-标准运维-01" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB场景-标准运维-01.png" />
<center>（在标准运维中一次应用交付的执行历史）</center></p>
<p>在参数中使用<code>动态IP</code>变量，<strong>运维无需关心主机扩缩容、故障替换等场景带来的主机变更</strong>，无需担心漏更新主机或更新错主机。</p>
<p><img alt="标准运维传参-CMDB" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/标准运维传参-CMDB.png" /></p>
<h4 id="_10">故障处理：监控、故障自愈</h4>
<p>针对业务架构中的某一层级模块（如接入层）设置一个 <a href="../../../监控平台/产品白皮书/functions/conf/rules.md">告警检测策略</a>，无需关心实例的新增、删除及修改。</p>
<p><img alt="监控平台的CMDB消费场景" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/蓝鲸监控的CMDB消费场景.png" /></p>
<p>如何实现实时感知，背后的逻辑是通过 CMDB 的事件推送功能，实时感知实例的新增、修改、删除等动作。</p>
<p><img alt="事件推送" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/事件推送.png" /></p>
<p>在 <a href="../../../故障自愈/产品白皮书/Intro/README.md">故障自愈</a> 中的消费场景也是如此，一个或多个模块的某一个告警，关联对应的处理动作。</p>
<p><img alt="故障自愈的CMDB消费场景" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/故障自愈的CMDB消费场景.png" /></p>
<h4 id="dbaaix-sa">平台团队对资源的管控，例如全业务 DBA、AIX SA</h4>
<p>以 DBA 为例，需要管控所有 DB，可将运行数据库的主机所属模块的类型设置为<code>数据库</code>，然后通过<code>动态分组</code>功能查询模块类型为<code>数据库</code>的主机。</p>
<p><img alt="-w1502" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/15625888898060.jpg" /></p>
<p>在 <a href="../../../作业平台/产品白皮书/Introduction/What-is-Job.md">蓝鲸作业平台</a> 中可使用该动态分组来选择 DB 主机。</p>
<p><img alt="-w1234" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/15625757452328.jpg" /></p>
<h3 id="_11">三级拓扑不够用，怎么办？新建多级拓扑节点</h3>
<p>如果业务架构在大区（<code>集群</code>）之上还有一级（平台：如<code>Android_Weixin</code>、<code>Android_QQ</code>等）。</p>
<p><img alt="-w814" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/15625862638485.jpg" /></p>
<p>可在<code>业务模型</code>中，<code>业务</code>与<code>集群</code>间新建一级或多级拓扑</p>
<p><img alt="-w1163" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/15625750066642.jpg" /></p>
<p>新的业务拓扑如下：</p>
<p><img alt="-w1521" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/15625764667893.jpg" /></p>
<blockquote>
<p>注：当前版本新增层级拓扑的生效范围是所有业务，在未来的某一个版本中可调整生效范围；
蓝鲸体系在未来的某一个迭代中，将重点弱化业务和细化权限。</p>
</blockquote>
<h3 id="master-db-slave-db">Master DB 和 Slave DB 如何实现物理架构的高可用</h3>
<p>两者一定不要放在同一个机架或交换机下，否则机架或交换机掉电，亦或是交换机故障，Master DB 和 Slave DB 都宕机，无法正常切换，导致业务无法对外提供服务。</p>
<p>操作方法：[模型管理] -&gt; [模型] -&gt; [主机] -&gt; [模型字段]，新增<code>存放机架 ID</code>、<code>网络设备 ID</code>。</p>
<p>此外，配置主机与机架或上联交换机的关联可使用<code>模型关联</code>，确保数据的唯一性可设置<code>唯一校验</code>，另外<code>字段分组</code>可调整 CI 属性的呈现方式。</p>
<p><img alt="-w1569" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/15637891727474.jpg" /></p><h1 id="cmdb">CMDB 如何管理进程</h1>
<h2 id="_1">情景</h2>
<p>应用的存储是 MariaDB，在 CMDB 中注册 MariaDB，以便在监控系统做进程监控。</p>
<h2 id="_2">前提条件</h2>
<p>在配置平台中<a href="../快速入门/case1.md">新建业务</a> 及业务拓扑。</p>
<h2 id="_3">步骤</h2>
<ol>
<li>
<p>CMDB 中创建服务实例，并注册进程和端口</p>
</li>
<li>
<p>监控系统自动实现进程端口监控</p>
</li>
</ol>
<h3 id="1-cmdb">1. CMDB 中创建服务实例，并注册进程和端口</h3>
<p>当我们把主机从空闲机转移到业务模块下， 会提示是否要完善进程信息</p>
<p><img alt="image-20201105113350414" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_process/image-20201105113350414.png" /></p>
<p><img alt="image-20201105113845017" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_process/image-20201105113845017.png" /></p>
<p><img alt="image-20201105113906953" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_process/image-20201105113906953.png" /></p>
<p>在菜单<code>业务资源</code>-<code>进程管理</code>中<code>新建进程</code></p>
<p><img alt="image-20201105113928695" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CMDB_management_process/image-20201105113928695.png" /></p>
<h4 id="_4">注册进程</h4>
<ul>
<li>进程别名：对外显示的服务名：<code>MariaDB</code>；</li>
<li>进程名称：程序的二进制名称：<code>mysqld</code>；</li>
</ul>
<p>在配置功能名称时，使用命令查询该程序的二进制名称</p>
<pre class="codehilite"><code class="language-bash">$ ps -ef | grep -i mysqld
mysql     7800     1  0 7月08 ?       00:00:00 /bin/sh /usr/bin/mysqld_safe --basedir=/usr
mysql     7980  7800  0 7月08 ?       00:01:55 /usr/libexec/mysqld --basedir=/usr --datadir=/var/lib/mysql --plugin-dir=/usr/lib64/mysql/plugin --log-error=/var/log/mariadb/mariadb.log --pid-file=/var/run/mariadb/mariadb.pid --socket=/var/lib/mysql/mysql.sock</code></pre>


<blockquote>
<p>注：监控系统一般<code>完全匹配</code>二进制名称。
   获取二进制名称的方法：<code>basename $(readlink -f /proc/7980/exe)</code></p>
</blockquote>
<h4 id="_5">注册端口</h4>
<p>查询 mysqld 监听的 IP 和端口</p>
<pre class="codehilite"><code class="language-bash">$ netstat -antp | grep mysqld
tcp        0      0 10.0.4.29:3306          0.0.0.0:*               LISTEN      7980/mysqld</code></pre>


<ul>
<li>绑定 IP：MariaDB 为存储层，一般绑定内网 IP，故选择<code>第一内网 IP</code>。</li>
<li>端口：进程监听的端口，<code>3306</code></li>
<li>协议：<code>TCP</code></li>
</ul>
<h3 id="_6">监控系统自动实现进程端口监控</h3>
<p>等候一分钟，在蓝鲸自带的监控系统 <a href="../../../监控平台/产品白皮书/intro/README.md">监控平台</a> 中可以看到 <a href="../../../监控平台/产品白皮书/guide/process_monitor.md">进程的运行情况</a>。</p>
<p><img alt="-w1570" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/15632804527438.jpg" /></p>
<p>点击 MariaDB 图标，可以查看其占用的 CPU、内存使用率以及文件句柄数等进程占用的资源指标。</p>
<p><img alt="-w1249" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/15626645050893.jpg" /></p>
<h2 id="_7">扩展阅读</h2>
<h3 id="cmdb_1">监控系统消费 CMDB 中进程配置背后的逻辑</h3>
<p>当给模块分配完主机后，该主机的大部分 CI 属性将被自动推送至<code>/var/lib/gse/host/hostid</code></p>
<pre class="codehilite"><code class="language-json">{
  .....
     &quot;process&quot; : [
      {
         &quot;bind_ip&quot; : &quot;3&quot;,
         &quot;bind_modules&quot; : [ 68 ],
         &quot;bk_func_id&quot; : &quot;&quot;,
         &quot;bk_func_name&quot; : &quot;mysqld&quot;,  // 对应功能名称
         &quot;bk_process_id&quot; : 110,
         &quot;bk_process_name&quot; : &quot;MariaDB&quot;,  // 对应进程名称
         &quot;bk_start_param_regex&quot; : &quot;&quot;,
         &quot;port&quot; : &quot;3306&quot;,
         &quot;protocol&quot; : &quot;1&quot;
      }
   ]
}</code></pre>


<p>蓝鲸内置的进程监控采集器<code>processbeat</code>会读取该文件，并写入自身的配置文件<code>/usr/local/gse/plugins/etc/processbeat.conf</code>，以实现进程和端口的监控。</p>
<pre class="codehilite"><code class="language-yaml">......
processbeat.processes:
- name: mysqld // 二进制名称
  displayname: MariaDB
  protocol: tcp
  ports:
  - 3306
  paramregex: &quot;&quot;
  bindip: 10.0.4.29</code></pre>


<h3 id="java">二进制名称均为 java，该如何配置</h3>
<p>如 ZooKeeper、Hadoop 的二进制均为<code>java</code>，可用进程启动参数区分</p>
<pre class="codehilite"><code class="language-bash">$ ps -ef | grep -i zookeeper

root      5897     1  0 Nov14 ?        01:49:00 /data/bkce/service/java/bin/java -Dzookeeper.log.dir=/data/bkce/logs/zk/ -Dzookeeper.root.logger=INFO,ROLLINGFILE -Dzookeeper.DigestAuthenticationProvider.superDigest=bkadmin:1bF5dHUwvnyrhMDaPLkHwFS1JOg= -cp /data/bkce/service/zk/bin/../build/classes:/data/bkce/service/zk/bin/../build/lib/*.jar:/data/bkce/service/zk/bin/../lib/slf4j-log4j12-1.6.1.jar:/data/bkce/service/zk/bin/../lib/slf4j-api-1.6.1.jar:/data/bkce/service/zk/bin/../lib/netty-3.10.5.Final.jar:/data/bkce/service/zk/bin/../lib/log4j-1.2.16.jar:/data/bkce/service/zk/bin/../lib/jline-0.9.94.jar:/data/bkce/service/zk/bin/../zookeeper-3.4.10.jar:/data/bkce/service/zk/bin/../src/java/lib/*.jar:/data/bkce/etc:/data/bkce/service/zk/conf:/data/bkce/service/java/lib: -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain /data/bkce/etc/zoo.cfg
root     10220     1  2 Nov14 ?        13:17:41 /data/bkce/service/java/bin/java -Xmx1G -Xms1G -server -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:+DisableExplicitGC -Djava.awt.headless=true -Xloggc:/data/bkce/logs/kafka/kafkaServer-gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dkafka.logs.dir=/data/bkce/logs/kafka -Dlog4j.configuration=file:./../config/log4j.properties -cp /data/bkce/service/java/lib::/data/bkce/service/kafka/bin/../libs/aopalliance-repackaged-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/argparse4j-0.7.0.jar:/data/bkce/service/kafka/bin/../libs/connect-api-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/connect-file-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/connect-json-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/connect-runtime-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/connect-transforms-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/guava-18.0.jar:/data/bkce/service/kafka/bin/../libs/hk2-api-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/hk2-locator-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/hk2-utils-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/jackson-annotations-2.8.0.jar:/data/bkce/service/kafka/bin/../libs/jackson-annotations-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-core-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-databind-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-jaxrs-base-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-jaxrs-json-provider-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-module-jaxb-annotations-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/javassist-3.20.0-GA.jar:/data/bkce/service/kafka/bin/../libs/javax.annotation-api-1.2.jar:/data/bkce/service/kafka/bin/../libs/javax.inject-1.jar:/data/bkce/service/kafka/bin/../libs/javax.inject-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/javax.servlet-api-3.1.0.jar:/data/bkce/service/kafka/bin/../libs/javax.ws.rs-api-2.0.1.jar:/data/bkce/service/kafka/bin/../libs/jersey-client-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-common-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-container-servlet-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-container-servlet-core-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-guava-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-media-jaxb-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-server-2.24.jar:/data/bkce/service/kafka/bin/../libs/jetty-continuation-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-http-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-io-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-security-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-server-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-servlet-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-servlets-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-util-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jopt-simple-5.0.3.jar:/data/bkce/service/kafka/bin/../libs/kafka_2.12-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka_2.12-0.10.2.0-sources.jar:/data/bkce/service/kafka/bin/../libs/kafka_2.12-0.10.2.0-test-sources.jar:/data/bkce/service/kafka/bin/../libs/kafka-clients-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka-log4j-appender-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka-streams-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka-streams-examples-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka-tools-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/log4j-1.2.17.jar:/data/bkce/service/kafka/bin/../libs/lz4-1.3.0.jar:/data/bkce/service/kafka/bin/../libs/metrics-core-2.2.0.jar:/data/bkce/service/kafka/bin/../libs/osgi-resource-locator-1.0.1.jar:/data/bkce/service/kafka/bin/../libs/reflections-0.9.10.jar:/data/bkce/service/kafka/bin/../libs/rocksdbjni-5.0.1.jar:/data/bkce/service/kafka/bin/../libs/scala-library-2.12.1.jar:/data/bkce/service/kafka/bin/../libs/scala-parser-combinators_2.12-1.0.4.jar:/data/bkce/service/kafka/bin/../libs/slf4j-api-1.7.21.jar:/data/bkce/service/kafka/bin/../libs/slf4j-log4j12-1.7.21.jar:/data/bkce/service/kafka/bin/../libs/snappy-java-1.1.2.6.jar:/data/bkce/service/kafka/bin/../libs/validation-api-1.1.0.Final.jar:/data/bkce/service/kafka/bin/../libs/zkclient-0.10.jar:/data/bkce/service/kafka/bin/../libs/zookeeper-3.4.9.jar kafka.Kafka ../config/server.properties


ps -ef | grep -i kafka
root     10220     1  2 Nov14 ?        13:17:44 /data/bkce/service/java/bin/java -Xmx1G -Xms1G -server -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:+DisableExplicitGC -Djava.awt.headless=true -Xloggc:/data/bkce/logs/kafka/kafkaServer-gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Dkafka.logs.dir=/data/bkce/logs/kafka -Dlog4j.configuration=file:./../config/log4j.properties -cp /data/bkce/service/java/lib::/data/bkce/service/kafka/bin/../libs/aopalliance-repackaged-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/argparse4j-0.7.0.jar:/data/bkce/service/kafka/bin/../libs/connect-api-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/connect-file-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/connect-json-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/connect-runtime-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/connect-transforms-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/guava-18.0.jar:/data/bkce/service/kafka/bin/../libs/hk2-api-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/hk2-locator-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/hk2-utils-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/jackson-annotations-2.8.0.jar:/data/bkce/service/kafka/bin/../libs/jackson-annotations-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-core-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-databind-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-jaxrs-base-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-jaxrs-json-provider-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/jackson-module-jaxb-annotations-2.8.5.jar:/data/bkce/service/kafka/bin/../libs/javassist-3.20.0-GA.jar:/data/bkce/service/kafka/bin/../libs/javax.annotation-api-1.2.jar:/data/bkce/service/kafka/bin/../libs/javax.inject-1.jar:/data/bkce/service/kafka/bin/../libs/javax.inject-2.5.0-b05.jar:/data/bkce/service/kafka/bin/../libs/javax.servlet-api-3.1.0.jar:/data/bkce/service/kafka/bin/../libs/javax.ws.rs-api-2.0.1.jar:/data/bkce/service/kafka/bin/../libs/jersey-client-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-common-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-container-servlet-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-container-servlet-core-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-guava-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-media-jaxb-2.24.jar:/data/bkce/service/kafka/bin/../libs/jersey-server-2.24.jar:/data/bkce/service/kafka/bin/../libs/jetty-continuation-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-http-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-io-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-security-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-server-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-servlet-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-servlets-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jetty-util-9.2.15.v20160210.jar:/data/bkce/service/kafka/bin/../libs/jopt-simple-5.0.3.jar:/data/bkce/service/kafka/bin/../libs/kafka_2.12-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka_2.12-0.10.2.0-sources.jar:/data/bkce/service/kafka/bin/../libs/kafka_2.12-0.10.2.0-test-sources.jar:/data/bkce/service/kafka/bin/../libs/kafka-clients-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka-log4j-appender-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka-streams-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka-streams-examples-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/kafka-tools-0.10.2.0.jar:/data/bkce/service/kafka/bin/../libs/log4j-1.2.17.jar:/data/bkce/service/kafka/bin/../libs/lz4-1.3.0.jar:/data/bkce/service/kafka/bin/../libs/metrics-core-2.2.0.jar:/data/bkce/service/kafka/bin/../libs/osgi-resource-locator-1.0.1.jar:/data/bkce/service/kafka/bin/../libs/reflections-0.9.10.jar:/data/bkce/service/kafka/bin/../libs/rocksdbjni-5.0.1.jar:/data/bkce/service/kafka/bin/../libs/scala-library-2.12.1.jar:/data/bkce/service/kafka/bin/../libs/scala-parser-combinators_2.12-1.0.4.jar:/data/bkce/service/kafka/bin/../libs/slf4j-api-1.7.21.jar:/data/bkce/service/kafka/bin/../libs/slf4j-log4j12-1.7.21.jar:/data/bkce/service/kafka/bin/../libs/snappy-java-1.1.2.6.jar:/data/bkce/service/kafka/bin/../libs/validation-api-1.1.0.Final.jar:/data/bkce/service/kafka/bin/../libs/zkclient-0.10.jar:/data/bkce/service/kafka/bin/../libs/zookeeper-3.4.9.jar kafka.Kafka ../config/server.properties</code></pre>


<p>进程的功能名称均为<code>java</code>，<code>启动参数匹配规则</code>中分别输入<code>zookeeper</code>、<code>kafka</code>即可.</p><h1 id="cmdb-cmdb">企业原有 CMDB 同步至蓝鲸 CMDB</h1>
<blockquote>
<p>感谢社区用户 <a href="https://bk.tencent.com/s-mart/personal/10966/">Kevin</a> 提供该文档.</p>
</blockquote>
<h2 id="_1">情景</h2>
<p>公司基础部门维护公司统一的一套 CMDB，资源主要以服务器为主，资源交付后会直接进入公司的 CMDB，需要手动导出列表，修改成蓝鲸 CMDB 的导入格式，导入蓝鲸 CMDB。存在如下问题：</p>
<ul>
<li>资源交付后需要手动导出、导入，少量机器频繁交付，为了让机器及时加入蓝鲸管控，需要频繁人工参与</li>
<li>公司 CMDB 与蓝鲸 CMDB 字段不统一，需要手动复制、编辑字段属性，再导入蓝鲸，非常繁琐</li>
</ul>
<h2 id="_2">前提条件</h2>
<ul>
<li>
<p>在配置平台中 <a href="../快速入门/case1.md">新建好业务</a>。</p>
</li>
<li>
<p>熟悉一门脚本语言，如<code>Python</code>，本教程以<code>Python</code>为例</p>
</li>
<li>
<p>了解 蓝鲸 CMDB API</p>
</li>
</ul>
<h2 id="_3">操作步骤</h2>
<ul>
<li>
<p>梳理同步逻辑</p>
</li>
<li>
<p>代码实践及解读</p>
</li>
<li>
<p>定时同步</p>
</li>
</ul>
<h3 id="_4">梳理同步逻辑</h3>
<p>查询公司 CMDB 与蓝鲸 CMDB 服务器属性的对应关系，生成属性映射 MAP 表，MAP 表中只记录需要关注的属性，并确认相关属性都已在蓝鲸 CMDB 中创建。</p>
<p><strong>新增资源</strong></p>
<ul>
<li>
<p>通过接口查询公司 CMDB，获取自己所在业务部门下的全量服务器列表</p>
</li>
<li>
<p>通过接口获取蓝鲸 CMDB 的服务器列表</p>
</li>
<li>
<p>遍历两个列表，找出蓝鲸 CMDB 中没有的服务器，汇总成列表，并通过接口录入到蓝鲸 CMDB</p>
</li>
</ul>
<p><strong>更新资源</strong></p>
<ul>
<li>分别获取两个 CMDB 的数据，遍历两组数据，对比属性 MAP 表中的属性字段，找出数据不同的服务器，汇总成列表，再统一更新到蓝鲸 CMDB</li>
</ul>
<h3 id="_5">代码实践及解读</h3>
<h4 id="_6">新建应用</h4>
<p>在蓝鲸开发者中心 新建一个应用，用于调用 CMDB 的 API。</p>
<pre class="codehilite"><code class="language-python">import urllib2
import json
import logging

PAAS_API = 'https://paas.bk.com' # 蓝鲸 PaaS 地址

logging.basicConfig(level=logging.DEBUG,
    format='%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s',
    datefmt='%a, %d %b %Y %H:%M:%S',
    filename='./update.log',
    filemode='a')

BASE_ARGS = {
    '''
    接口调用中的通用参数
    蓝鲸中新建一个应用，获取相关应用信息
    并在https://paas.bk.com/admin/bkcore/functioncontroller/中添加认证白名单，否则调用CMDB     接口会失败，参考： 开发者中心-API网关-使用指南-API调用说明
    '''
    'bk_app_code': 'sync-cmdb',  # 应用 ID
    'bk_app_secret': 'xxxx-xxxxxxxxxxxx', # 应用 Token
    'bk_username':'user.name' # 蓝鲸系统中的用户名
    }</code></pre>


<h4 id="cmdb">获取蓝鲸 CMDB 主机列表</h4>
<p>查询蓝鲸 CMDB 的获取主机 <code>search_host</code> API ，返回主机列表</p>
<pre class="codehilite"><code class="language-python">def getBkCmdbHost():
    # 查询蓝鲸CMDB，返回主机列表
    bkList = {}
    url = PAAS_API + '/api/c/compapi/v2/cc/search_host/' # api请求地址
    apiArgs = {
        # api相关参数，参考https://paas.bk.com/esb/api_docs/system/CC/search_host/
        'condition':[
            {
                &quot;bk_obj_id&quot;: &quot;host&quot;,
                &quot;fields&quot;: [],
                &quot;condition&quot;: []
            }]
    }

    args = dict(BASE_ARGS.items() + apiArgs.items())
    data = json.dumps(args)
    request = urllib2.Request(url, data=data)
    response = urllib2.urlopen(request)
    content = response.read()
    j_content = json.loads(content)
    for item in j_content['data']['info']:
        bkList[item['host']['bk_host_innerip']] = item['host']
    return bkList</code></pre>


<h4 id="cmdb_1">获取 公司 CMDB 主机列表</h4>
<p>调用公司 CMDB 获取主机列表 API，返回主机列表</p>
<pre class="codehilite"><code class="language-python">def getCmdbHost():
    # 根据企业内部接口自己实现，返回IP信息列表
    '''
    infoList = [
        &quot;ip1&quot;: {
            &quot;sn&quot;: &quot;xxxx&quot;,
            &quot;service_term&quot;: 3,
            ...
        },
        &quot;ip2&quot;: {},
        ...
    ]
    '''</code></pre>


<h4 id="ip-ip">生成新增 IP 列表、更新 IP 列表、更新信息列表</h4>
<p>根据 <strong>获取蓝鲸 CMDB 主机列表</strong>操作步骤 和  <strong>获取 公司 CMDB 主机列表</strong>操作步骤 获取到的两个主机列表，对比生成所需的新增列表和更新列表。</p>
<pre class="codehilite"><code class="language-python">def genAddList(cmdbList, bkList):
    # 对比两个列表，返回新增IP列表
    addList = []
    for k in cmdbList.keys():
        if k not in bkList.keys():
            #print k, cmdbList[k]
            addList.append(k)
    return addList

def genUpdateList(cmdbList, bkList):
    # 对比两个列表，生成需要更新的IP列表
    ipList = []
    attrMAP = {k: v for k, v in attributeMAP.items() if v is not None} # 过滤出自己关心的主机属性
    for ip, cmdbHost in cmdbList.items():
        if ip not in bkList.keys():
            continue
        bkHost = bkList[ip]
        for cmdbAttr, bkAttr in attrMAP.items():
            if cmdbAttr in cmdbHost.keys() and bkAttr in bkHost.keys() and cmdbHost[cmdbAttr] != bkHost[bkAttr]:
                ipList.append(ip)
    return ipList

def genInfoList(cmdbList, bkList, ipList, attributeMAP):
    # 根据IP列表生成主机详细信息列表
    infoList = {}
    attrMAP = {k: v for k, v in attributeMAP.items() if v is not None}
    for ip in ipList:
        ipInfo = {}
        for k, v in attrMAP.items():
            if k in cmdbList[ip].keys():
                ipInfo[attrMAP[k]] = cmdbList[ip][k]
        if ip in bkList.keys(): #添加bk_host_id
            ipInfo['bk_host_id'] = bkList[ip]['bk_host_id']
        infoList[ip] = ipInfo
    return infoList

attributeMAP = {
    # 属性对应列表，值为None的字段不关心，不录入蓝鲸cmdb
    'AssetNo':          'bk_asset_id',          #资产编号
    'SN':               'bk_sn',                #序列号
    'Manufacture':      'machine_manufacturer', #厂商
    'ManufactureType':  'machine_model',        #厂商型号
    'MachineType':      'machine_type',         #MachineType
    'HostName':         None,                   #主机名
    'IP':               'bk_host_innerip',      #IP
    'BusinessIP':       'bk_host_bizip',        #业务IP
    'PublicIP':         'bk_host_outerip',      #公网IP
    'VNetIP':           'bk_host_usernetip',    #用户网IP
    'tags':             None,                   #资产类型
    #其它...
}

addList = genAddList(cmdbList, bkList)
updateList = genUpdateList(cmdbList, bkList):
addInfoList = genInfoList(cmdbList, bkList, addList, attributeMAP)
updateInfoList = genInfoList(cmdbList, bkList, addList, attributeMAP)</code></pre>


<h4 id="cmdb_2">录入、更新主机数据到蓝鲸 CMDB</h4>
<ul>
<li>录入新增主机信息：使用  <strong>生成新增 IP 列表、更新 IP 列表、更新信息列表</strong>操作步骤 中生成的新增主机信息列表，录入蓝鲸 CMDB</li>
</ul>
<pre class="codehilite"><code class="language-python">def addBkCmdbHost(infoList):
    # 录入新增数据到cmdb
    '''
    infoList = [
        &quot;ip1&quot;: {
            &quot;bk_sn&quot;: &quot;xxxx&quot;,
            &quot;bk_service_term&quot;: 3,
            ...
        },
        &quot;ip2&quot;: {},
        ...
    ]
    '''

    ipInfoList = {}
    for k, v in enumerate(infoList.values()):
        v['bk_cloud_id'] = 0
        v['import_from'] = '3'
        if 'bk_host_id' in v.keys():
            del(v['bk_host_id'])
        #print k, v
        ipInfoList[str(k)] = v

    url = PAAS_API + '/api/c/compapi/v2/cc/add_host_to_resource/'
    apiArgs = {
        'host_info': ipInfoList
    }

    args = dict(BASE_ARGS.items() + apiArgs.items())
    logging.debug(args)
    data = json.dumps(args)
    request = urllib2.Request(url, data=data)
    response = urllib2.urlopen(request)
    content = response.read()
    print content

addBkCmdbHost(addInfoList)</code></pre>


<ul>
<li>更新主机数据：使用 <strong>生成新增 IP 列表、更新 IP 列表、更新信息列表</strong>操作步骤 中生成的更新主机信息列表，更新蓝鲸 CMDB</li>
</ul>
<pre class="codehilite"><code class="language-python">def updateBkCmdbHost(infoList):
    # 更新数据到cmdb
    url = PAAS_API + '/api/c/compapi/v2/cc/update_host/'
    for ip, ipInfo in infoList.items():
        bk_host_id = ipInfo['bk_host_id']
        del(ipInfo['bk_host_id'])
        apiArgs = {
            'bk_host_id': bk_host_id,
            'data': ipInfo
        }

        #print apiArgs
        args = dict(BASE_ARGS.items() + apiArgs.items())
        logging.debug(args)
        data = json.dumps(args)
        request = urllib2.Request(url, data=data)
        response = urllib2.urlopen(request)
        content = response.read()
        logging.debug('bk_host_id: ' + str(bk_host_id) + content)
        print json.loads(content)

updateBkCmdbHost(updateInfoList)</code></pre>


<h3 id="_7">定时同步</h3>
<ul>
<li>CMDB 同步脚本使用 <a href="../../../作业平台/产品白皮书/Features/Crons.md">JOB</a> 的定时作业或 <a href="../../../标准运维/产品白皮书/产品功能/flow.md">标准运维</a> 的定时任务进行周期托管，方便迁移或者修改维护</li>
</ul>
<p><img alt="1562225679643" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1562225679643.png" /></p>
<p>注：上述教程是企业 CMDB <code>单向</code>、<code>定期</code>同步主机实例至蓝鲸 CMDB 的实践，如果需要实时同步，一般推荐消息推动的方式。</p><h1 id="_1">全文检索</h1>
<p>首页的全文检索，可以帮助用户通过关键字搜索 CMDB 已有资源。</p>
<h2 id="_2">开启原文检索功能</h2>
<p>默认情况下，CMDB 的全文检索功能是关闭状态，如下图所示，只开放了主机的搜索功能。</p>
<p>您可以修改 CMDB 的配置文件，重启进程以后开启全文检索。</p>
<p><img alt="1589787054331" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1589787054331.png" /></p>
<p>全文检索的开启方式：</p>
<pre class="codehilite"><code class="language-bash">在common.conf的[site]条目下修改full_text_search = true
然后重启进程即可</code></pre>


<p>开启全文检索下图所示，会多出一个标签卡可切换到全文检索功能。</p>
<p><img alt="1589787086178" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1589787086178.png" /></p><h1 id="_1">业务拓扑</h1>
<p>业务拓扑是配置平台进行主机管理的基础，在业务架构以及类型越来越复杂的今天，只有建立合适的业务模型，才能结构化的管理好主机。配置平台提供用户结构自定义、拓扑属性自定义等功能。</p>
<h2 id="_2">创建拓扑</h2>
<p>默认情况下，业务拓扑仅包含空闲模块，您可以通过点击业务右后方的新建功能，创建符合场景的拓扑结构。默认 “业务-集群-模块”三级的拓扑结构含义如下：</p>
<ul>
<li>集群（SET）：功能较为完整的部署板块，内部强耦合，对外弱耦合。即集群之间仅有较少依赖，一个集群故障不影响其他集群的正常运行</li>
<li>模块（MODULE）：完整的一个服务模块，例如 web 模块、db 模块等。模块下可以进一步定义服务实例、进程资源</li>
</ul>
<p>我们提供了集群模版、服务模版分配便于用户快速创建集群、模块，详情查看服务模版，集群模版章节。对于没有特别规律的集群和模块，您可以选择不使用模版创建，后续的维护都通过手动调整每个层级节点完成。</p>
<p><img alt="1579158593792" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579158593792.png" />
<center>图1.创建拓扑</center></p>
<h2 id="_3">自定义层级</h2>
<p>除了系统默认包含的两层结构，用户可以根据企业的实际需要，在“模型-模型关系”中定义更多层级。</p><h1 id="_1">服务模版</h1>
<p>服务模板可以预定义业务通用的服务，用于业务拓扑中批量部署和变更服务实例。也可以简单的理解为业务拓扑中的模块模版。</p>
<h2 id="_2">创建服务模版</h2>
<p>进入到“业务-服务模版”，可以看到当前已存在的服务模版。点击“新建”按钮进入新建服务模版配置页。</p>
<p><img alt="1581925106522" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581925106522.png" />
<center>图1：服务模版列表</center></p>
<p>配置服务模版包含以下信息：</p>
<ul>
<li>模版名称：服务模版的唯一标识，在通过服务模版创建的模块会使用模版的同一个名称。命名方法建议以简单可理解的功能性单词，比如 test_db, erp_db 等</li>
<li>服务分类：表示此模版所属的服务类型，系统提供了常见的一些服务类型，例如 mysql、apache 等，用户也可以自定义增加业务特有服务分类</li>
<li>服务进程：进程是服务的重要组成。进程的关键属性主要有进程名称和进程别名，进程名称是进程的二进制名称，进程别名是进程的可读名称。比如 apche 的实际运行二进制名称是 java，如果填写 java 在周边系统中是无法识别这个进程的实际作用，因此这种情况下，可以填写进程名称为 java，进程别名为 tomcat。服务进程中还有其他信息，例如监听端口、监听 IP 等，可以根据实际场景的需要填写</li>
</ul>
<p><img alt="1581925661317" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581925661317.png" />
<center>图2：创建服务模版</center></p>
<p>服务模版创建完成以后，可以在列表中查询到此记录，应用服务模版。</p>
<p><img alt="1581926580549" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581926580549.png" />
<center>图3：服务模版列表</center></p>
<h2 id="_3">使用服务模版</h2>
<p>进入到“业务-业务拓扑”中，在左侧的拓扑树中先创建“集群”，在“集群”中创建“模块”的时候，可以看到在上个步骤中已存在的服务模版。</p>
<p><img alt="1581928555647" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581928555647.png" />
<center>图4：服务模版列表</center></p>
<p>创建了模块以后，有两种方式创建服务实例，这两种方法是等效的，根据主机或服务实例的管理习惯选择即可。</p>
<p><strong>方式 1：当主机转移到当前模块下，系统会自动创建服务实例。</strong></p>
<p><img alt="1581928809924" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581928809924.png" />
<center>图5：模块中加入主机</center></p>
<p><strong>方式 2：主动创建服务实例，主机也会归属到当前模块下。</strong></p>
<p><img alt="1581928770061" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581928770061.png" />
<center>图5：创建服务实例</center></p>
<h2 id="_4">模版同步</h2>
<p>当服务模版发生变化以后，可以通过“同步”功能把改动同步到服务实例中。</p>
<p><img alt="1581929521663" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581929521663.png" />
<center>图6：查看服务模版已经应用的模块</center></p>
<p><img alt="1581929561151" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581929561151.png" />
<center>图7：同步服务实例并确认</center></p>
<h2 id="_5">模版删除</h2>
<p>为了保证配置的安全和准确，删除服务模版时会校验是否存在模块与其关联。即删除之前应该先把所有应用了模版的实例清除。</p><h1 id="_1">集群模版</h1>
<p>集群模板可以定义业务通用的集群结构，用于<a href="./BusinessTopology.md">业务拓扑</a>中快速部署和维护集群。此功能依赖已经存在<a href="./ServiceTemp.md">服务模板</a>。</p>
<h2 id="_2">创建集群模版</h2>
<p>进入“业务-集群模版”，点击“创建”新建集群模版。</p>
<p><img alt="1581930103417" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581930103417.png" />
<center>图1：开始集群模版</center></p>
<p>集群模版主要有两个信息：</p>
<ul>
<li>模版名称：集群模版的标识，在使用的时候可以识别即可</li>
<li>集群拓扑：集群由哪些模块服务模版构成。在实际使用中，会根据服务模版创建模块实例</li>
</ul>
<p><img alt="1581930276733" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581930276733.png" />
<center>图2：新建集群模版</center></p>
<p><img alt="1581930447405" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581930447405.png" />
<center>图3：查看集群模版列表</center></p>
<h2 id="_3">使用集群模版</h2>
<p>进入到“业务-业务拓扑”，创建集群的时候，选择从模版创建，补充集群名称即可。</p>
<p><img alt="1581931697448" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581931697448.png" />
<center>图4：使用集群模版创建集群</center></p>
<p>创建业务完成以后，可以看到在业务下已经创建了包含模块的拓扑，用户可以直接分配主机到拓扑中。</p>
<p><img alt="1581932223130" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581932223130.png" />
<center>图5：完成创建集群</center></p>
<h2 id="_4">同步</h2>
<p>集群模版的结构发生变化后，可以通过同步功能批量更新到集群实例中。</p>
<p>需要注意的是，同步操作是异步进行，在同步完成前，尽可能不要对当前集群做变更。</p>
<p><img alt="1581932601727" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581932601727.png" />
<center>图6：修改集群模版成功</center></p>
<p><img alt="1581932640006" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581932640006.png" />
<center>图7：同步集群模版</center></p>
<p><img alt="1581932657282" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581932657282.png" />
<center>图8：同步集群模版确认</center></p>
<h2 id="_5">删除</h2>
<p>为了保证配置的安全和准确，集群模版的删除，需要先清理已存在的关联集群。</p><h1 id="_1">服务分类</h1>
<p>服务分类可以帮助业务梳理服务用途。配置平台初始化包含一些常见的分类，并支持根据业务拓展更多分类。</p>
<h2 id="_2">查看当前服务分类</h2>
<p>进入“业务-服务分类”可以查看到当前已有的服务分类。</p>
<p>服务分类有两种，内置或者是用户自定义。内置服务分类在业务管理中，不可以修改或者删除。</p>
<p><img alt="1581941471606" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581941471606.png" />
<center>图1：服务分类查询</center></p>
<h2 id="_3">新建服务分类</h2>
<p>在业务管理中，用户可以创建业务特有的服务分类。即跨业务服务分类名称可以重复。</p>
<p>点击虚线框，创建第一个级别的分类。</p>
<p><img alt="1581941554196" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581941554196.png" />
<center>图2：新建一级分类</center></p>
<p>然后点击右上角的更多，新增第二个级别分类。需要注意的是，只有第二级的分类才可以配置到服务模版或模块中。</p>
<p><img alt="1581941602044" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581941602044.png" />
<center>图3：新建二级分类</center></p>
<h2 id="_4">编辑/删除服务分类</h2>
<p>鼠标悬停在服务分类上，可以看到服务分类的编辑删除操作。</p>
<p><img alt="1581941760634" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581941760634.png" />
<center>图4：编辑、删除服务分类</center></p><h1 id="_1">主机自动应用</h1>
<p>主要用于配置主机属性的自动应用。即主机发生转移或新加入模块，会根据目标模块的策略自动触发修改主机属性。</p>
<h2 id="_2">启用自动应用</h2>
<p>进入到“业务-主机自动应用”，选择需要配置的模块（支持选择空闲机或者普通的业务模块），点击右侧的“立即启用”。</p>
<p><img alt="1581933260459" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581933260459.png" />
<center>图1：启用自动应用</center></p>
<p>启动自动应用有两个步骤。</p>
<h3 id="_3">步骤一：配置自动应用的属性</h3>
<p><img alt="1581933639363" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581933639363.png" />
<center>图2：选择需要配置自动应用的属性</center></p>
<p><img alt="1581933679585" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581933679585.png" />
<center>图3：配置自动应用属性</center></p>
<h3 id="_4">步骤二：现存主机属性修改为自动应用配置</h3>
<p>此步骤会把当前模块中所有主机与配置的属性设定为一致，列表中显示了哪些主机的属性需要修改。</p>
<p>需要注意的是，第二个步骤执行完成，策略才能够保存，中途退出策略的配置会被丢弃。</p>
<p><img alt="1581933693621" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581933693621.png" />
<center>图4：应用到现有主机</center></p>
<p><img alt="1581934046098" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581934046098.png" />
<center>图5：策略保存成功</center></p>
<p>自动应用策略配置成功以后，当主机新增到当前模块，会自动应用配置的属性（此案例中会把主要负责人和备份负责人设定为 admin）。</p>
<h2 id="_5">关闭自动应用</h2>
<p>自动应用策略已经生效时，可以在左侧的拓扑中看到对应模块后有一个绿色的对号。</p>
<p>当模块不再需要自动配置的特性时候，点击拓扑树上对应的模块，然后点击关闭。</p>
<p><img alt="1581940728095" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581940728095.png" />
<center>图6：关闭自动应用</center></p>
<p>这时候会弹出一个提示框，是否保存当前的配置项，如果只是临时关闭，可以选择保存，后续需要应用的时候再启用，之前的配置过的属性就不需要重复选择和填写。如果是不再需要配置，选择不保存即可，下次再次开启，从零开始配置。</p>
<p>关闭自动应用的时候，已经存在当前模块的主机属性不会发生变动。</p>
<p>此外在关闭状态，无论是否保存了之前的配置，主机移入当前模块，属性不会发生改变。</p>
<p><img alt="1581941199534" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1581941199534.png" />
<center>图7：关闭自动应用确认</center></p><h1 id="_1">动态分组</h1>
<p>动态分组可对同类的资源会设定一个聚合组以在不同的场景中方便通用，例如所有归属于 admin 维护的主机、动态分组依据查询条件帮用户管理这种聚合，当符合条件的资源增加或者减少，动态分组查询的结果也会随之动态改变。目前动态分组已经可以在作业平台、标准运维等系统中使用。 </p>
<h2 id="_2">动态分组管理</h2>
<p>进入到“业务-动态分组”功能，可以看到当前已经存在的动态分组列表。可以预览、编辑删除已存在分组。</p>
<p><img alt="1579160010918" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579160010918.png" />
<center>图1.动态分组</center></p>
<h2 id="_3">新建主机动态分组</h2>
<p>点击“新增”增加一个动态分组，“分组名称”便于快速识别分组用途，“查询条件”是指需要对集群、模块还是主机的哪些属性进行查询。</p>
<p>灵活的查询条件，我们很容易配置出例如“所有 Linux 主机”、“所有 admin 负责的主机”等场景的动态分组查询。</p>
<p><img alt="image-20201103124406106" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CustomQuery/image-20201103124406106.png" />
<center>图2.新建动态分组</center></p>
<h2 id="_4">新建集群动态分组</h2>
<p>点击新增动态分组，切换查询对象到“集群”，可以创建一个查询目标为“集群”的动态分组。</p>
<p><img alt="image-20201103124543940" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CustomQuery/image-20201103124543940.png" /></p><h1 id="_1">自定义字段</h1>
<p>您可以根据业务的特性，为业务的每个层级设定必要的字段。</p>
<p>进入“业务-自定义字段”功能，可以用看到当前集群、模块、主机已经存在的字段信息，先创建一个业务分组。</p>
<ul>
<li>分组的默认折叠：当自定义的业务字段并非必填，希望能够尽可能减少打扰，可以打开默认折叠。在编辑、创建节点的时候，将看不到这个分组的属性，需要主动展开编辑。</li>
</ul>
<p><img alt="1579159515249" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579159515249.png" />
<center>图1.自定义分组</center></p>
<p>分组创建完成以后，可以进入创建自定义字段的页面，这里的操作与全局模型配置中一致，需要注意的是唯一标识和名称不可以与现有字段重复。</p>
<p><img alt="1579159807036" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579159807036.png" />
<center>图2.新建字段</center></p><h1 id="_1">资源目录</h1>
<p>资源目录包含 CMDB 中所有实例数据，初始化只包含了少量实例功能，您可以根据企业的需要，预先<a href="Model.md">定义模型</a>后即可通过资源目录进行数据的录入和维护。</p>
<p>在资源目录页，可以通过点击“星状”按钮把常见实例收藏到左侧导航条中，以方便日常快速访问。</p>
<p><img alt="image-20201105114739040" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/Instance/image-20201105114739040.png" />
<center>图2.创建实例</center></p>
<h2 id="_2">新增实例</h2>
<p>模型创建以后，在资源目录中都会新增一个实例管理入口。进入到实例管理页后，可以通过点击“新建”或者“导入”创建实例。</p>
<p><img alt="image-20201105114814110" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/Instance/image-20201105114814110.png" />
<center>图2.创建实例</center></p>
<h2 id="_3">实例编辑、删除</h2>
<p>通过点击实例列表，可以展开实例的查看页面，在此页面中，可以对实例进行编辑和删除。</p>
<p><img alt="image-20201105114852856" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/Instance/image-20201105114852856.png" />
<center>图3.实例编辑</center></p>
<h2 id="_4">实例关联关系查看</h2>
<p>如果在模型配置中有配置关联关系，在“关联”标签中，可以查看到关联的拓扑图。</p>
<p><img alt="image-20201105114908857" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/Instance/image-20201105114908857.png" />
<center>图4.关联关系</center></p>
<p>新增和编辑关联关系可以通过点击“新增关联”完成。</p>
<p><img alt="image-20201105114931914" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/Instance/image-20201105114931914.png" /></p><h1 id="_1">业务管理</h1>
<p>业务是蓝鲸 CD 体系中比较重要的概念，日常使用中主机、进程、业务拓扑的管理都需要依赖已经存在业务。</p>
<p><img alt="1579072866404" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579072866404.png" />
<center>图1.业务管理</center></p>
<h2 id="_2">创建新的业务</h2>
<p>当拓扑形态、管理模式、部署区域或者管理人员有比较大的区别的时，建议创建一个新的业务，使用业务隔离相关资源的使用和权限。</p>
<p>新建业务的一些关键属性解释：</p>
<ul>
<li>业务名：用于识别业务的名称</li>
<li>生命周期：用于标识当前业务的运营阶段。</li>
<li>时区：蓝鲸支持跨国管控，在监控场景和数据挖掘场景等要求配置业务正确的时区</li>
<li>语言：在 SaaS 场景中，会根据配置发送不同语言的通知</li>
<li>运维人员：在 CD 大场景中，运维通常被认为是业务的管理者，所以在业务中运维为必填属性</li>
</ul>
<p><img alt="1579073496488" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579073496488.png" />
<center>图2.新建业务</center></p>
<h2 id="_3">蓝鲸业务</h2>
<p>在蓝鲸搭建以后，会自动创建“蓝鲸”业务，初始化了蓝鲸自身的模块、进程分布情况，此业务可以用于监控、扩缩容等操作，业务不可以被删除。</p><h1 id="_1">主机和资源池</h1>
<p>主机实例是 CMDB 中比较重要的对象之一，系统内置了“资源池”，即未分配到业务的主机。导入的新主机，默认进入到资源池中。</p>
<p><img alt="image-20201103122840545" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/ResourcePool/image-20201103122840545.png" />
<center>图1.主机资源池</center></p>
<h2 id="_2">主机录入</h2>
<p>目前在配置平台录入主机有两种方法：</p>
<ul>
<li>Excel 批量导入</li>
<li>蓝鲸 Agent 安装应用进行导入</li>
</ul>
<h3 id="excel">Excel 批量导入</h3>
<p>点击“下载模版”，可以下载到符合格式好的 Excel 文档。</p>
<p><img alt="image-20201103122940603" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/ResourcePool/image-20201103122940603.png" />
<center>图2.下载模版</center></p>
<p>打开 Excel 文档以后，前三行为系统标识，第四行以后每行为一条记录。</p>
<ul>
<li>标注红色为必填字段，其他字段可以留空</li>
<li>其他字段根据模型中的字段顺序排列</li>
</ul>
<blockquote>
<p>注意的是：录入同样内网 IP，是属性覆盖的操作，可以使用此特性对主机属性进行批量更新。</p>
</blockquote>
<p><img alt="1589787730008" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1589787730008.png" />
<center>图3.Excel字段说明</center></p>
<h3 id="agent">Agent 应用导入</h3>
<p>切换到自动导入的 Tab 页，通过跳转到链接可以打开“Agent 安装”应用，通过安装了蓝鲸的 Agent，相关主机会自动录入到配置平台的资源池中。</p>
<p><img alt="image-20201103122958347" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/ResourcePool/image-20201103122958347.png" />
<center>图4.自动导入</center></p>
<h2 id="_3">资源分配到业务</h2>
<p>先选中要分配主机，点击分配到按钮，选择业务后可以完成主机资源的分配，默认是放到业务的空闲机池。</p>
<p><img alt="image-20201103123038974" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/ResourcePool/image-20201103123038974.png" />
<center>图5.分配到业务</center></p>
<h2 id="_4">资源池目录管理</h2>
<p>公司内不同的部门，业务对于主机资源的管理可能有所不同，我们可以通过创建资源池目录的方式，隔离各个不同团队的资源，避免混用。</p>
<h3 id="_5">创建资源池目录</h3>
<p>点击创建目录按钮，输入资源池名称后回车完成创建，需要注意的是，资源池的目录名称是其唯一标识不允许重复。</p>
<p><img alt="image-20201103123450420" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/ResourcePool/image-20201103123450420.png" /></p>
<h3 id="_6">资源池目录管理</h3>
<p>资源池的目录编辑删除可以通过点击其后的“更多”按钮进行操作，需要注意的是，当资源池下没有任何资源的时候，才可以删除此目录。</p>
<p><img alt="image-20201103123553263" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/ResourcePool/image-20201103123553263.png" /></p>
<h3 id="_7">资源池目录导入主机</h3>
<p>把主机导入到资源池的目录有两种方式：直接导入和通过资源池目录转移。</p>
<h4 id="_8">直接导入</h4>
<p>导入主机的时候，注意选择需要导入的目标目录即可。</p>
<p><img alt="image-20201103123846112" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/ResourcePool/image-20201103123846112.png" /></p>
<h4 id="_9">通过资源池目录转移</h4>
<p>也可以通过从其他资源池目录转移主机资源到当前目录下。勾选要操作的资源以后，选择“分配到”-“资源池其他目录”，可以把当前选中的资源转移到当前目录。</p>
<p><img alt="image-20201103124014328" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/ResourcePool/image-20201103124014328.png" /></p><h1 id="_1">云资源</h1>
<p>配置平台提供了一套基础云资源同步功能，以解决云资源的管理更新不及时，信息不准确等问题。</p>
<p>具体步骤为：</p>
<ol>
<li>创建云账户</li>
<li>创建云资源发现任务</li>
<li>分配云资源</li>
</ol>
<h2 id="1">1. 创建云账户</h2>
<p>用户需先在公有云申请创建一组可访问所有资源的“子账户”。不同公有云申请方式略有差异。目前配置平台支持腾讯云和 AWS 的账号同步能力，相关的账户申请方式可以参考以下文档：</p>
<ul>
<li>腾讯云：<a href="https://cloud.tencent.com/document/product/598/37140">https://cloud.tencent.com/document/product/598/37140</a></li>
<li>AWS：<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_enable-console-custom-url.html">https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_enable-console-custom-url.html</a></li>
</ul>
<p>申请创建了账户以后，需要记录访问的 ID 和 KEY，在配置平台中创建账户。</p>
<p><img alt="image-20201103145902897" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CloudResource/image-20201103145902897.png" /></p>
<p>填写了 ID 和 KEY 以后，点击“连通测试”按钮，以确保配置平台可以正常访问公有云的接口地址，同时校验 ID 和 KEY 的可用性。</p>
<p><img alt="image-20201103150038696" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CloudResource/image-20201103150038696.png" /></p>
<p>创建账户成功以后，我们接下来可以去创建云资源发现任务。</p>
<p><img alt="image-20201103150214547" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CloudResource/image-20201103150214547.png" /></p>
<h2 id="2">2. 创建云资源发现任务</h2>
<p>进入“云资源发现”功能，点击“新建”按钮，选择刚刚创建的腾讯云账户。</p>
<p><img alt="image-20201103150408059" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CloudResource/image-20201103150408059.png" /></p>
<p>目前支持按照 VPC 的粒度同步主机资源，通过选择公有云的区域，找到需要同步的 VPC。</p>
<p><img alt="image-20201103150908555" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CloudResource/image-20201103150908555.png" /></p>
<p>在云区域设定中完善设置：</p>
<ol>
<li>补充 VPC 对应的云区域名称：公有云一个 VPC 内主机 IP 资源不重复，与配置平台中云区域是一一对应的关系。后续此 VPC 下公有云资源都会同步到此 VPC 中</li>
<li>设定云主机录入到资源池的目录：配置平台发现一台新云主机，会优先放置到资源池的目录下，默认在“空闲机”目录。用户也可根据实际的部门或者用途划分，创建一个目录专用于存储新增的云主机资源</li>
</ol>
<p><img alt="image-20201103151136751" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CloudResource/image-20201103151136751.png" /></p>
<p>创建完成会立刻启动一次同步任务，可以在列表中看到同步状态。</p>
<p><img alt="image-20201103151830674" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/CloudResource/image-20201103151830674.png" /></p>
<h2 id="3">3. 分配云资源</h2>
<p>公有云上的主机资源会被同步到资源池的设定目录中，通过“分配到”功能分配到实际的业务中应用。</p>
<p>详细操作可以参考 <a href="产品功能/ResourcePool.md">主机和资源池管理</a></p><h1 id="_1">事件推送</h1>
<p>事件推送功能能够实现当配置信息发生变化的时候，实时同步到关联的系统中，目前支持 http 的推送方式 。此功能需要配合第三方 SaaS 开发实现。</p>
<p>进入“资源 – 事件订阅”可以看到当前存在的推送列表。在新增推送中，可以定义对特定的模型、特定动作进行事件订阅。</p>
<p><img alt="1579158286725" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579158286725.png" />
<center>图1.事件订阅</center></p><h1 id="_1">模型管理</h1>
<p>配置平台中管理的信息实例，均是基于模型构造而成。</p>
<p>目前内置的模型有业务、集群、模块、主机、进程、云区域。</p>
<p>如果内置模型不能够满足，可以通过自定义新增、编辑模型，从而构造出企业特有的 CMDB。</p>
<h2 id="_2">现有模型查看</h2>
<p>管理员可以通过“模型 - 模型管理”中查看到当前系统中存在的所有模型。</p>
<p><img alt="1589787478342" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1589787478342.png" />
<center>图1.现有模型查看</center></p>
<h2 id="_3">模型分组</h2>
<p>系统支持对模型按照使用的功能进行分组。分组类型分为“系统内置”和“用户自定义”。</p>
<ol>
<li>
<p>系统内置分组：目前包含“主机管理”、“业务拓扑”、“组织构架”和“网络”。内置分组不可以修改和删除</p>
</li>
<li>
<p>用户自定义分组：可以通过侧边的新增按钮进行新增。如需修改已有自定义分组，可以通过鼠标悬停在分组名称上，然后点击修改按钮</p>
</li>
</ol>
<p><img alt="1589787511829" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1589787511829.png" />
<center>图2.新增分组</center></p>
<p><img alt="1589787564934" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1589787564934.png" />
<center>图3.编辑/删除分组</center></p>
<h2 id="_4">模型创建</h2>
<p>在新增的分组面板中，点击“立即创建”打开创建一个新的模型。</p>
<ul>
<li>所属分组：模型的管理分组，可以让模型分类更加清晰易于检索，后续版本将会支持根据分组设定权限</li>
<li>唯一标识：模型的在系统中的唯一标识，不可以重复，新建以后将不可修改，主要用于 API 的识别和调用</li>
<li>名称：模型的在视图上的可见名称，建议尽命名可能简洁易懂</li>
</ul>
<p><img alt="1589787596950" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1589787596950.png" />
<center>图4.新增模型</center></p>
<p>模型创建成功以后，进入模型的查看页面，可以发现当前模型已经自动创建了：</p>
<ul>
<li>字段分组“default”，这是一个内置分组不可删除，可以修改名称</li>
<li>字段“实例名”，这是一个必填字段，在系统需要简写的场景，CMDB 会优先显示此字段以便于用户快速识别当前设备的用途或者归属</li>
</ul>
<p>接下来可以通过点击“添加”按钮增加更多字段。</p>
<p><img alt="1589787626775" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1589787626775.png" />
<center>图5.新增字段</center></p>
<p>目前支持已经支持的字段类型如下：</p>
<ul>
<li>短字符：长度 256 个英文字符或 85 个中文字符</li>
<li>长字符：长度 2000 英文或 666 个中文字符</li>
<li>数字：正负整数</li>
<li>浮点数：可以包含小数点的数字</li>
<li>枚举：包含 K-V 结构的列表</li>
<li>日期：日期格式</li>
<li>时间：时间格式</li>
<li>时区：国际时区的枚举</li>
<li>用户：可以输入蓝鲸中已经录入的用户</li>
<li>布尔：布尔类型，常用于开关</li>
<li>列表：可以理解为数组类型，只包含值的列表</li>
</ul>
<p><img alt="1578995270512" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1578995270512.png" />
<center>图6.字段类型</center></p>
<p>不同的字符类型有对应的配置选项，含义如下：</p>
<ul>
<li>可编辑：当前字段仅在初始创建和导入的时候可以编辑，在系统中不可修改</li>
<li>必填：当前字段必须填写</li>
<li>正则校验：字符类型的字段可以填写正则表达式，以保证录入数据格式准确，常用于邮箱、手机号码等内容</li>
<li>最大、最小值：数字类型可以设定支持的数字范围</li>
<li>枚举值：枚举类型中设定枚举可选项，ID 是用户不可见，值为用户可见选项</li>
<li>列表值：列表类型中设定列表可选项</li>
<li>默认值：默认值是枚举和列表类型用于设定用户如果没有填写，使用哪个作为默认输入</li>
<li>用户提示：提供给用户描述 tips，一般哦用于指导如何填写当前字段</li>
</ul>
<h2 id="_5">字段的布局调整</h2>
<p>您可以通过以下方式让实例的详情查询、编辑页面更加友好：</p>
<ol>
<li>调整字段分组顺序</li>
<li>拖动移动字段顺序</li>
</ol>
<p><img alt="1578996369582" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1578996369582.png" />
<center>图7.字段布局</center></p>
<h2 id="_6">唯一校验</h2>
<p>为了保证配置平台录入的实例数据正确有效，唯一校验可以在录入前做好校验防护，避免出现重复数据。</p>
<h3 id="_7">默认校验</h3>
<p>默认情况下，自定义的模型会以“实例名”作为唯一校验。即如果输入了重复的实例名称，系统会拒绝录入并提示数据从服务。默认校验有以下特性：</p>
<ol>
<li>不可以被删除</li>
<li>默认校验必须不为空，即使当前字段没有设定为“必填”，在录入的时候也会被要求一定要填写</li>
</ol>
<p>您可以修改默认校验为模型中已经存在的其他字符、数字类型字段，例如改为“固资编号”、“设备 SN”、“MAC 地址”等。也可以修改为多个字段联合作为唯一校验，常见的场景有：“区域+区域唯一标识”。</p>
<p><img alt="1578997030459" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1578997030459.png" />
<center>图8.可选校验</center></p>
<p>除了默认校验，可以创建多组辅助校验规则以让实例的录入更严谨，辅助校验的字段如果未设定为必填，在录入的时候如果为空则不会校验。如果希望辅助校验也能够同默认校验一样，需要在字段属性中把字段设置为必填。</p>
<h2 id="_8">模型删除</h2>
<p>删除模型：在模型的详情页面，可以通过右上角的“删除”功能完全删掉当前模型设定。需要注意的是为了尽可能减少误删除情况，删除模型请求时候系统会先确认对应实例已经清空。</p>
<p><img alt="1578995759867" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1578995759867.png" />
<center>图9.模型删除</center></p>
<h2 id="_9">模型停用</h2>
<ol>
<li>
<p>禁用模型：如果只是暂时不启用，可以使用右上角的停用功能，与删除不同的是，禁用仅会隐藏系统的显示，数据均会保留</p>
</li>
<li>
<p>启用模型：模型被禁用以后，可以通过在模型管理中，切换到已停用标签，找到当前禁用模型，重新启用以后，原有的实例和关联关系都会重新恢复显示</p>
</li>
</ol>
<p><img alt="1578996121612" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1578996121612.png" />
<center>图10.模型启用</center></p><h1 id="_1">模型关系</h1>
<p>在真实的 CMDB 管理中，数据之间天然存在关系。模型关系功能可以定义模型之间是如何关联。</p>
<p><img alt="1579054176310" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579054176310.png" />
<center>图1.模型关系视图</center></p>
<h2 id="_2">基础视图操作</h2>
<p>进入到“模型-模型关系”功能，默认会显示当前 CMDB 所有的模型和关系配置图，点击左侧分组列表可以快速聚焦到当前分组下的模型。</p>
<p><img alt="1579057199154" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579057199154.png" />
<center>图2.切换到分组视图</center></p>
<p>点击模型或模型分组的后的隐藏按钮，可以隐藏部分不常用的模型。</p>
<p><img alt="1579057316494" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579057316494.png" />
<center>图3.隐藏模型分组</center></p>
<h2 id="_3">新建模型关系</h2>
<p>进入到“模型-模型关系”功能，点击“编辑拓扑”按钮进入编辑模式，此时鼠标悬停在模型上会出现创建关联关系功能，选中另外一个模型以后出现新建关联对话框。选择合适的关联类型和约束方式即可创建一组模型关联。相关描述如下：</p>
<ul>
<li>源模型-目标模型：模型之间的关系有方向属性，视图上以箭头方向区分。默认情况下指针从源模型指向目标模型。您也可以在关联类型中调整指向方式</li>
<li>关联类型：系统自带常见的几种关联类型“属于”、“组成”、“运行”、“上联”、“默认”</li>
<li>目标约束：默认为 N-N，一个源实例可以关联多个目标实例，任意一个目标实例也可以被多个源实例关联。1-N 约束含义是一个源实例可以关联任意多个目标实例，但目标实例如果已经被源关联后，不可以再关联其他源实例。1-1 约束含义是一个源实例只可以关联一个目标实例，一个目标实例也只可以关联一个源实例</li>
<li>关联描述：当前关系的别名，以便用户识别</li>
</ul>
<p><img alt="1579056952798" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579056952798.png" />
<center>图4.编辑模式</center></p>
<p><img alt="1579057463124" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579057463124.png" />
<center>图5.可视化创建关联</center></p>
<p><img alt="1579058241668" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579058241668.png" />
<center>图6.新建关联确认</center></p>
<h2 id="_4">删除建模型关系</h2>
<p>在编辑模式下，再次点击关联关系，可以查看或删除当前关联。</p>
<p>需要注意的是，为了保障系统的基础功能，部分内置关联不可以删除和修改。</p>
<h2 id="_5">模型管理中创建关系</h2>
<p>当模型数量过多，视图中并不便于操作的时候，您可以在“模型-模型管理”找到对应模型，切换到模型关系标签创建关联。</p>
<p><img alt="1579058537897" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579058537897.png" />
<center>图7.新建关联确认</center></p><h1 id="_1">关联类型</h1>
<p>在通常情况下，企业中的模型关联可以进行分类，例如网络设备与主机之间的关系为关联。对关联进行分类以后，能够更加便捷创建修改模型关联、查询同类关联。</p>
<p>出厂默认自带几种关联类型：</p>
<ul>
<li>属于：常用与组织或管理层级的连接</li>
<li>组成：设备部件和整体之间的连接</li>
<li>拓扑组成：系统内置类型，仅用于业务拓扑的节点关系，仅限系统使用</li>
<li>运行：程序与操作系统之间的连接</li>
<li>上联：常用与网络设备之间的连接</li>
<li>默认关联：从早于配置平台 3.2 升级上来的关联会自动对应到默认关联</li>
</ul>
<p><img alt="1579059179277" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579059179277.png" />
<center>图1.关联类型</center></p>
<h2 id="_2">新建关联类型</h2>
<p>进入到“模型-关联类型”功能点击“新建”按钮，在对话框中填入关联类型相关信息：</p>
<ul>
<li>唯一标识：英文字符建议尽可能简短可识别，在关联的导入、API 的查询中需要使用此标识</li>
<li>名称：呈现给用户的名称</li>
<li>源-&gt;目标描述：在源实例查看关系的时候，显示的描述</li>
<li>目标-&gt;源描述：在目标实例查看关系的时候，显示的描述</li>
<li>是否有方向：视图中是否显示方向，默认为源指向目标</li>
</ul>
<p><img alt="1579059161095" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579059161095.png" />
<center>图2.新建关联类型</center></p><h1 id="_1">操作审计</h1>
<p>操作审计用于追溯在配置平台上的实例操作。</p>
<p><img alt="1579069239815" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579069239815.png" />
<center>图1.操作审计</center></p><h1 id="_1">运营统计</h1>
<p>运营统计可以对 CMDB 的实例资源进行可视化统计，</p>
<p>运营统计功能从上到下分为三个板块：</p>
<ul>
<li>常用指标总览：CMDB 重要的数值统计，目前支持业务数、主机数、模型数、实例数</li>
<li>主机统计：主机是 CMDB 一个重要模型对象，默认包含一些常用统计纬度：系统类型统计、业务统计、云区域统计、变化趋势统计</li>
<li>实例统计：除了主机之外其他实例的统计</li>
</ul>
<p><img alt="1579069977699" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579069977699.png" />
<center>图1.运营统计</center></p>
<p>当前支持两种类型“内置”和“自定义图表”，点击板块名称后的“+”按钮，可以进入新建图表对话框。</p>
<ul>
<li>内置图表：常用或者较为复杂的统计，系统已经设定好表现形式和纬度，用户可以定义图表的大小。图表被删除以后可以通过“新增-内置”找回</li>
<li>自定义图表：允许用户对任意模型，以“枚举字段”作为统计纬度作出统计图表，图表类型支持饼图和柱状图</li>
</ul>
<p><img alt="1579072666213" src="F:\v_awjliu\社区版文档\BlueKingDocsTest\ZH/6.0/配置平台/产品白皮书/media/1579072666213.png" />
<center>图2.新增主机统计图表</center></p><h2 id="api">配置平台 API 简介</h2>
<p><strong>蓝鲸配置平台是一款面向应用的 CMDB，在 ITIL 体系里，CMDB 是构建其它流程的基石，而在蓝鲸智云体系里，配置平台就扮演着基石的角色，为应用提供了各种运维场景的配置数据服务。</strong></p>
<table>
<thead>
<tr>
<th>资源名称</th>
<th>资源描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="./add_host_lock.md">add_host_lock</a></td>
<td>新加主机锁</td>
</tr>
<tr>
<td><a href="./add_host_to_resource.md">add_host_to_resource</a></td>
<td>新增主机到资源池</td>
</tr>
<tr>
<td><a href="./add_instance_association.md">add_instance_association</a></td>
<td>新建模型实例之间的关联关系</td>
</tr>
<tr>
<td><a href="./add_label_for_service_instance.md">add_label_for_service_instance</a></td>
<td>为服务实例添加标签</td>
</tr>
<tr>
<td><a href="./batch_create_proc_template.md">batch_create_proc_template</a></td>
<td>批量创建进程模板</td>
</tr>
<tr>
<td><a href="./batch_delete_inst.md">batch_delete_inst</a></td>
<td>批量删除实例</td>
</tr>
<tr>
<td><a href="./batch_delete_set.md">batch_delete_set</a></td>
<td>批量删除集群</td>
</tr>
<tr>
<td><a href="./batch_update_host.md">batch_update_host</a></td>
<td>批量更新主机属性</td>
</tr>
<tr>
<td><a href="./batch_update_inst.md">batch_update_inst</a></td>
<td>批量更新对象实例</td>
</tr>
<tr>
<td><a href="./bind_role_privilege.md">bind_role_privilege</a></td>
<td>绑定角色权限</td>
</tr>
<tr>
<td><a href="./clone_host_property.md">clone_host_property</a></td>
<td>克隆主机属性</td>
</tr>
<tr>
<td><a href="./create_biz_custom_field.md">create_biz_custom_field</a></td>
<td>创建业务自定义模型属性</td>
</tr>
<tr>
<td><a href="./create_business.md">create_business</a></td>
<td>新建业务</td>
</tr>
<tr>
<td><a href="./create_classification.md">create_classification</a></td>
<td>添加模型分类</td>
</tr>
<tr>
<td><a href="./create_cloud_area.md">create_cloud_area</a></td>
<td>创建云区域</td>
</tr>
<tr>
<td><a href="./create_custom_query.md">create_custom_query</a></td>
<td>添加自定义查询</td>
</tr>
<tr>
<td><a href="./create_dynamic_group.md">create_dynamic_group</a></td>
<td>创建动态分组</td>
</tr>
<tr>
<td><a href="./create_inst.md">create_inst</a></td>
<td>创建实例</td>
</tr>
<tr>
<td><a href="./create_module.md">create_module</a></td>
<td>创建模块</td>
</tr>
<tr>
<td><a href="./create_object.md">create_object</a></td>
<td>创建模型</td>
</tr>
<tr>
<td><a href="./create_object_attribute.md">create_object_attribute</a></td>
<td>创建模型属性</td>
</tr>
<tr>
<td><a href="./create_process_instance.md">create_process_instance</a></td>
<td>创建进程实例</td>
</tr>
<tr>
<td><a href="./create_service_category.md">create_service_category</a></td>
<td>新建服务分类</td>
</tr>
<tr>
<td><a href="./create_service_instance.md">create_service_instance</a></td>
<td>创建服务实例</td>
</tr>
<tr>
<td><a href="./create_service_template.md">create_service_template</a></td>
<td>新建服务模板</td>
</tr>
<tr>
<td><a href="./create_set.md">create_set</a></td>
<td>创建集群</td>
</tr>
<tr>
<td><a href="./create_set_template.md">create_set_template</a></td>
<td>新建集群模板</td>
</tr>
<tr>
<td><a href="./delete_business.md">delete_business</a></td>
<td>删除业务</td>
</tr>
<tr>
<td><a href="./delete_classification.md">delete_classification</a></td>
<td>删除模型分类</td>
</tr>
<tr>
<td><a href="./delete_cloud_area.md">delete_cloud_area</a></td>
<td>删除云区域</td>
</tr>
<tr>
<td><a href="./delete_custom_query.md">delete_custom_query</a></td>
<td>删除自定义查询</td>
</tr>
<tr>
<td><a href="./delete_dynamic_group.md">delete_dynamic_group</a></td>
<td>删除动态分组</td>
</tr>
<tr>
<td><a href="./delete_host.md">delete_host</a></td>
<td>删除主机</td>
</tr>
<tr>
<td><a href="./delete_host_lock.md">delete_host_lock</a></td>
<td>删除主机锁</td>
</tr>
<tr>
<td><a href="./delete_inst.md">delete_inst</a></td>
<td>删除实例</td>
</tr>
<tr>
<td><a href="./delete_instance_association.md">delete_instance_association</a></td>
<td>删除模型实例之间的关联关系</td>
</tr>
<tr>
<td><a href="./delete_module.md">delete_module</a></td>
<td>删除模块</td>
</tr>
<tr>
<td><a href="./delete_object.md">delete_object</a></td>
<td>删除模型</td>
</tr>
<tr>
<td><a href="./delete_object_attribute.md">delete_object_attribute</a></td>
<td>删除对象模型属性</td>
</tr>
<tr>
<td><a href="./delete_process_instance.md">delete_process_instance</a></td>
<td>删除进程实例</td>
</tr>
<tr>
<td><a href="./delete_proc_template.md">delete_proc_template</a></td>
<td>删除进程模板</td>
</tr>
<tr>
<td><a href="./delete_related_inst_asso.md">delete_related_inst_asso</a></td>
<td>删除某实例所有的关联关系（包含其作为关联关系原模型和关联关系目标模型的情况）</td>
</tr>
<tr>
<td><a href="./delete_service_category.md">delete_service_category</a></td>
<td>删除服务分类</td>
</tr>
<tr>
<td><a href="./delete_service_instance.md">delete_service_instance</a></td>
<td>删除服务实例</td>
</tr>
<tr>
<td><a href="./delete_service_template.md">delete_service_template</a></td>
<td>删除服务模板</td>
</tr>
<tr>
<td><a href="./delete_set.md">delete_set</a></td>
<td>删除集群</td>
</tr>
<tr>
<td><a href="./delete_set_template.md">delete_set_template</a></td>
<td>删除集群模板</td>
</tr>
<tr>
<td><a href="./execute_dynamic_group.md">execute_dynamic_group</a></td>
<td>执行动态分组</td>
</tr>
<tr>
<td><a href="./find_host_biz_relations.md">find_host_biz_relations</a></td>
<td>查询主机业务关系信息</td>
</tr>
<tr>
<td><a href="./find_host_by_service_template.md">find_host_by_service_template</a></td>
<td>查询服务模板下的主机</td>
</tr>
<tr>
<td><a href="./find_host_by_set_template.md">find_host_by_set_template</a></td>
<td>查询集群模板下的主机</td>
</tr>
<tr>
<td><a href="./find_host_by_topo.md">find_host_by_topo</a></td>
<td>查询拓扑节点下的主机</td>
</tr>
<tr>
<td><a href="./find_host_snapshot_batch.md">find_host_snapshot_batch</a></td>
<td>批量查询主机快照</td>
</tr>
<tr>
<td><a href="./find_host_topo_relation.md">find_host_topo_relation</a></td>
<td>获取主机与拓扑的关系</td>
</tr>
<tr>
<td><a href="./find_instance_association.md">find_instance_association</a></td>
<td>查询模型实例之间的关联关系</td>
</tr>
<tr>
<td><a href="./find_module_batch.md">find_module_batch</a></td>
<td>批量查询某业务的模块详情</td>
</tr>
<tr>
<td><a href="./find_module_host_relation.md">find_module_host_relation</a></td>
<td>根据模块 ID 查询主机和模块的关系</td>
</tr>
<tr>
<td><a href="./find_module_with_relation.md">find_module_with_relation</a></td>
<td>根据条件查询业务下的模块</td>
</tr>
<tr>
<td><a href="./find_object_association.md">find_object_association</a></td>
<td>查询模型之间的关联关系</td>
</tr>
<tr>
<td><a href="./find_set_batch.md">find_set_batch</a></td>
<td>批量查询某业务的集群详情</td>
</tr>
<tr>
<td><a href="./find_topo_node_paths.md">find_topo_node_paths</a></td>
<td>查询业务拓扑节点的拓扑路径</td>
</tr>
<tr>
<td><a href="./get_biz_internal_module.md">get_biz_internal_module</a></td>
<td>查询业务的空闲机/故障机/待回收模块</td>
</tr>
<tr>
<td><a href="./get_custom_query_data.md">get_custom_query_data</a></td>
<td>根据自定义查询获取数据</td>
</tr>
<tr>
<td><a href="./get_custom_query_detail.md">get_custom_query_detail</a></td>
<td>获取自定义查询详情</td>
</tr>
<tr>
<td><a href="./get_dynamic_group.md">get_dynamic_group</a></td>
<td>查询指定动态分组</td>
</tr>
<tr>
<td><a href="./get_host_base_info.md">get_host_base_info</a></td>
<td>获取主机详情</td>
</tr>
<tr>
<td><a href="./get_mainline_object_topo.md">get_mainline_object_topo</a></td>
<td>查询主线模型的业务拓扑</td>
</tr>
<tr>
<td><a href="./get_operation_log.md">get_operation_log</a></td>
<td>获取操作日志</td>
</tr>
<tr>
<td><a href="./get_proc_template.md">get_proc_template</a></td>
<td>获取进程模板</td>
</tr>
<tr>
<td><a href="./get_service_template.md">get_service_template</a></td>
<td>获取服务模板</td>
</tr>
<tr>
<td><a href="./list_biz_hosts.md">list_biz_hosts</a></td>
<td>查询业务下的主机</td>
</tr>
<tr>
<td><a href="./list_biz_hosts_topo.md">list_biz_hosts_topo</a></td>
<td>查询业务下的主机和拓扑信息</td>
</tr>
<tr>
<td><a href="./list_hosts_without_biz.md">list_hosts_without_biz</a></td>
<td>没有业务 ID 的主机查询</td>
</tr>
<tr>
<td><a href="./list_process_detail_by_ids.md">list_process_detail_by_ids</a></td>
<td>查询某业务下进程 ID 对应的进程详情</td>
</tr>
<tr>
<td><a href="./list_process_instance.md">list_process_instance</a></td>
<td>查询进程实例列表</td>
</tr>
<tr>
<td><a href="./list_proc_template.md">list_proc_template</a></td>
<td>查询进程模板列表</td>
</tr>
<tr>
<td><a href="./list_resource_pool_hosts.md">list_resource_pool_hosts</a></td>
<td>查询资源池中的主机</td>
</tr>
<tr>
<td><a href="./list_service_category.md">list_service_category</a></td>
<td>查询服务分类列表</td>
</tr>
<tr>
<td><a href="./list_service_instance.md">list_service_instance</a></td>
<td>查询服务实例列表</td>
</tr>
<tr>
<td><a href="./list_service_instance_by_host.md">list_service_instance_by_host</a></td>
<td>通过主机查询关联的服务实例列表</td>
</tr>
<tr>
<td><a href="./list_service_instance_detail.md">list_service_instance_detail</a></td>
<td>获取服务实例详细信息</td>
</tr>
<tr>
<td><a href="./list_service_instance_by_set_template.md">list_service_instance_by_set_template</a></td>
<td>通过集群模版查询关联的服务实例列表</td>
</tr>
<tr>
<td><a href="./list_service_template.md">list_service_template</a></td>
<td>服务模板列表查询</td>
</tr>
<tr>
<td><a href="./list_set_template.md">list_set_template</a></td>
<td>查询集群模板</td>
</tr>
<tr>
<td><a href="./list_set_template_related_service_template.md">list_set_template_related_service_template</a></td>
<td>获取某集群模版下的服务模版列表</td>
</tr>
<tr>
<td><a href="./remove_label_from_service_instance.md">remove_label_from_service_instance</a></td>
<td>从服务实例移除标签</td>
</tr>
<tr>
<td><a href="./resource_watch.md">resource_watch</a></td>
<td>监听资源变化事件</td>
</tr>
<tr>
<td><a href="./search_biz_inst_topo.md">search_biz_inst_topo</a></td>
<td>查询业务实例拓扑</td>
</tr>
<tr>
<td><a href="./search_business.md">search_business</a></td>
<td>查询业务</td>
</tr>
<tr>
<td><a href="./search_classifications.md">search_classifications</a></td>
<td>查询模型分类</td>
</tr>
<tr>
<td><a href="./search_cloud_area.md">search_cloud_area</a></td>
<td>查询云区域</td>
</tr>
<tr>
<td><a href="./search_custom_query.md">search_custom_query</a></td>
<td>查询自定义查询</td>
</tr>
<tr>
<td><a href="./search_dynamic_group.md">search_dynamic_group</a></td>
<td>搜索动态分组</td>
</tr>
<tr>
<td><a href="./search_host_lock.md">search_host_lock</a></td>
<td>查询主机锁</td>
</tr>
<tr>
<td><a href="./search_hostidentifier.md">search_hostidentifier</a></td>
<td>根据条件查询主机身份</td>
</tr>
<tr>
<td><a href="./search_inst.md">search_inst</a></td>
<td>查询实例</td>
</tr>
<tr>
<td><a href="./search_inst_association_topo.md">search_inst_association_topo</a></td>
<td>根据关联关系实例查询模型实例</td>
</tr>
<tr>
<td><a href="./search_inst_asst_object_inst_base_info.md">search_inst_asst_object_inst_base_info</a></td>
<td>查询实例关联模型实例基本信息</td>
</tr>
<tr>
<td><a href="./search_inst_by_object.md">search_inst_by_object</a></td>
<td>查询实例详情</td>
</tr>
<tr>
<td><a href="./search_module.md">search_module</a></td>
<td>查询模块</td>
</tr>
<tr>
<td><a href="./search_objects.md">search_objects</a></td>
<td>查询模型</td>
</tr>
<tr>
<td><a href="./search_object_attribute.md">search_object_attribute</a></td>
<td>查询对象模型属性</td>
</tr>
<tr>
<td><a href="./search_object_topo.md">search_object_topo</a></td>
<td>查询普通模型拓扑</td>
</tr>
<tr>
<td><a href="./search_related_inst_asso.md">search_related_inst_asso</a></td>
<td>查询某实例所有的关联关系（包含其作为关联关系原模型和关联关系目标模型的情况）</td>
</tr>
<tr>
<td><a href="./search_set.md">search_set</a></td>
<td>查询集群</td>
</tr>
<tr>
<td><a href="./search_subscription.md">search_subscription</a></td>
<td>查询订阅</td>
</tr>
<tr>
<td><a href="./search_topo_tree.md">search_topo_tree</a></td>
<td>搜索业务拓扑树</td>
</tr>
<tr>
<td><a href="./subscribe_event.md">subscribe_event</a></td>
<td>订阅事件</td>
</tr>
<tr>
<td><a href="./sync_set_template_to_set.md">sync_set_template_to_set</a></td>
<td>集群模板同步</td>
</tr>
<tr>
<td><a href="./transfer_host_module.md">transfer_host_module</a></td>
<td>业务内主机转移模块</td>
</tr>
<tr>
<td><a href="./transfer_host_to_faultmodule.md">transfer_host_to_faultmodule</a></td>
<td>上交主机到业务的故障机模块</td>
</tr>
<tr>
<td><a href="./transfer_host_to_idlemodule.md">transfer_host_to_idlemodule</a></td>
<td>上交主机到业务的空闲机模块</td>
</tr>
<tr>
<td><a href="./transfer_host_to_resourcemodule.md">transfer_host_to_resourcemodule</a></td>
<td>上交主机至资源池</td>
</tr>
<tr>
<td><a href="./transfer_resourcehost_to_idlemodule.md">transfer_resourcehost_to_idlemodule</a></td>
<td>资源池主机分配至业务的空闲机模块</td>
</tr>
<tr>
<td><a href="./transfer_sethost_to_idle_module.md">transfer_sethost_to_idle_module</a></td>
<td>清空业务下集群/模块中主机</td>
</tr>
<tr>
<td><a href="./unsubcribe_event.md">unsubcribe_event</a></td>
<td>退订事件</td>
</tr>
<tr>
<td><a href="./update_biz_custom_field.md">update_biz_custom_field</a></td>
<td>更新业务自定义模型属性</td>
</tr>
<tr>
<td><a href="./update_business.md">update_business</a></td>
<td>修改业务</td>
</tr>
<tr>
<td><a href="./update_business_enable_status.md">update_business_enable_status</a></td>
<td>修改业务启用状态</td>
</tr>
<tr>
<td><a href="./update_classification.md">update_classification</a></td>
<td>更新模型分类</td>
</tr>
<tr>
<td><a href="./update_cloud_area.md">update_cloud_area</a></td>
<td>更新云区域</td>
</tr>
<tr>
<td><a href="./update_custom_query.md">update_custom_query</a></td>
<td>更新自定义查询</td>
</tr>
<tr>
<td><a href="./update_dynamic_group.md">update_dynamic_group</a></td>
<td>更新动态分组</td>
</tr>
<tr>
<td><a href="./update_event_subscribe.md">update_event_subscribe</a></td>
<td>修改订阅</td>
</tr>
<tr>
<td><a href="./update_host.md">update_host</a></td>
<td>更新主机属性</td>
</tr>
<tr>
<td><a href="./update_host_cloud_area_field.md">update_host_cloud_area_field</a></td>
<td>更新主机的云区域字段</td>
</tr>
<tr>
<td><a href="./update_inst.md">update_inst</a></td>
<td>更新对象实例</td>
</tr>
<tr>
<td><a href="./update_module.md">update_module</a></td>
<td>更新模块</td>
</tr>
<tr>
<td><a href="./update_object.md">update_object</a></td>
<td>更新定义</td>
</tr>
<tr>
<td><a href="./update_object_attribute.md">update_object_attribute</a></td>
<td>更新对象模型属性</td>
</tr>
<tr>
<td><a href="./update_object_topo_graphics.md">update_object_topo_graphics</a></td>
<td>更新拓扑图</td>
</tr>
<tr>
<td><a href="./update_process_instance.md">update_process_instance</a></td>
<td>更新进程实例</td>
</tr>
<tr>
<td><a href="./update_proc_template.md">update_proc_template</a></td>
<td>更新进程模板</td>
</tr>
<tr>
<td><a href="./update_service_category.md">update_service_category</a></td>
<td>更新服务分类</td>
</tr>
<tr>
<td><a href="./update_service_template.md">update_service_template</a></td>
<td>更新服务模板</td>
</tr>
<tr>
<td><a href="./update_set.md">update_set</a></td>
<td>更新集群</td>
</tr>
<tr>
<td><a href="./update_set_template.md">update_set_template</a></td>
<td>编辑集群模板</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/add_host_lock/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据主机的 id 列表对主机加锁，新加主机锁，如果主机已经加过锁，同样提示加锁成功(v3.8.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id_list</td>
<td>int array</td>
<td>是</td>
<td>主机 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
   &quot;id_list&quot;:[1, 2, 3]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: null
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/add_host_to_resource/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>新增主机到资源池</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>host_info</td>
<td>dict</td>
<td>是</td>
<td>主机信息</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务 ID</td>
</tr>
</tbody>
</table>
<h4 id="host_info">host_info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_host_innerip</td>
<td>string</td>
<td>是</td>
<td>主机内网 ip</td>
</tr>
<tr>
<td>import_from</td>
<td>string</td>
<td>是</td>
<td>主机导入来源,以 api 方式导入为 3</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>是</td>
<td>云区域 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;host_info&quot;: {
        &quot;0&quot;: {
            &quot;bk_host_innerip&quot;: &quot;10.0.0.1&quot;,
            &quot;bk_cloud_id&quot;: 0,
            &quot;import_from&quot;: &quot;3&quot;
        }
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/add_instance_association/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>新增模型实例之间的关联关系.</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>metadata</td>
<td>object</td>
<td>Yes</td>
<td>meta data</td>
</tr>
<tr>
<td>condition</td>
<td>string map</td>
<td>Yes</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<p>metadata params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>label</td>
<td>string map</td>
<td>Yes</td>
<td>标签信息</td>
</tr>
</tbody>
</table>
<p>label params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>string</td>
<td>Yes</td>
<td>业务 id</td>
</tr>
</tbody>
</table>
<p>condition params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_asst_id</td>
<td>string</td>
<td>Yes</td>
<td>模型之间关系关系的唯一 id</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int64</td>
<td>Yes</td>
<td>源模型实例 id</td>
</tr>
<tr>
<td>bk_asst_inst_id</td>
<td>int64</td>
<td>Yes</td>
<td>目标模型实例 id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_obj_asst_id&quot;: &quot;bk_switch_belong_bk_host&quot;,
    &quot;bk_inst_id&quot;: 11,
    &quot;bk_asst_inst_id&quot;: 21,
    &quot;metadata&quot;:{
        &quot;label&quot;:{
            &quot;bk_biz_id&quot;:&quot;1&quot;
        }
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;id&quot;: 1038
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int64</td>
<td>新增的实例关联关系身份 id</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/add_label_for_service_instance/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据服务实例 id 和设置的标签为服务实例添加标签</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>instance_ids</td>
<td>array</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>labels</td>
<td>object</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<h4 id="labels">labels 字段说明</h4>
<ul>
<li>key 校验规则: <code>^[a-zA-Z]([a-z0-9A-Z\-_.]*[a-z0-9A-Z])?$</code></li>
<li>value 校验规则: <code>^[a-z0-9A-Z]([a-z0-9A-Z\-_.]*[a-z0-9A-Z])?$</code></li>
</ul>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;instance_ids&quot;: [59, 62],
  &quot;labels&quot;: {
    &quot;key1&quot;: &quot;value1&quot;,
    &quot;key2&quot;: &quot;value2&quot;
  }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: null
}</code></pre>


<h3 id="_9">返回结果说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/batch_create_proc_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量创建进程模板</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>service_template_id</td>
<td>int</td>
<td>否</td>
<td>服务模板 ID</td>
</tr>
<tr>
<td>processes</td>
<td>array</td>
<td>是</td>
<td>进程模板信息</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;service_template_id&quot;: 1,
  &quot;processes&quot;: [
    {
      &quot;spec&quot;: {
          &quot;auto_start&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: false
          },
          &quot;auto_time_gap&quot;: {
            &quot;as_default_value&quot;: false
          },
          &quot;bind_ip&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;1&quot;
          },
          &quot;bk_biz_id&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: 2
          },
          &quot;bk_func_id&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;1&quot;
          },
          &quot;bk_func_name&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;nginx&quot;
          },
          &quot;bk_process_id&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: 3
          },
          &quot;bk_process_name&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;&quot;
          },
          &quot;bk_supplier_account&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;&quot;
          },
          &quot;create_time&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;2019-05-06T07:12:35.082Z&quot;
          },
          &quot;description&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;a simple description&quot;
          },
          &quot;face_stop_cmd&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;./stop.sh&quot;
          },
          &quot;last_time&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;2019-05-06T07:12:35.082Z&quot;
          },
          &quot;pid_file&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;&quot;
          },
          &quot;port&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;8000,8001,8003,8004&quot;
          },
          &quot;priority&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: 1
          },
          &quot;proc_num&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: 1
          },
          &quot;protocol&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;1&quot;
          },
          &quot;reload_cmd&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;&quot;
          },
          &quot;restart_cmd&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;./restart.sh&quot;
          },
          &quot;start_cmd&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;./start.sh&quot;
          },
          &quot;stop_cmd&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;./stop.sh&quot;
          },
          &quot;timeout&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: 60
          },
          &quot;user&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;&quot;
          },
          &quot;work_path&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;/data/bkce&quot;
          },
          &quot;bk_start_param_regex&quot;: {
            &quot;as_default_value&quot;: true,
            &quot;value&quot;: &quot;&quot;
          }
        }
      }
  ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: [[52]]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>array</td>
<td>成功创建的进程模板 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/batch_delete_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量删除对象实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型 ID</td>
</tr>
<tr>
<td>inst_ids</td>
<td>int array</td>
<td>是</td>
<td>实例 ID 集合</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_obj_id&quot;: &quot;test&quot;,
    &quot;delete&quot;:{
    &quot;inst_ids&quot;:[123]
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/batch_delete_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>对指定业务 id 下通过集群 id 批量删除集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>inst_ids</td>
<td>int array</td>
<td>是</td>
<td>集群 ID 集合</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_biz_id&quot;:0,
    &quot;delete&quot;: {
    &quot;inst_ids&quot;: [123]
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/batch_update_host/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据主机 id 和属性批量更新主机属性（不能用于更新主机属性中的云区域字段）</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>update</td>
<td>object array</td>
<td>是</td>
<td>主机被更新的属性和值，最多 500 条</td>
</tr>
</tbody>
</table>
<h4 id="update">update</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>properties</td>
<td>object</td>
<td>是</td>
<td>主机被更新的属性和值，不能用于更新主机属性中的云区域字段</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>是</td>
<td>用于更新的主机 ID</td>
</tr>
</tbody>
</table>
<h4 id="properties">properties</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_host_name</td>
<td>string</td>
<td>否</td>
<td>主机名，也可以为其它属性，不能用于更新主机属性中的云区域字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>否</td>
<td>主要维护人，也可以为其它属性，不能用于更新主机属性中的云区域字段</td>
</tr>
<tr>
<td>bk_comment</td>
<td>string</td>
<td>否</td>
<td>备注，也可以为其它属性，不能用于更新主机属性中的云区域字段</td>
</tr>
<tr>
<td>bk_isp_name</td>
<td>string</td>
<td>否</td>
<td>所属运营商，也可以为其它属性，不能用于更新主机属性中的云区域字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_supplier_account&quot;:&quot;0&quot;,
    &quot;update&quot;:[
      {
        &quot;properties&quot;:{
          &quot;bk_host_name&quot;:&quot;batch_update&quot;,
          &quot;operator&quot;: &quot;admin&quot;,
          &quot;bk_comment&quot;: &quot;test&quot;,
          &quot;bk_isp_name&quot;: &quot;1&quot;
        },
        &quot;bk_host_id&quot;:46
      }
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: null
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/batch_update_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量更新对象实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型 ID</td>
</tr>
<tr>
<td>update</td>
<td>object array</td>
<td>是</td>
<td>实例被更新的字段及值</td>
</tr>
</tbody>
</table>
<h4 id="update">update</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>否</td>
<td>实例名，也可以为其它自定义字段</td>
</tr>
<tr>
<td>datas</td>
<td>object</td>
<td>是</td>
<td>实例被更新的字段取值</td>
</tr>
<tr>
<td>inst_id</td>
<td>int</td>
<td>是</td>
<td>指明 datas 用于更新的具体实例</td>
</tr>
</tbody>
</table>
<h4 id="datas">datas</h4>
<p><strong>datas 是 map 类型的对象，key 是实例对应的模型定义的字段，value 是字段的取值</strong></p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_supplier_account&quot;:&quot;0&quot;,
    &quot;bk_obj_id&quot;:&quot;test&quot;,
    &quot;update&quot;:[
        {
          &quot;datas&quot;:{
            &quot;bk_inst_name&quot;:&quot;batch_update&quot;
          },
          &quot;inst_id&quot;:46
         }
        ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/bind_role_privilege/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/clone_host_property/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>克隆主机属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_org_ip</td>
<td>string</td>
<td>是</td>
<td>源主机 ip, 只支持传入单 ip</td>
</tr>
<tr>
<td>bk_dst_ip</td>
<td>string</td>
<td>是</td>
<td>目标主机 ip, 多个 ip 用","分割</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>否</td>
<td>云区域 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_biz_id&quot;:2,
    &quot;bk_org_ip&quot;:&quot;127.0.0.1&quot;,
    &quot;bk_dst_ip&quot;:&quot;127.0.0.2&quot;,
    &quot;bk_cloud_id&quot;:0
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: null
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_biz_custom_field/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建业务自定义模型属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>creator</td>
<td>string</td>
<td>否</td>
<td>数据的创建者</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>否</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>editable</td>
<td>bool</td>
<td>否</td>
<td>表明数据是否可编辑</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>否</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>ispre</td>
<td>bool</td>
<td>否</td>
<td>true:预置字段,false:非内置字段</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>否</td>
<td>true:只读，false:非只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>否</td>
<td>true:必填，false:可选</td>
</tr>
<tr>
<td>option</td>
<td>string</td>
<td>否</td>
<td _min_:_1_max_:_2_="&quot;min&quot;:&quot;1&quot;,&quot;max&quot;:&quot;2&quot;">用户自定义内容，存储的内容及格式由调用方决定，以数字类型为例（</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>否</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>否</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>否</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>是</td>
<td>模型的属性 ID</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>是</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>是</td>
<td>定义的属性字段用于存储数据的数据类型,可取值范围（singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool）</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>否</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_biz_id&quot;: 2,
    &quot;creator&quot;: &quot;user&quot;,
    &quot;description&quot;: &quot;test&quot;,
    &quot;editable&quot;: true,
    &quot;isonly&quot;: false,
    &quot;ispre&quot;: false,
    &quot;isreadonly&quot;: false,
    &quot;isrequired&quot;: false,
    &quot;option&quot;: {&quot;min&quot;:1,&quot;max&quot;:2},
    &quot;unit&quot;: &quot;1&quot;,
    &quot;placeholder&quot;: &quot;test&quot;,
    &quot;bk_property_group&quot;: &quot;default&quot;,
    &quot;bk_obj_id&quot;: &quot;cc_test_inst&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_property_id&quot;: &quot;cc_test&quot;,
    &quot;bk_property_name&quot;: &quot;cc_test&quot;,
    &quot;bk_property_type&quot;: &quot;singlechar&quot;,
    &quot;bk_asst_obj_id&quot;: &quot;test&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;bk_biz_id&quot;: 2,
        &quot;id&quot;: 7,
        &quot;bk_supplier_account&quot;: &quot;0&quot;,
        &quot;bk_obj_id&quot;: &quot;cc_test_inst&quot;,
        &quot;bk_property_id&quot;: &quot;cc_test&quot;,
        &quot;bk_property_name&quot;: &quot;cc_test&quot;,
        &quot;bk_property_group&quot;: &quot;default&quot;,
        &quot;bk_property_index&quot;: 4,
        &quot;unit&quot;: &quot;1&quot;,
        &quot;placeholder&quot;: &quot;test&quot;,
        &quot;editable&quot;: true,
        &quot;ispre&quot;: false,
        &quot;isrequired&quot;: false,
        &quot;isreadonly&quot;: false,
        &quot;isonly&quot;: false,
        &quot;bk_issystem&quot;: false,
        &quot;bk_isapi&quot;: false,
        &quot;bk_property_type&quot;: &quot;singlechar&quot;,
        &quot;option&quot;: {&quot;min&quot;:1,&quot;max&quot;:2},
        &quot;description&quot;: &quot;test&quot;,
        &quot;creator&quot;: &quot;user&quot;,
        &quot;create_time&quot;: &quot;2020-03-25 17:12:08&quot;,
        &quot;last_time&quot;: &quot;2020-03-25 17:12:08&quot;,
        &quot;bk_property_group_name&quot;: &quot;default&quot;
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务自定义字段的业务 id</td>
</tr>
<tr>
<td>creator</td>
<td>string</td>
<td>数据的创建者</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>editable</td>
<td>bool</td>
<td>表明数据是否可编辑</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>ispre</td>
<td>bool</td>
<td>true:预置字段,false:非内置字段</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>true:只读，false:非只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>true:必填，false:可选</td>
</tr>
<tr>
<td>option</td>
<td>string</td>
<td>用户自定义内容，存储的内容及格式由调用方决定</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>模型的属性 ID</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>定义的属性字段用于存储数据的数据类型 （singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool)</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type_1">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_business/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>新建业务</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>业务数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_name</td>
<td>string</td>
<td>是</td>
<td>业务名</td>
</tr>
<tr>
<td>bk_biz_maintainer</td>
<td>string</td>
<td>是</td>
<td>运维人员</td>
</tr>
<tr>
<td>bk_biz_productor</td>
<td>string</td>
<td>是</td>
<td>产品人员</td>
</tr>
<tr>
<td>bk_biz_developer</td>
<td>string</td>
<td>是</td>
<td>开发人员</td>
</tr>
<tr>
<td>bk_biz_tester</td>
<td>string</td>
<td>是</td>
<td>测试人员</td>
</tr>
<tr>
<td>time_zone</td>
<td>string</td>
<td>是</td>
<td>时区</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>是</td>
<td>语言, "1"代表中文, "2"代表英文</td>
</tr>
<tr>
<td><strong>注意：此处的输入参数仅对必填以及系统内置的参数做了说明，其余需要填写的参数取决于用户自己定义的属性字段</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;data&quot;: {
        &quot;bk_biz_name&quot;: &quot;cc_app_test&quot;,
        &quot;bk_biz_maintainer&quot;: &quot;admin&quot;,
        &quot;bk_biz_productor&quot;: &quot;admin&quot;,
        &quot;bk_biz_developer&quot;: &quot;admin&quot;,
        &quot;bk_biz_tester&quot;: &quot;admin&quot;,
        &quot;time_zone&quot;: &quot;Asia/Shanghai&quot;,
        &quot;language&quot;: &quot;1&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;bk_biz_id&quot;: 2
    }
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_classification/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>添加模型分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>是</td>
<td>分类 ID，英文描述用于系统内部使用</td>
</tr>
<tr>
<td>bk_classification_name</td>
<td>string</td>
<td>是</td>
<td>分类名</td>
</tr>
<tr>
<td>bk_classification_icon</td>
<td>string</td>
<td>否</td>
<td>模型分类的图标,取值可参考，取值可参考<a href="resource_define/classIcon.json">(classIcon.json)</a></td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_classification_id&quot;: &quot;cs_test&quot;,
    &quot;bk_classification_name&quot;: &quot;test_name&quot;,
    &quot;bk_classification_icon&quot;: &quot;icon-cc-business&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;id&quot;: 18
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>新增数据记录的 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_cloud_area/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据云区域名字创建云区域</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_cloud_name</td>
<td>string</td>
<td>是</td>
<td>云区域名字</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_cloud_name&quot;: &quot;test1&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: {
        &quot;created&quot;: {
            &quot;id&quot;: 2
        }
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>created</td>
<td>object</td>
<td>创建成功，返回信息</td>
</tr>
</tbody>
</table>
<h4 id="datacreated">data.created</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>云区域 id, bk_cloud_id</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_custom_query/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>添加自定义查询</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>是</td>
<td>通用查询条件</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>是</td>
<td>收藏的名称</td>
</tr>
</tbody>
</table>
<h4 id="info">info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>对象名,可以为 biz,set,module,host,object</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>查询输出字段</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>否</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="infoconditioncondition">info.condition.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>否</td>
<td>对象的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>否</td>
<td>操作符, $eq 为相等，$ne 为不等，$in 为属于，$nin 为不属于</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>否</td>
<td>字段对应的值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;info&quot;: &quot;{\&quot;condition\&quot;:[{\&quot;bk_obj_id\&quot;:\&quot;biz\&quot;,\&quot;condition\&quot;:[{\&quot;field\&quot;:\&quot;default\&quot;,\&quot;operator\&quot;:\&quot;$ne\&quot;,\&quot;value\&quot;:1}],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;set\&quot;,\&quot;condition\&quot;:[],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;module\&quot;,\&quot;condition\&quot;:[],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;host\&quot;,\&quot;condition\&quot;:[{\&quot;field\&quot;:\&quot;bk_host_innerip\&quot;,\&quot;operator\&quot;:\&quot;$eq\&quot;,\&quot;value\&quot;:\&quot;127.0.0.1\&quot;}],\&quot;fields\&quot;:[\&quot;bk_host_innerip\&quot;,\&quot;bk_host_outerip\&quot;,\&quot;bk_agent_status\&quot;]}]}&quot;,
    &quot;name&quot;: &quot;api1&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;id&quot;: &quot;b80nu3dmjrccd9i5r1eg&quot;
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>自定义查询主键 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_dynamic_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建动态分组 (V3.9.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>动态分组的目标资源对象类型,目前可以为 host,set</td>
</tr>
<tr>
<td>info</td>
<td>object</td>
<td>是</td>
<td>通用查询条件</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>是</td>
<td>动态分组名称</td>
</tr>
</tbody>
</table>
<h4 id="infocondition">info.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>条件对象资源类型, host 类型的动态分组支持的 info.conditon:set,module,host；set 类型的动态分组支持的 info.condition:set</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>是</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="infoconditioncondition">info.condition.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>是</td>
<td>对象的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>是</td>
<td>操作符, op 值为 eq(相等)/ne(不等)/in(属于)/nin(不属于)</td>
</tr>
<tr>
<td>value</td>
<td>object</td>
<td>是</td>
<td>字段对应的值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_obj_id&quot;: &quot;host&quot;,
    &quot;name&quot;: &quot;my-dynamic-group&quot;,
    &quot;info&quot;: {
        &quot;condition&quot;:[
            {
                &quot;bk_obj_id&quot;:&quot;set&quot;,
                &quot;condition&quot;:[
                    {
                        &quot;field&quot;:&quot;default&quot;,
                        &quot;operator&quot;:&quot;$ne&quot;,
                        &quot;value&quot;:1
                    }
                ]
            },
            {
                &quot;bk_obj_id&quot;:&quot;module&quot;,
                &quot;condition&quot;:[
                    {
                        &quot;field&quot;:&quot;default&quot;,
                        &quot;operator&quot;:&quot;$ne&quot;,
                        &quot;value&quot;:1
                    }
                ]
            },
            {
                &quot;bk_obj_id&quot;:&quot;host&quot;,
                &quot;condition&quot;:[
                    {
                        &quot;field&quot;:&quot;bk_host_innerip&quot;,
                        &quot;operator&quot;:&quot;$eq&quot;,
                        &quot;value&quot;:&quot;127.0.0.1&quot;
                    }
                ]
            }
        ]
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;id&quot;: &quot;XXXXXXXX&quot;
    }
}</code></pre>


<h3 id="_9">返回结果参数</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>创建成功后返回新的动态分组主键 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建实例</p>
<ul>
<li>该接口只适用于自定义层级模型和通用模型实例上，不适用于业务、集群、模块、主机等模型实例</li>
</ul>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>是</td>
<td>实例名</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务 ID， 当创建的是自定义主线层级模型实例时则必传</td>
</tr>
<tr>
<td>bk_parent_id</td>
<td>int</td>
<td>否</td>
<td>当创建的是自定义主线层级模型实例时则必传，代表父层级实例 ID</td>
</tr>
</tbody>
</table>
<p>注意：当操作的是自定义主线层级模型实例时，而又有使用权限中心的，对于 cmdb 小于 3.9 的版本，还需要传包含实例所在业务 id 的 metadata 参数，否则会导致权限中心鉴权失败，格式为
"metadata": {
    "label": {
        "bk_biz_id": "64"
    }
}</p>
<p>其它属于实例属性的字段均也可为入参。</p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_obj_id: &quot;switch&quot;,
    &quot;bk_inst_name&quot;: &quot;example18&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_biz_id&quot;: 0
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;bk_inst_id&quot;: 67
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例 id</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群 id</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>业务数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_parent_id</td>
<td>int</td>
<td>是</td>
<td>父实例节点的 ID，当前实例节点的上一级实例节点，在拓扑结构中对于 module 一般指的是 set 的 bk_set_id</td>
</tr>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>是</td>
<td>模块名</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_set_id&quot;: 10,
    &quot;data&quot;: {
        &quot;bk_parent_id&quot;: 10,
        &quot;bk_module_name&quot;: &quot;test&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;bk_module_id&quot;: 10
    }
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_object/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建模型</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>creator</td>
<td>string</td>
<td>否</td>
<td>本条数据创建者</td>
</tr>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的分类 ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的 ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>是</td>
<td>对象模型的名字，用于展示，可以使用人类可以阅读的任何语言</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>否</td>
<td>对象模型的 ICON 信息，用于前端显示，取值可参考<a href="/static/esb/api_docs/res/cc/modleIcon.json">(modleIcon.json)</a></td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;creator&quot;: &quot;admin&quot;,
    &quot;bk_classification_id&quot;: &quot;test&quot;,
    &quot;bk_obj_name&quot;: &quot;test&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_obj_icon&quot;: &quot;icon-cc-business&quot;,
    &quot;bk_obj_id&quot;: &quot;test&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;id&quot;: 1038
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>新增的数据记录的 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_object_attribute/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建模型属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>creator</td>
<td>string</td>
<td>否</td>
<td>数据的创建者</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>否</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>editable</td>
<td>bool</td>
<td>否</td>
<td>表明数据是否可编辑</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>否</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>ispre</td>
<td>bool</td>
<td>否</td>
<td>true:预置字段,false:非内置字段</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>否</td>
<td>true:只读，false:非只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>否</td>
<td>true:必填，false:可选</td>
</tr>
<tr>
<td>option</td>
<td>string</td>
<td>否</td>
<td _min_:_1_max_:_2_="&quot;min&quot;:&quot;1&quot;,&quot;max&quot;:&quot;2&quot;">用户自定义内容，存储的内容及格式由调用方决定，以数字类型为例（</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>否</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>否</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>否</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>是</td>
<td>模型的属性 ID</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>是</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>是</td>
<td>定义的属性字段用于存储数据的数据类型,可取值范围（singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool）</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>否</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;creator&quot;: &quot;user&quot;,
    &quot;description&quot;: &quot;test&quot;,
    &quot;editable&quot;: true,
    &quot;isonly&quot;: false,
    &quot;ispre&quot;: false,
    &quot;isreadonly&quot;: false,
    &quot;isrequired&quot;: false,
    &quot;option&quot;: {&quot;min&quot;:&quot;1&quot;,&quot;max&quot;:&quot;2&quot;},
    &quot;unit&quot;: &quot;1&quot;,
    &quot;placeholder&quot;: &quot;test&quot;,
    &quot;bk_property_group&quot;: &quot;default&quot;,
    &quot;bk_obj_id&quot;: &quot;cc_test_inst&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_property_id&quot;: &quot;cc_test&quot;,
    &quot;bk_property_name&quot;: &quot;cc_test&quot;,
    &quot;bk_property_type&quot;: &quot;singlechar&quot;,
    &quot;bk_asst_obj_id&quot;: &quot;test&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;id&quot;: 7,
        &quot;bk_supplier_account&quot;: &quot;0&quot;,
        &quot;bk_obj_id&quot;: &quot;cc_test_inst&quot;,
        &quot;bk_property_id&quot;: &quot;cc_test&quot;,
        &quot;bk_property_name&quot;: &quot;cc_test&quot;,
        &quot;bk_property_group&quot;: &quot;default&quot;,
        &quot;bk_property_index&quot;: 4,
        &quot;unit&quot;: &quot;1&quot;,
        &quot;placeholder&quot;: &quot;test&quot;,
        &quot;editable&quot;: true,
        &quot;ispre&quot;: false,
        &quot;isrequired&quot;: false,
        &quot;isreadonly&quot;: false,
        &quot;isonly&quot;: false,
        &quot;bk_issystem&quot;: false,
        &quot;bk_isapi&quot;: false,
        &quot;bk_property_type&quot;: &quot;singlechar&quot;,
        &quot;option&quot;: {&quot;min&quot;:&quot;1&quot;,&quot;max&quot;:&quot;2&quot;},
        &quot;description&quot;: &quot;test&quot;,
        &quot;creator&quot;: &quot;user&quot;,
        &quot;create_time&quot;: &quot;2020-03-25 17:12:08&quot;,
        &quot;last_time&quot;: &quot;2020-03-25 17:12:08&quot;,
        &quot;bk_property_group_name&quot;: &quot;default&quot;
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>creator</td>
<td>string</td>
<td>数据的创建者</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>editable</td>
<td>bool</td>
<td>表明数据是否可编辑</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>ispre</td>
<td>bool</td>
<td>true:预置字段,false:非内置字段</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>true:只读，false:非只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>true:必填，false:可选</td>
</tr>
<tr>
<td>option</td>
<td>string</td>
<td>用户自定义内容，存储的内容及格式由调用方决定</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>模型的属性 ID</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>定义的属性字段用于存储数据的数据类型 （singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool)</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务自定义字段的业务 id</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type_1">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_process_instance/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据服务实例 ID 和进程实例属性值创建进程实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service_instance_id</td>
<td>int</td>
<td>是</td>
<td>服务实例 ID</td>
</tr>
<tr>
<td>processes</td>
<td>array</td>
<td>是</td>
<td>进程实例中不同于模板的属性值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;service_instance_id&quot;: 48,
  &quot;processes&quot;: [
    {
      &quot;process_info&quot;: {
        &quot;bk_supplier_account&quot;: &quot;0&quot;,
        &quot;bind_ip&quot;: &quot;1&quot;,
        &quot;description&quot;: &quot;&quot;,
        &quot;start_cmd&quot;: &quot;&quot;,
        &quot;restart_cmd&quot;: &quot;&quot;,
        &quot;pid_file&quot;: &quot;&quot;,
        &quot;auto_start&quot;: false,
        &quot;timeout&quot;: 30,
        &quot;protocol&quot;: &quot;1&quot;,
        &quot;auto_time_gap&quot;: 60,
        &quot;reload_cmd&quot;: &quot;&quot;,
        &quot;bk_func_name&quot;: &quot;java&quot;,
        &quot;work_path&quot;: &quot;/data/bkce&quot;,
        &quot;stop_cmd&quot;: &quot;&quot;,
        &quot;face_stop_cmd&quot;: &quot;&quot;,
        &quot;port&quot;: &quot;8008,8443&quot;,
        &quot;bk_process_name&quot;: &quot;job_java&quot;,
        &quot;user&quot;: &quot;&quot;,
        &quot;proc_num&quot;: 1,
        &quot;priority&quot;: 1,
        &quot;bk_biz_id&quot;: 2,
        &quot;bk_func_id&quot;: &quot;&quot;,
        &quot;bk_process_id&quot;: 1
      }
    }
  ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: [64]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>新建的进程实例 ID 列表</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_service_category/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建服务分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>string</td>
<td>是</td>
<td>服务分类名称</td>
</tr>
<tr>
<td>parent_id</td>
<td>int</td>
<td>否</td>
<td>父节点 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;name&quot;: &quot;test101&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: 6,
    &quot;name&quot;: &quot;test5&quot;,
    &quot;root_id&quot;: 5,
    &quot;parent_id&quot;: 5,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;is_built_in&quot;: false
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>新建的服务分类信息</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>服务分类 ID</td>
<td></td>
</tr>
<tr>
<td>root_id</td>
<td>integer</td>
<td>服务分类根节点 ID</td>
<td></td>
</tr>
<tr>
<td>parent_id</td>
<td>integer</td>
<td>服务分类父节点 ID</td>
<td></td>
</tr>
<tr>
<td>is_built_in</td>
<td>bool</td>
<td>是否是内置节点</td>
<td>内置节点不允许编辑</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_service_instance/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量创建服务实例，如果模块绑定了服务模板，则服务实例也会根据模板创建，创建服务实例的进程参数内也必须提供每个进程对应的进程模板 ID</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>否</td>
<td>模块 ID</td>
</tr>
<tr>
<td>instances</td>
<td>array</td>
<td>是</td>
<td>需要创建的服务实例信息</td>
</tr>
</tbody>
</table>
<h4 id="instances">instances 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>instances.bk_host_id</td>
<td>int</td>
<td>主机 ID</td>
<td>服务实例绑定的主机 ID</td>
</tr>
<tr>
<td>instances.processes</td>
<td>array</td>
<td>进程信息</td>
<td>服务实例下新建的进程信息</td>
</tr>
<tr>
<td>instances.processes.process_template_id</td>
<td>int</td>
<td>进程模板 ID</td>
<td>如果模块没有绑定服务模板则填 0</td>
</tr>
<tr>
<td>instances.processes.process_info</td>
<td>object</td>
<td>进程实例信息</td>
<td>如果进程绑定有模板，则仅模板中没有锁定的字段有效</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;name&quot;: &quot;test1&quot;,
  &quot;bk_module_id&quot;: 60,
  &quot;instances&quot;: [
    {
      &quot;bk_host_id&quot;: 2,
      &quot;processes&quot;: [
        {
          &quot;process_template_id&quot;: 1,
          &quot;process_info&quot;: {
            &quot;bk_supplier_account&quot;: &quot;0&quot;,
            &quot;bind_ip&quot;: &quot;1&quot;,
            &quot;description&quot;: &quot;&quot;,
            &quot;start_cmd&quot;: &quot;&quot;,
            &quot;restart_cmd&quot;: &quot;&quot;,
            &quot;pid_file&quot;: &quot;&quot;,
            &quot;auto_start&quot;: false,
            &quot;timeout&quot;: 30,
            &quot;protocol&quot;: &quot;1&quot;,
            &quot;auto_time_gap&quot;: 60,
            &quot;reload_cmd&quot;: &quot;&quot;,
            &quot;bk_func_name&quot;: &quot;java&quot;,
            &quot;work_path&quot;: &quot;/data/bkce&quot;,
            &quot;stop_cmd&quot;: &quot;&quot;,
            &quot;face_stop_cmd&quot;: &quot;&quot;,
            &quot;port&quot;: &quot;8008,8443&quot;,
            &quot;bk_process_name&quot;: &quot;job_java&quot;,
            &quot;user&quot;: &quot;&quot;,
            &quot;proc_num&quot;: 1,
            &quot;priority&quot;: 1,
            &quot;bk_biz_id&quot;: 2,
            &quot;bk_func_id&quot;: &quot;&quot;,
            &quot;bk_process_id&quot;: 1
          }
        }
      ]
    }
  ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: [53]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>新建的服务实例 ID 列表</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_service_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据传入的服务模板名称的服务分类 ID 创建指定名称和服务分类的服务模板</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>string</td>
<td>是</td>
<td>服务模板名称</td>
</tr>
<tr>
<td>service_category_id</td>
<td>int</td>
<td>是</td>
<td>服务分类 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;name&quot;: &quot;test4&quot;,
  &quot;service_category_id&quot;: 1
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: {
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: 52,
    &quot;name&quot;: &quot;test4&quot;,
    &quot;service_category_id&quot;: 1,
    &quot;creator&quot;: &quot;admin&quot;,
    &quot;modifier&quot;: &quot;admin&quot;,
    &quot;create_time&quot;: &quot;2019-09-18T23:09:44.251970453+08:00&quot;,
    &quot;last_time&quot;: &quot;2019-09-18T23:09:44.251970568+08:00&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>integer</td>
<td>总数</td>
<td></td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>返回结果</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>服务模板 ID</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>服务模板名称</td>
<td></td>
</tr>
<tr>
<td>service_category_id</td>
<td>integer</td>
<td>服务模板 ID</td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>创建集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>集群数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_parent_id</td>
<td>int</td>
<td>是</td>
<td>父节点的 ID</td>
</tr>
<tr>
<td>bk_set_name</td>
<td>string</td>
<td>是</td>
<td>集群名字</td>
</tr>
<tr>
<td>default</td>
<td>int</td>
<td>否</td>
<td>0-普通集群，1-内置模块集合，默认为 0</td>
</tr>
<tr>
<td>set_template_id</td>
<td>int</td>
<td>否</td>
<td>集群模板 ID，需要通过集群模板创建集群时必填</td>
</tr>
</tbody>
</table>
<p><strong>注意：其它需要的字段由模型定义</strong></p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;data&quot;: {
        &quot;bk_parent_id&quot;: 1,
        &quot;bk_set_name&quot;: &quot;test-set&quot;,
        &quot;bk_set_desc&quot;: &quot;test-set&quot;,
        &quot;bk_capacity&quot;: 1000,
        &quot;description&quot;: &quot;description&quot;,
        &quot;set_template_id&quot;: 1
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;bk_set_id&quot;: 1
    }
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/create_set_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>在指定业务 id 下创建指定名称的集群模板，创建的集群模板通过指定的服务模板 id 去包含服务模板</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>是</td>
<td>集群模板名称</td>
</tr>
<tr>
<td>service_template_ids</td>
<td>array</td>
<td>是</td>
<td>服务模板 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;name&quot;: &quot;test&quot;,
    &quot;bk_biz_id&quot;: 20,
    &quot;service_template_ids&quot;: [59]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: {
        &quot;id&quot;: 6,
        &quot;name&quot;: &quot;test&quot;,
        &quot;bk_biz_id&quot;: 20,
        &quot;version&quot;: 0,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2019-11-27T17:24:10.671658+08:00&quot;,
        &quot;last_time&quot;: &quot;2019-11-27T17:24:10.671658+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>集群模板 ID</td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>集群模板名称</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>version</td>
<td>int</td>
<td>集群模板版本</td>
</tr>
<tr>
<td>creator</td>
<td>string</td>
<td>创建者</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>最后修改人员</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_business/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除业务</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_classification/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>通过模型分类 ID 删除模型分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>是</td>
<td>分类数据记录 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;delete&quot;:{
    &quot;id&quot; : 0
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_cloud_area/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据云区域 ID 删除云区域</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>是</td>
<td>云区域 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_custom_query/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除自定义查询</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>主键 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: &quot;xxx&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_dynamic_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除动态分组 (V3.9.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>动态分组主键 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: &quot;XXXXXXXX&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_host/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除主机</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>string</td>
<td>是</td>
<td>主机 id，多个以逗号分隔</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_host_id&quot;: &quot;1,2,3&quot;,
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_host_lock/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据主机 ID 列表删除主机锁(v3.8.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id_list</td>
<td>int array</td>
<td>是</td>
<td>主机 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
   &quot;id_list&quot;: [1, 2, 3]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: null
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>指定模型 ID 和实例 ID 删除指定模型下的对象实例</p>
<ul>
<li>该接口只适用于自定义层级模型和通用模型实例上，不适用于业务、集群、模块、主机等模型实例</li>
</ul>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>实例 ID</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务 ID， 当删除的是自定义主线层级模型实例时则必传</td>
</tr>
</tbody>
</table>
<p>注意：当操作的是自定义主线层级模型实例时，而又有使用权限中心的，对于 cmdb 小于 3.9 的版本，还需要传包含实例所在业务 id 的 metadata 参数，否则会导致权限中心鉴权失败，格式为
"metadata": {
    "label": {
        "bk_biz_id": "64"
    }
}</p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_obj_id&quot;: &quot;test&quot;,
    &quot;bk_inst_id&quot;: 0
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_instance_association/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据模型实例关联关系的唯一身份 id,删除模型实例之间的关联关系。</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int64</td>
<td>Yes</td>
<td>模型实例关联关系的唯一身份 id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;id&quot;: 1
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群 id</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>是</td>
<td>模块 id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_set_id&quot;: 1,
    &quot;bk_module_id&quot;: 1
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_object/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据模型 id 删除模型</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>否</td>
<td>被删除的数据记录的 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;id&quot; : 0
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_object_attribute/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除对象模型属性，可以删除业务自定义字段</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>否</td>
<td>被删除的数据记录的唯一标识 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;id&quot; : 0
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_process_instance/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据进程实例 ID 列表删除进程实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>process_instance_ids</td>
<td>int</td>
<td>是</td>
<td>进程实例 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;process_instance_ids&quot;: [54]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: null
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_proc_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据进程模板 ID 列表删除进程模板</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>process_templates</td>
<td>array</td>
<td>是</td>
<td>进程模板 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;process_templates&quot;: [50]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: false,
  &quot;code&quot;: 1199056,
  &quot;message&quot;: &quot;禁止删除被引用记录&quot;,
  &quot;data&quot;: &quot;&quot;
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_related_inst_asso/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据实例关联关系的 ID 删除实例之间的关联。(生效版本：3.5.40)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th align="left">字段</th>
<th align="left">类型</th>
<th align="left">必选</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">id</td>
<td align="left">int</td>
<td align="left">是</td>
<td align="left">实例关联关系的 ID， 最多 500 个</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;id&quot;:[1,2]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: null
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_service_category/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据服务分类 ID 删除服务分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>是</td>
<td>服务分类 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;id&quot;: 6
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: false,
  &quot;code&quot;: 1199054,
  &quot;message&quot;: &quot;内置结点，禁止删除&quot;,
  &quot;data&quot;: &quot;&quot;
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_service_instance/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据服务实例 ID 列表批量删除服务实例</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service_instance_ids</td>
<td>array</td>
<td>是</td>
<td>服务实例 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;service_instance_ids&quot;: [48]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: null
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_service_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据服务模板 ID 删除服务模板</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service_template_id</td>
<td>int</td>
<td>是</td>
<td>服务模板 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;service_template_id&quot;: 1
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: false,
  &quot;code&quot;: 1199056,
  &quot;message&quot;: &quot;禁止删除被引用记录&quot;,
  &quot;data&quot;: &quot;&quot;
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>删除集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群 id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_set_id&quot;: 10
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/delete_set_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 ID 和集群模板 ID 列表删除指定业务下的集群模板</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>set_template_ids</td>
<td>array</td>
<td>是</td>
<td>集群模板 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_biz_id&quot;: 20,
    &quot;set_template_ids&quot;: [59]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: null
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/execute_dynamic_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据指定动态分组规则查询获取数据 (V3.9.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>动态分组主键 ID</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>主机属性列表，控制返回结果的主机里有哪些字段，能够加速接口请求和减少网络流量传输,目标资源不具备指定的字段时该字段将被忽略</td>
</tr>
<tr>
<td>disable_counter</td>
<td>bool</td>
<td>否</td>
<td>是否返回总记录条数，默认返回</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页设置</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>检索排序， 默认按照创建时间排序</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;disable_counter&quot;: true,
    &quot;id&quot;: &quot;XXXXXXXX&quot;,
    &quot;fields&quot;: [
        &quot;bk_host_id&quot;,
        &quot;bk_cloud_id&quot;,
        &quot;bk_host_innerip&quot;,
        &quot;bk_host_name&quot;
    ],
    &quot;page&quot;:{
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 1,
        &quot;info&quot;: [
            {
                &quot;bk_obj_id&quot;: &quot;host&quot;,
                &quot;bk_host_id&quot;: 1,
                &quot;bk_host_name&quot;: &quot;nginx-1&quot;,
                &quot;bk_host_innerip&quot;: &quot;10.0.0.1&quot;,
                &quot;bk_cloud_id&quot;: 0
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>当前规则能匹配到的总记录条数（用于调用者进行预分页，实际单次请求返回数量以及数据是否全部拉取完毕以 JSON Array 解析数量为准）</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>dict 数组，主机实际数据, 当动态分组为 host 查询时返回 host 自身属性信息,当动态分组为 set 查询时返回 set 信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_host_biz_relations/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据主机 ID 查询业务相关信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_host_id</td>
<td>int array</td>
<td>是</td>
<td>主机 ID 数组，ID 个数不能超过 500</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_host_id&quot;: [
        3,
        4
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;result&quot;:true,
  &quot;code&quot;:0,
  &quot;message&quot;:&quot;success&quot;,
  &quot;data&quot;: [
    {
      &quot;bk_biz_id&quot;: 3,
      &quot;bk_host_id&quot;: 3,
      &quot;bk_module_id&quot;: 59,
      &quot;bk_set_id&quot;: 11,
      &quot;bk_supplier_account&quot;: &quot;0&quot;
    },
    {
      &quot;bk_biz_id&quot;: 3,
      &quot;bk_host_id&quot;: 3,
      &quot;bk_module_id&quot;: 60,
      &quot;bk_set_id&quot;: 11,
      &quot;bk_supplier_account&quot;: &quot;0&quot;
    },
    {
      &quot;bk_biz_id&quot;: 3,
      &quot;bk_host_id&quot;: 3,
      &quot;bk_module_id&quot;: 61,
      &quot;bk_set_id&quot;: 12,
      &quot;bk_supplier_account&quot;: &quot;0&quot;
    },
    {
      &quot;bk_biz_id&quot;: 3,
      &quot;bk_host_id&quot;: 4,
      &quot;bk_module_id&quot;: 60,
      &quot;bk_set_id&quot;: 11,
      &quot;bk_supplier_account&quot;: &quot;0&quot;
    }
  ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<p>data 字段说明：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>主机 ID</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>模块 ID</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>集群 ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账户</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_host_by_service_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>获取服务模板下的主机 (v3.8.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_service_template_ids</td>
<td>int array</td>
<td>是</td>
<td>服务模板 ID 列表，最多可填 500 个</td>
</tr>
<tr>
<td>bk_module_ids</td>
<td>int array</td>
<td>否</td>
<td>模块 ID 列表, 最多可填 500 个</td>
</tr>
<tr>
<td>fields</td>
<td>string array</td>
<td>是</td>
<td>主机属性列表，控制返回结果的模块信息里有哪些字段</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页信息</td>
</tr>
</tbody>
</table>
<h4 id="page">page 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 500</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_biz_id&quot;: 5,
    &quot;bk_service_template_ids&quot;: [
        48,
        49
    ],
    &quot;bk_module_ids&quot;: [
        65,
        68
    ],
    &quot;fields&quot;: [
        &quot;bk_host_id&quot;,
        &quot;bk_cloud_id&quot;
    ],
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 6,
        &quot;info&quot;: [
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 1
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 2
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 3
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 4
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 7
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 8
            }
        ]
    }
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_host_by_set_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>获取集群模板下的主机 (v3.8.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_service_template_ids</td>
<td>int array</td>
<td>是</td>
<td>集群模板 ID 列表，最多可填 500 个</td>
</tr>
<tr>
<td>bk_set_ids</td>
<td>int array</td>
<td>否</td>
<td>集群 ID 列表, 最多可填 500 个</td>
</tr>
<tr>
<td>fields</td>
<td>string array</td>
<td>是</td>
<td>主机属性列表，控制返回结果的模块信息里有哪些字段</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页信息</td>
</tr>
</tbody>
</table>
<h4 id="page">page 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 500</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_biz_id&quot;: 5,
    &quot;bk_set_template_ids&quot;: [
        1,
        3
    ],
    &quot;bk_set_ids&quot;: [
        13,
        14
    ],
    &quot;fields&quot;: [
        &quot;bk_host_id&quot;,
        &quot;bk_cloud_id&quot;
    ],
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 7,
        &quot;info&quot;: [
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 1
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 3
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 4
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 5
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 6
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 7
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 8
            }
        ]
    }
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_host_by_topo/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询拓扑节点下的主机 (v3.8.13)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>拓扑节点模型 ID，不可为 biz</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>拓扑节点实例 ID</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>主机属性列表，控制返回结果的主机里有哪些字段，能够加速接口请求和减少网络流量传输</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页信息</td>
</tr>
</tbody>
</table>
<h4 id="page">page 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 500</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_biz_id&quot;: 5,
    &quot;bk_obj_id&quot;: &quot;xxx&quot;,
    &quot;bk_inst_id&quot;: 10,
    &quot;fields&quot;: [
        &quot;bk_host_id&quot;,
        &quot;bk_cloud_id&quot;
    ],
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 2,
        &quot;info&quot;: [
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 1
            },
            {
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_host_id&quot;: 2
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>主机实际数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_host_snapshot_batch/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据主机实例 ID 列表和想要获取的主机快照属性列表批量获取主机快照 (v3.8.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_ids</td>
<td>int array</td>
<td>是</td>
<td>主机实例 ID 列表, 即 bk_host_id 列表，最多可填 200 个</td>
</tr>
<tr>
<td>fields</td>
<td>string array</td>
<td>是</td>
<td>主机快照属性列表，控制返回结果的主机快照信息里有哪些字段<br>目前支持字段有：bk_host_id,bk_all_ips</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_ids&quot;: [
        1,
        2
    ],
    &quot;fields&quot;: [
        &quot;bk_host_id&quot;,
        &quot;bk_all_ips&quot;
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: [
        {
            &quot;bk_all_ips&quot;: {
                &quot;interface&quot;: [
                    {
                        &quot;addrs&quot;: [
                            {
                                &quot;ip&quot;: &quot;192.xx.xx.xx&quot;
                            },
                            {
                                &quot;ip&quot;: &quot;fe80::xx:xx:xx:xx&quot;
                            }
                        ],
                        &quot;mac&quot;: &quot;52:xx:xx:xx:xx:xx&quot;
                    },
                    {
                        &quot;addrs&quot;: [
                            {
                                &quot;ip&quot;: &quot;192.xx.xx.xx&quot;
                            }
                        ],
                        &quot;mac&quot;: &quot;02:xx:xx:xx:xx:xx&quot;
                    }
                ]
            },
            &quot;bk_host_id&quot;: 1
        },
        {
            &quot;bk_all_ips&quot;: {
                &quot;interface&quot;: [
                    {
                        &quot;addrs&quot;: [
                            {
                                &quot;ip&quot;: &quot;172.xx.xx.xx&quot;
                            },
                            {
                                &quot;ip&quot;: &quot;fe80::xx:xx:xx:xx&quot;
                            }
                        ],
                        &quot;mac&quot;: &quot;52:xx:xx:xx:xx:xx&quot;
                    },
                    {
                        &quot;addrs&quot;: [
                            {
                                &quot;ip&quot;: &quot;192.xx.xx.xx&quot;
                            }
                        ],
                        &quot;mac&quot;: &quot;02:xx:xx:xx:xx:xx&quot;
                    }
                ]
            },
            &quot;bk_host_id&quot;: 2
        }
    ]
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_host_topo_relation/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>获取主机与拓扑的关系</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_set_ids</td>
<td>array</td>
<td>否</td>
<td>集群 ID 列表，最多 200 条</td>
</tr>
<tr>
<td>bk_module_ids</td>
<td>array</td>
<td>否</td>
<td>模块 ID 列表，最多 500 条</td>
</tr>
<tr>
<td>bk_host_ids</td>
<td>array</td>
<td>否</td>
<td>主机 ID 列表，最多 500 条</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页信息</td>
</tr>
</tbody>
</table>
<h4 id="page">page 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>否</td>
<td>获取数据偏移位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>过去数据条数限制，建议 为 200</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;page&quot;:{
        &quot;start&quot;:0,
        &quot;limit&quot;:10
    },
    &quot;bk_biz_id&quot;:2,
    &quot;bk_set_ids&quot;: [1, 2],
    &quot;bk_module_ids&quot;: [23, 24],
    &quot;bk_host_ids&quot;: [25, 26]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: {
    &quot;count&quot;: 10,
    &quot;info&quot;: [
        {
        &quot;bk_biz_id&quot;: 3,
        &quot;bk_host_id&quot;: 5,
        &quot;bk_module_id&quot;: 54,
        &quot;bk_set_id&quot;: 10,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
        },
        .....
    ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>object array</td>
<td>业务下主机与集群，模块，集群的数据详情列表</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info 字段说明</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>集群 ID</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>模块 ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>主机 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_instance_association/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询模型的实例关联关系。</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>metadata</td>
<td>object</td>
<td>Yes</td>
<td>meta data</td>
</tr>
<tr>
<td>condition</td>
<td>string map</td>
<td>Yes</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<p>metadata params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>label</td>
<td>string map</td>
<td>Yes</td>
<td>标签信息</td>
</tr>
</tbody>
</table>
<p>label params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>string</td>
<td>Yes</td>
<td>业务 ID</td>
</tr>
</tbody>
</table>
<p>condition params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_asst_id</td>
<td>string</td>
<td>Yes</td>
<td>模型关联关系的唯一 id</td>
</tr>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>NO</td>
<td>关联类型的唯一 id</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>NO</td>
<td>源模型 id</td>
</tr>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>NO</td>
<td>目标模型 id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;condition&quot;: {
        &quot;bk_obj_asst_id&quot;: &quot;bk_switch_belong_bk_host&quot;,
        &quot;bk_asst_id&quot;: &quot;&quot;,
        &quot;bk_object_id&quot;: &quot;&quot;,
        &quot;bk_asst_obj_id&quot;: &quot;&quot;
    },
    &quot;metadata&quot;:{
        &quot;label&quot;:{
            &quot;bk_biz_id&quot;:&quot;3&quot;
        }
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: [{
        &quot;bk_obj_asst_id&quot;: &quot;bk_switch_belong_bk_host&quot;,
        &quot;bk_obj_id&quot;:&quot;switch&quot;,
        &quot;bk_asst_obj_id&quot;:&quot;host&quot;,
        &quot;bk_inst_id&quot;:12,
        &quot;bk_asst_inst_id&quot;:13
    }]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int64</td>
<td>the association's unique id</td>
</tr>
<tr>
<td>bk_obj_asst_id</td>
<td>string</td>
<td>自动生成的模型关联关系 id.</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>关联关系源模型 id</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>关联关系目标模型 id</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int64</td>
<td>源模型实例 id</td>
</tr>
<tr>
<td>bk_asst_inst_id</td>
<td>int64</td>
<td>目标模型实例 id</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_module_batch/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 ID 和模块实例 ID 列表，加上想要返回的模块属性列表，批量获取指定业务下模块实例的属性信息 (v3.8.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_ids</td>
<td>int array</td>
<td>是</td>
<td>模块实例 ID 列表, 即 bk_module_id 列表，最多可填 500 个</td>
</tr>
<tr>
<td>fields</td>
<td>string array</td>
<td>是</td>
<td>模块属性列表，控制返回结果的模块信息里有哪些字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_biz_id&quot;: 3,
    &quot;bk_ids&quot;: [
        56,
        57,
        58,
        59,
        60
    ],
    &quot;fields&quot;: [
        &quot;bk_module_id&quot;,
        &quot;bk_module_name&quot;,
        &quot;create_time&quot;
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: [
        {
            &quot;bk_module_id&quot;: 60,
            &quot;bk_module_name&quot;: &quot;sm1&quot;,
            &quot;create_time&quot;: &quot;2020-05-15T22:15:51.725+08:00&quot;,
            &quot;default&quot;: 0
        },
        {
            &quot;bk_module_id&quot;: 59,
            &quot;bk_module_name&quot;: &quot;m1&quot;,
            &quot;create_time&quot;: &quot;2020-05-12T21:04:47.286+08:00&quot;,
            &quot;default&quot;: 0
        },
        {
            &quot;bk_module_id&quot;: 58,
            &quot;bk_module_name&quot;: &quot;待回收&quot;,
            &quot;create_time&quot;: &quot;2020-05-12T21:03:37.238+08:00&quot;,
            &quot;default&quot;: 3
        },
        {
            &quot;bk_module_id&quot;: 57,
            &quot;bk_module_name&quot;: &quot;故障机&quot;,
            &quot;create_time&quot;: &quot;2020-05-12T21:03:37.183+08:00&quot;,
            &quot;default&quot;: 2
        },
        {
            &quot;bk_module_id&quot;: 56,
            &quot;bk_module_name&quot;: &quot;空闲机&quot;,
            &quot;create_time&quot;: &quot;2020-05-12T21:03:37.122+08:00&quot;,
            &quot;default&quot;: 1
        }
    ]
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_module_host_relation/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据模块 ID 查询主机和模块的关系(v3.8.7)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_module_ids</td>
<td>int array</td>
<td>是</td>
<td>模块 ID 数组，最多 200 条</td>
</tr>
<tr>
<td>module_fields</td>
<td>string array</td>
<td>是</td>
<td>模块属性列表，控制返回结果的模块里有哪些字段</td>
</tr>
<tr>
<td>host_fields</td>
<td>string array</td>
<td>是</td>
<td>主机属性列表，控制返回结果的主机里有哪些字段</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页参数</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>否</td>
<td>记录开始位置,默认值 0</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 1000</td>
</tr>
</tbody>
</table>
<p><strong>注: 一个模块下的主机关系可能会拆分多次返回，分页方式是按主机 ID 排序进行分页。</strong></p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_module_ids&quot;: [
        1,
        2,
        3
    ],
    &quot;module_fields&quot;: [
        &quot;bk_module_id&quot;,
        &quot;bk_module_name&quot;
    ],
    &quot;host_fields&quot;: [
        &quot;bk_host_innerip&quot;,
        &quot;bk_host_id&quot;
    ],
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 500
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;count&quot;: 2,
    &quot;relation&quot;: [
      {
        &quot;host&quot;: {
          &quot;bk_host_id&quot;: 1,
          &quot;bk_host_innerip&quot;: &quot;127.0.0.1&quot;,
        },
        &quot;modules&quot;: [
          {
            &quot;bk_module_id&quot;: 1,
            &quot;bk_module_name&quot;: &quot;m1&quot;,
          },
          {
            &quot;bk_module_id&quot;: 2,
            &quot;bk_module_name&quot;: &quot;m2&quot;,
          }
        ]
      },
      {
        &quot;host&quot;: {
          &quot;bk_host_id&quot;: 2,
          &quot;bk_host_innerip&quot;: &quot;127.0.0.2&quot;,
        },
        &quot;modules&quot;: [
          {
            &quot;bk_module_id&quot;: 3,
            &quot;bk_module_name&quot;: &quot;m3&quot;,
          }
        ]
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<p>data 字段说明：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>relation</td>
<td>object array</td>
<td>主机和模块实际数据</td>
</tr>
</tbody>
</table>
<p>info 字段说明:</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>host</td>
<td>object</td>
<td>主机数据</td>
</tr>
<tr>
<td>modules</td>
<td>object array</td>
<td>主机所属的模块信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_module_with_relation/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据条件查询业务下的模块 (v3.9.7)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_set_ids</td>
<td>int array</td>
<td>否</td>
<td>集群 ID 列表, 最多可填 200 个</td>
</tr>
<tr>
<td>bk_service_template_ids</td>
<td>int array</td>
<td>否</td>
<td>服务模板 ID 列表</td>
</tr>
<tr>
<td>fields</td>
<td>string array</td>
<td>是</td>
<td>模块属性列表，控制返回结果的模块信息里有哪些字段</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页信息</td>
</tr>
</tbody>
</table>
<h4 id="page">page 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 500</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_biz_id&quot;: 2,
    &quot;bk_set_ids&quot;:[1,2],
    &quot;bk_service_template_ids&quot;: [3,4],
    &quot;fields&quot;:[&quot;bk_module_id&quot;, &quot;bk_module_name&quot;],
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;bk_error_code&quot;: 0,
    &quot;bk_error_msg&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: {
        &quot;count&quot;: 2,
        &quot;info&quot;: [
            {
                &quot;bk_module_id&quot;: 8,
                &quot;bk_module_name&quot;: &quot;license&quot;
            },
            {
                &quot;bk_module_id&quot;: 12,
                &quot;bk_module_name&quot;: &quot;gse_proc&quot;
            }
        ]
    }
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_object_association/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询模型的实例之间的关联关系。</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>condition</td>
<td>string map</td>
<td>Yes</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<p>condition params</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>Yes</td>
<td>模型的关联类型唯一 id</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>Yes</td>
<td>源模型 id</td>
</tr>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>Yes</td>
<td>目标模型 id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;condition&quot;: {
        &quot;bk_asst_id&quot;: &quot;belong&quot;,
        &quot;bk_obj_id&quot;: &quot;bk_switch&quot;,
        &quot;bk_asst_obj_id&quot;: &quot;bk_host&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: [
        {
            &quot;id&quot;: 1,
            &quot;bk_obj_asst_id&quot;: &quot;bk_switch_belong_bk_host&quot;,
            &quot;bk_obj_asst_name&quot;: &quot;&quot;,
            &quot;bk_asst_id&quot;: &quot;belong&quot;,
            &quot;bk_asst_name&quot;: &quot;belong&quot;,
            &quot;bk_obj_id&quot;: &quot;bk_switch&quot;,
            &quot;bk_obj_name&quot;: &quot;switch&quot;,
            &quot;bk_asst_obj_id&quot;: &quot;bk_host&quot;,
            &quot;bk_asst_obj_name&quot;: &quot;host&quot;,
            &quot;mapping&quot;: &quot;1:n&quot;,
            &quot;on_delete&quot;: &quot;none&quot;
        }
    ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int64</td>
<td>模型关联关系的身份 id</td>
</tr>
<tr>
<td>bk_obj_asst_id</td>
<td>string</td>
<td>模型关联关系的唯一 id.</td>
</tr>
<tr>
<td>bk_obj_asst_name</td>
<td>string</td>
<td>关联关系的别名.</td>
</tr>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>关联类型 id</td>
</tr>
<tr>
<td>bk_asst_name</td>
<td>string</td>
<td>关联类型名称</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>源模型 id</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>源模型名称</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>目标模型 id</td>
</tr>
<tr>
<td>bk_asst_obj_name</td>
<td>string</td>
<td>目标模型名称</td>
</tr>
<tr>
<td>mapping</td>
<td>string</td>
<td>源模型与目标模型关联关系实例的映身关系，可以是以下中的一种[1:1, 1:n, n:n]</td>
</tr>
<tr>
<td>on_delete</td>
<td>string</td>
<td>删除关联关系时的动作, 取值为以下其中的一种 [none, delete_src, delete_dest], "none" 什么也不做, "delete_src" 删除源模型的实例, "delete_dest" 删除目标模型的实例.</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_set_batch/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id 和集群实例 id 列表，以及想要获取的属性列表，批量获取指定业务下集群的属性详情 (v3.8.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_ids</td>
<td>int array</td>
<td>是</td>
<td>集群实例 ID 列表, 即 bk_set_id 列表，最多可填 500 个</td>
</tr>
<tr>
<td>fields</td>
<td>string array</td>
<td>是</td>
<td>集群属性列表，控制返回结果的集群信息里有哪些字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_biz_id&quot;: 3,
    &quot;bk_ids&quot;: [
        11,
        12
    ],
    &quot;fields&quot;: [
        &quot;bk_set_id&quot;,
        &quot;bk_set_name&quot;,
        &quot;create_time&quot;
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: [
        {
            &quot;bk_set_id&quot;: 12,
            &quot;bk_set_name&quot;: &quot;ss1&quot;,
            &quot;create_time&quot;: &quot;2020-05-15T22:15:51.67+08:00&quot;,
            &quot;default&quot;: 0
        },
        {
            &quot;bk_set_id&quot;: 11,
            &quot;bk_set_name&quot;: &quot;set1&quot;,
            &quot;create_time&quot;: &quot;2020-05-12T21:04:36.644+08:00&quot;,
            &quot;default&quot;: 0
        }
    ]
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/find_topo_node_paths/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>该接口用于根据业务拓扑层级中的某个节点实例(包括自定义节层级实例)，查询该节点的父层级一直到业务顶点的路径信息。(v3.9.1)</p>
<p><strong>注意</strong>
该接口有缓存，缓存更新的最长时间为 5 分钟。</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_nodes</td>
<td>object array</td>
<td>是</td>
<td>要查询的业务拓扑实例节点信息列表, 最大查询数量为 1000</td>
</tr>
</tbody>
</table>
<h4 id="bk_nodes">bk_nodes 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>业务拓扑节点模型名称，如 biz,set,module 及自定义层级模型名</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int64</td>
<td>是</td>
<td>该业务拓扑节点的实例 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_nodes&quot;: [
        {
            &quot;bk_obj_id&quot;: &quot;set&quot;,
            &quot;bk_inst_id&quot;: 11
        },
        {
            &quot;bk_obj_id&quot;: &quot;module&quot;,
            &quot;bk_inst_id&quot;: 60
        },
        {
            &quot;bk_obj_id&quot;: &quot;province&quot;,
            &quot;bk_inst_id&quot;: 3
        }
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: [
        {
            &quot;bk_obj_id&quot;: &quot;set&quot;,
            &quot;bk_inst_id&quot;: 11,
            &quot;bk_inst_name&quot;: &quot;gz&quot;,
            &quot;bk_paths&quot;: [
                [
                    {
                        &quot;bk_obj_id&quot;: &quot;biz&quot;,
                        &quot;bk_inst_id&quot;: 3,
                        &quot;bk_inst_name&quot;: &quot;demo&quot;
                    },
                    {
                        &quot;bk_obj_id&quot;: &quot;province&quot;,
                        &quot;bk_inst_id&quot;: 3,
                        &quot;bk_inst_name&quot;: &quot;sz&quot;
                    }
                ]
            ]
        },
        {
            &quot;bk_obj_id&quot;: &quot;module&quot;,
            &quot;bk_inst_id&quot;: 60,
            &quot;bk_inst_name&quot;: &quot;m2&quot;,
            &quot;bk_paths&quot;: [
                [
                    {
                        &quot;bk_obj_id&quot;: &quot;biz&quot;,
                        &quot;bk_inst_id&quot;: 3,
                        &quot;bk_inst_name&quot;: &quot;demo&quot;
                    },
                    {
                        &quot;bk_obj_id&quot;: &quot;province&quot;,
                        &quot;bk_inst_id&quot;: 3,
                        &quot;bk_inst_name&quot;: &quot;sz&quot;
                    },
                    {
                        &quot;bk_obj_id&quot;: &quot;set&quot;,
                        &quot;bk_inst_id&quot;: 12,
                        &quot;bk_inst_name&quot;: &quot;set1&quot;
                    }
                ]
            ]
        },
        {
            &quot;bk_obj_id&quot;: &quot;province&quot;,
            &quot;bk_inst_id&quot;: 3,
            &quot;bk_inst_name&quot;: &quot;sz&quot;,
            &quot;bk_paths&quot;: [
                [
                    {
                        &quot;bk_obj_id&quot;: &quot;biz&quot;,
                        &quot;bk_inst_id&quot;: 3,
                        &quot;bk_inst_name&quot;: &quot;demo&quot;
                    }
                ]
            ]
        }
    ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data 说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>业务拓扑节点模型名称，如 biz,set,module 及自定义层级模型名</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int64</td>
<td>该业务拓扑节点的实例 ID</td>
</tr>
<tr>
<td>bk_paths</td>
<td>object array</td>
<td>该节点的层级信息，即从业务到该节点的父节点的层级信息</td>
</tr>
</tbody>
</table>
<h4 id="bk_paths">bk_paths 说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>节点类型</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int64</td>
<td>节点实例 ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>节点实例名称</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_biz_internal_module/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 ID 获取业务空闲机, 故障机和待回收模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_biz_id&quot;:0,
    &quot;bk_supplier_account&quot;:&quot;0&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;bk_set_id&quot;: 2,
    &quot;bk_set_name&quot;: &quot;空闲机池&quot;,
    &quot;module&quot;: [
      {
        &quot;bk_module_id&quot;: 3,
        &quot;bk_module_name&quot;: &quot;空闲机&quot;
      },
      {
        &quot;bk_module_id&quot;: 4,
        &quot;bk_module_name&quot;: &quot;故障机&quot;
      },
      {
        &quot;bk_module_id&quot;: 5,
        &quot;bk_module_name&quot;: &quot;待回收&quot;
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data 说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_set_id</td>
<td>int64</td>
<td>空闲机, 故障机和待回收模块所属的 set 的实例 ID</td>
</tr>
<tr>
<td>bk_set_name</td>
<td>string</td>
<td>空闲机, 故障机和待回收模块所属的 set 的实例名称</td>
</tr>
</tbody>
</table>
<h4 id="module">module 说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_module_id</td>
<td>int64</td>
<td>空闲机, 故障机或待回收模块的实例 ID</td>
</tr>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>空闲机, 故障机或待回收模块的实例名称</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_custom_query_data/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>根据自定义查询获取数据</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>主键 ID</td>
</tr>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 200</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: &quot;xxx&quot;,
    &quot;start&quot;: 0,
    &quot;limit&quot;: 10
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 1,
        &quot;info&quot;: [
            {
                &quot;biz&quot;: {
                    &quot;bk_biz_id&quot;: 1,
                    &quot;bk_biz_name&quot;: &quot;test&quot;,
                    &quot;bk_biz_maintainer&quot;: &quot;admin&quot;,
                    &quot;bk_biz_productor&quot;: &quot;admin&quot;
                },
                &quot;host&quot;: {
                    &quot;bk_host_id&quot;: 1,
                    &quot;bk_host_name&quot;: &quot;nginx-1&quot;,
                    &quot;bk_host_innerip&quot;: &quot;10.0.0.1&quot;,
                    &quot;bk_cloud_id&quot;: 0
                },
                &quot;module&quot;: {
                    &quot;bk_module_name&quot;: &quot;module-test&quot;
                },
                &quot;set&quot;: {
                    &quot;bk_set_name&quot;: &quot;set-test&quot;
                }
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>主机实际数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>biz</td>
<td>dict</td>
<td>主机所属的业务信息</td>
</tr>
<tr>
<td>set</td>
<td>dict</td>
<td>主机所属的集群信息</td>
</tr>
<tr>
<td>module</td>
<td>dict</td>
<td>主机所属的模块信息</td>
</tr>
<tr>
<td>host</td>
<td>dict</td>
<td>主机自身属性</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_custom_query_detail/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取自定义查询详情</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>主键 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: &quot;xxx&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;bk_biz_id&quot;: 1,
        &quot;name&quot;: &quot;api1&quot;,
        &quot;id&quot;: &quot;bacfet4kd42325venmcg&quot;,
        &quot;info&quot;: &quot;{\&quot;condition\&quot;:[{\&quot;bk_obj_id\&quot;:\&quot;biz\&quot;,\&quot;condition\&quot;:[{\&quot;field\&quot;:\&quot;default\&quot;,\&quot;operator\&quot;:\&quot;$ne\&quot;,\&quot;value\&quot;:1}],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;set\&quot;,\&quot;condition\&quot;:[],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;module\&quot;,\&quot;condition\&quot;:[],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;host\&quot;,\&quot;condition\&quot;:[{\&quot;field\&quot;:\&quot;bk_host_innerip\&quot;,\&quot;operator\&quot;:\&quot;$eq\&quot;,\&quot;value\&quot;:\&quot;127.0.0.1\&quot;}],\&quot;fields\&quot;:[\&quot;bk_host_innerip\&quot;,\&quot;bk_host_outerip\&quot;,\&quot;bk_agent_status\&quot;]}]}&quot;,
        &quot;create_user&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2018-03-27T16:22:43.271+08:00&quot;,
        &quot;modify_user&quot;: &quot;admin&quot;,
        &quot;last_time&quot;: &quot;2018-03-27T16:29:26.428+08:00&quot;
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>create_user</td>
<td>string</td>
<td>创建者</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>自定义查询主键 ID</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>自定义查询信息</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>modify_user</td>
<td>string</td>
<td>修改者</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>自定义查询命名</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<p>| 字段      |  类型     |  描述      |
|-----------|------------|--------|------------|
| bk_obj_id |  string   | 对象名,可以为 biz,set,module,host,object |
| fields    |  array    | 查询输出字段 |
| condition |  array    | 查询条件 |</p>
<h4 id="datainfocondition">data.info.condition</h4>
<p>| 字段      |  类型     |  描述      |
|-----------|------------|--------|------------|
| field     |  string    | 对象的字段 |
| operator  |  string    | 操作符, $eq 为相等，$ne 为不等，$in 为属于，$nin 为不属于 |
| value     |  string    | 字段对应的值 |</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_dynamic_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>获取动态分组详情 (V3.9.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>目标动态分组主键 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: &quot;XXXXXXXX&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;bk_biz_id&quot;: 1,
        &quot;name&quot;: &quot;my-dynamic-group&quot;,
        &quot;id&quot;: &quot;XXXXXXXX&quot;,
        &quot;bk_obj_id&quot;: &quot;host&quot;,
        &quot;info&quot;: {
            &quot;condition&quot;:[
                {
                    &quot;bk_obj_id&quot;:&quot;set&quot;,
                    &quot;condition&quot;:[
                        {
                            &quot;field&quot;:&quot;default&quot;,
                            &quot;operator&quot;:&quot;$ne&quot;,
                            &quot;value&quot;:1
                        }
                    ]
                },
                {
                    &quot;bk_obj_id&quot;:&quot;module&quot;,
                    &quot;condition&quot;:[
                        {
                            &quot;field&quot;:&quot;default&quot;,
                            &quot;operator&quot;:&quot;$ne&quot;,
                            &quot;value&quot;:1
                        }
                    ]
                },
                {
                    &quot;bk_obj_id&quot;:&quot;host&quot;,
                    &quot;condition&quot;:[
                        {
                            &quot;field&quot;:&quot;bk_host_innerip&quot;,
                            &quot;operator&quot;:&quot;$eq&quot;,
                            &quot;value&quot;:&quot;127.0.0.1&quot;
                        }
                    ]
                }
            ]
        },
       &quot;create_user&quot;: &quot;admin&quot;,
       &quot;create_time&quot;: &quot;2018-03-27T16:22:43.271+08:00&quot;,
       &quot;modify_user&quot;: &quot;admin&quot;,
       &quot;last_time&quot;: &quot;2018-03-27T16:29:26.428+08:00&quot;
    }
}</code></pre>


<h3 id="_9">返回结果参数</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>动态分组主键 ID</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>动态分组的目标资源对象类型,目前可以为 host,set</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>动态分组命名</td>
</tr>
<tr>
<td>info</td>
<td>object</td>
<td>动态分组规则信息</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>modify_user</td>
<td>string</td>
<td>修改者</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>create_user</td>
<td>string</td>
<td>创建者</td>
</tr>
</tbody>
</table>
<h4 id="datainfocondition">data.info.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>条件对象资源类型, host 类型的动态分组支持的 info.conditon:set,module,host；set 类型的动态分组支持的 info.condition:set</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="datainfoconditioncondition">data.info.condition.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>对象的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>操作符, op 值为 eq(相等)/ne(不等)/in(属于)/nin(不属于)</td>
</tr>
<tr>
<td>value</td>
<td>object</td>
<td>字段对应的值</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_host_base_info/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取主机基础信息详情</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>是</td>
<td>主机 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_host_id&quot;: 10000
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: [
        {
            &quot;bk_property_id&quot;: &quot;bk_host_name&quot;,
            &quot;bk_property_name&quot;: &quot;host name&quot;,
            &quot;bk_property_value&quot;: &quot;centos7&quot;
        },
        {
            &quot;bk_property_id&quot;: &quot;bk_host_id&quot;,
            &quot;bk_property_name&quot;: &quot;host ID&quot;,
            &quot;bk_property_value&quot;: &quot;10000&quot;
        }
    ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>属性 id</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>属性名称</td>
</tr>
<tr>
<td>bk_property_value</td>
<td>string</td>
<td>属性值</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_mainline_object_topo/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取主线模型的业务拓扑</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_supplier_account&quot;:&quot;0&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: [
    {
      &quot;bk_obj_id&quot;: &quot;biz&quot;,
      &quot;bk_obj_name&quot;: &quot;业务&quot;,
      &quot;bk_supplier_account&quot;: &quot;0&quot;,
      &quot;bk_next_obj&quot;: &quot;set&quot;,
      &quot;bk_next_name&quot;: &quot;集群&quot;,
      &quot;bk_pre_obj_id&quot;: &quot;&quot;,
      &quot;bk_pre_obj_name&quot;: &quot;&quot;
    },
    {
      &quot;bk_obj_id&quot;: &quot;set&quot;,
      &quot;bk_obj_name&quot;: &quot;集群&quot;,
      &quot;bk_supplier_account&quot;: &quot;0&quot;,
      &quot;bk_next_obj&quot;: &quot;module&quot;,
      &quot;bk_next_name&quot;: &quot;模块&quot;,
      &quot;bk_pre_obj_id&quot;: &quot;biz&quot;,
      &quot;bk_pre_obj_name&quot;: &quot;业务&quot;
    },
    {
      &quot;bk_obj_id&quot;: &quot;module&quot;,
      &quot;bk_obj_name&quot;: &quot;模块&quot;,
      &quot;bk_supplier_account&quot;: &quot;0&quot;,
      &quot;bk_next_obj&quot;: &quot;host&quot;,
      &quot;bk_next_name&quot;: &quot;主机&quot;,
      &quot;bk_pre_obj_id&quot;: &quot;set&quot;,
      &quot;bk_pre_obj_name&quot;: &quot;集群&quot;
    },
    {
      &quot;bk_obj_id&quot;: &quot;host&quot;,
      &quot;bk_obj_name&quot;: &quot;主机&quot;,
      &quot;bk_supplier_account&quot;: &quot;0&quot;,
      &quot;bk_next_obj&quot;: &quot;&quot;,
      &quot;bk_next_name&quot;: &quot;&quot;,
      &quot;bk_pre_obj_id&quot;: &quot;module&quot;,
      &quot;bk_pre_obj_name&quot;: &quot;模块&quot;
    }
  ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型的唯一 ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型名称</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商帐户名称</td>
</tr>
<tr>
<td>bk_next_obj</td>
<td>string</td>
<td>当前模型的下一个模型唯一 ID</td>
</tr>
<tr>
<td>bk_next_name</td>
<td>string</td>
<td>当前模型的下一个模型名称</td>
</tr>
<tr>
<td>bk_pre_obj_id</td>
<td>string</td>
<td>当前模型的前一个模型的唯一 ID</td>
</tr>
<tr>
<td>bk_pre_obj_name</td>
<td>string</td>
<td>当前模型的前一个模型的名称</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_operation_log/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>获取操作日志</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>condition</td>
<td>object</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>start</td>
<td>int</td>
<td>否</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数，最大 200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h4 id="condition">condition 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>audit_type</td>
<td>string</td>
<td>否</td>
<td>操作的资源类型大类</td>
</tr>
<tr>
<td>user</td>
<td>string</td>
<td>否</td>
<td>操作人</td>
</tr>
<tr>
<td>resource_type</td>
<td>string array</td>
<td>否</td>
<td>操作的具体资源类型</td>
</tr>
<tr>
<td>action</td>
<td>string array</td>
<td>否</td>
<td>操作类型</td>
</tr>
<tr>
<td>operate_from</td>
<td>string</td>
<td>否</td>
<td>操作的来源</td>
</tr>
<tr>
<td>operation_time</td>
<td>string array</td>
<td>否</td>
<td>操作开始和结束时间成对出现</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务 ID</td>
</tr>
<tr>
<td>resource_id</td>
<td>int</td>
<td>否</td>
<td>资源 ID</td>
</tr>
<tr>
<td>resource_name</td>
<td>string</td>
<td>否</td>
<td>资源名称</td>
</tr>
<tr>
<td>category</td>
<td>string</td>
<td>否</td>
<td>前端使用的资源分类</td>
</tr>
<tr>
<td>label</td>
<td>string array</td>
<td>否</td>
<td>资源标签</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;condition&quot;: {
        &quot;audit_type&quot;: &quot;business_resource&quot;,
        &quot;user&quot;: &quot;admin&quot;,
        &quot;resource_type&quot;: [
            &quot;business&quot;,
            &quot;module&quot;
        ],
        &quot;action&quot;: [
            &quot;create&quot;,
            &quot;update&quot;
        ],
        &quot;operate_from&quot;: &quot;user&quot;,
        &quot;operation_time&quot;: [
            &quot;2020-04-03 00:00:00&quot;,
            &quot;2020-04-03 18:00:00&quot;
        ],
        &quot;bk_biz_id&quot;: 6,
        &quot;resource_id&quot;: 120,
        &quot;resource_name&quot;: &quot;test&quot;,
        &quot;category&quot;: &quot;business&quot;,
        &quot;label&quot;: [
            &quot;biz_topology&quot;
        ]
    },
    &quot;start&quot;: 0,
    &quot;limit&quot;: 10,
    &quot;sort&quot;: &quot;-operation_time&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: null,
    &quot;data&quot;: {
        &quot;count&quot;: 1,
        &quot;info&quot;: [
            {
                &quot;audit_type&quot;: &quot;business_resource&quot;,
                &quot;bk_supplier_account&quot;: &quot;0&quot;,
                &quot;user&quot;: &quot;admin&quot;,
                &quot;resource_type&quot;: &quot;module&quot;,
                &quot;action&quot;: &quot;create&quot;,
                &quot;operate_from&quot;: &quot;user&quot;,
                &quot;operation_detail&quot;: {
                    &quot;bk_biz_id&quot;: 6,
                    &quot;bk_biz_name&quot;: &quot;test_biz&quot;,
                    &quot;resource_id&quot;: 120,
                    &quot;resource_name&quot;: &quot;test&quot;,
                    &quot;details&quot;: {
                        &quot;pre_data&quot;: null,
                        &quot;cur_data&quot;: {
                            &quot;bk_bak_operator&quot;: &quot;&quot;,
                            &quot;bk_biz_id&quot;: 6,
                            &quot;bk_childid&quot;: null,
                            &quot;bk_module_id&quot;: 120,
                            &quot;bk_module_name&quot;: &quot;test&quot;,
                            &quot;bk_module_type&quot;: &quot;1&quot;,
                            &quot;bk_parent_id&quot;: 51,
                            &quot;bk_set_id&quot;: 51,
                            &quot;bk_supplier_account&quot;: &quot;0&quot;,
                            &quot;create_time&quot;: &quot;2020-04-03T09:55:30.574+08:00&quot;,
                            &quot;default&quot;: 0,
                            &quot;last_time&quot;: &quot;2020-04-03T09:55:30.574+08:00&quot;,
                            &quot;operator&quot;: &quot;&quot;
                        },
                        &quot;properties&quot;: [
                            {
                                &quot;bk_property_id&quot;: &quot;bk_biz_id&quot;,
                                &quot;bk_property_name&quot;: &quot;业务ID&quot;
                            },
                            {
                                &quot;bk_property_id&quot;: &quot;bk_set_id&quot;,
                                &quot;bk_property_name&quot;: &quot;集群ID&quot;
                            },
                            {
                                &quot;bk_property_id&quot;: &quot;bk_module_name&quot;,
                                &quot;bk_property_name&quot;: &quot;模块名&quot;
                            },
                            {
                                &quot;bk_property_id&quot;: &quot;bk_childid&quot;,
                                &quot;bk_property_name&quot;: &quot;&quot;
                            },
                            {
                                &quot;bk_property_id&quot;: &quot;bk_module_type&quot;,
                                &quot;bk_property_name&quot;: &quot;模块类型&quot;
                            },
                            {
                                &quot;bk_property_id&quot;: &quot;operator&quot;,
                                &quot;bk_property_name&quot;: &quot;主要维护人&quot;
                            },
                            {
                                &quot;bk_property_id&quot;: &quot;bk_bak_operator&quot;,
                                &quot;bk_property_name&quot;: &quot;备份维护人&quot;
                            }
                        ]
                    },
                    &quot;bk_obj_id&quot;: &quot;module&quot;
                },
                &quot;operation_time&quot;: &quot;2020-04-03 09:55:30&quot;,
                &quot;label&quot;: {
                    &quot;biz_topology&quot;: &quot;&quot;
                }
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>请求记录条数</td>
</tr>
<tr>
<td>info</td>
<td>object array</td>
<td>请求记录数据</td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>audit_type</td>
<td>string</td>
<td>操作的资源类型大类</td>
</tr>
<tr>
<td>user</td>
<td>string</td>
<td>操作人</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商 ID</td>
</tr>
<tr>
<td>resource_type</td>
<td>string</td>
<td>操作的具体资源类型</td>
</tr>
<tr>
<td>action</td>
<td>string</td>
<td>操作类型</td>
</tr>
<tr>
<td>operate_from</td>
<td>string</td>
<td>操作的来源</td>
</tr>
<tr>
<td>operation_detail</td>
<td>object</td>
<td>实际操作内容</td>
</tr>
<tr>
<td>operation_time</td>
<td>string</td>
<td>操作时间</td>
</tr>
<tr>
<td>label</td>
<td>object</td>
<td>资源标签</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_proc_template/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>获取单个进程模板信息，url 参数中指定进程模板 ID</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>process_template_id</td>
<td>int</td>
<td>是</td>
<td>进程模板 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;process_template_id&quot;: 49,
  &quot;bk_supplier_account&quot;: &quot;0&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: {
    &quot;count&quot;: 1,
    &quot;info&quot;: [
      {
        &quot;bk_biz_id&quot;: 1,
        &quot;id&quot;: 49,
        &quot;name&quot;: &quot;10.27.0.9_p1_81&quot;,
        &quot;service_template_id&quot;: 50,
        &quot;bk_host_id&quot;: 11,
        &quot;bk_host_innerip&quot;: &quot;10.27.0.9&quot;,
        &quot;bk_module_id&quot;: 56,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2019-07-22T09:54:50.906+08:00&quot;,
        &quot;last_time&quot;: &quot;2019-07-22T09:54:50.906+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;,
        &quot;service_category_id&quot;: 22,
        &quot;process_instances&quot;: [
          {
            &quot;process&quot;: {
              &quot;bk_biz_id&quot;: 1,
              &quot;proc_num&quot;: 0,
              &quot;stop_cmd&quot;: &quot;&quot;,
              &quot;restart_cmd&quot;: &quot;&quot;,
              &quot;face_stop_cmd&quot;: &quot;&quot;,
              &quot;bk_process_id&quot;: 43,
              &quot;bk_func_name&quot;: &quot;p1&quot;,
              &quot;work_path&quot;: &quot;&quot;,
              &quot;bind_ip&quot;: &quot;0.0.0.0&quot;,
              &quot;priority&quot;: 0,
              &quot;reload_cmd&quot;: &quot;&quot;,
              &quot;bk_process_name&quot;: &quot;p1&quot;,
              &quot;port&quot;: &quot;81&quot;,
              &quot;pid_file&quot;: &quot;&quot;,
              &quot;auto_start&quot;: false,
              &quot;auto_time_gap&quot;: 0,
              &quot;last_time&quot;: &quot;2019-07-22T09:54:50.927+08:00&quot;,
              &quot;create_time&quot;: &quot;2019-07-22T09:54:50.927+08:00&quot;,
              &quot;bk_biz_id&quot;: 3,
              &quot;start_cmd&quot;: &quot;&quot;,
              &quot;bk_func_id&quot;: &quot;&quot;,
              &quot;user&quot;: &quot;&quot;,
              &quot;timeout&quot;: 0,
              &quot;protocol&quot;: &quot;1&quot;,
              &quot;description&quot;: &quot;&quot;,
              &quot;bk_supplier_account&quot;: &quot;0&quot;,
              &quot;bk_start_param_regex&quot;: &quot;&quot;
            },
            &quot;relation&quot;: {
              &quot;bk_biz_id&quot;: 1,
              &quot;bk_process_id&quot;: 43,
              &quot;service_instance_id&quot;: 49,
              &quot;process_template_id&quot;: 48,
              &quot;bk_host_id&quot;: 11,
              &quot;bk_supplier_account&quot;: &quot;0&quot;
            }
          }
        ]
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/get_service_template/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>根据服务模板 ID 获取服务模板</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service_template_id</td>
<td>int</td>
<td>是</td>
<td>服务模板 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;bk_supplier_account&quot;: &quot;0&quot;,
  &quot;service_template_id&quot;: 51
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: {
        &quot;bk_biz_id&quot;: 3,
        &quot;id&quot;: 51,
        &quot;name&quot;: &quot;mm2&quot;,
        &quot;service_category_id&quot;: 12,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2020-05-26T09:46:15.259Z&quot;,
        &quot;last_time&quot;: &quot;2020-05-26T09:46:15.259Z&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>服务模板 ID</td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>服务模板名称</td>
</tr>
<tr>
<td>service_category_id</td>
<td>integer</td>
<td>服务分类 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_biz_hosts/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 ID 查询业务下的主机，可附带其他的过滤信息，如集群 id,模块 id 等</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>bk_set_ids</td>
<td>array</td>
<td>否</td>
<td>集群 ID 列表，最多 200 条</td>
</tr>
<tr>
<td>set_cond</td>
<td>array</td>
<td>否</td>
<td>集群查询条件</td>
</tr>
<tr>
<td>bk_module_ids</td>
<td>array</td>
<td>否</td>
<td>模块 ID 列表，最多 500 条</td>
</tr>
<tr>
<td>host_property_filter</td>
<td>object</td>
<td>否</td>
<td>主机属性组合查询条件</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>主机属性列表，控制返回结果的主机里有哪些字段，能够加速接口请求和减少网络流量传输</td>
</tr>
</tbody>
</table>
<h4 id="host_property_filter">host_property_filter</h4>
<p>该参数为主机属性字段过滤规则的组合，用于根据主机属性字段搜索主机。组合支持 AND 和 OR 两种方式，可以嵌套，最多嵌套 2 层。
过滤规则为四元组 <code>field</code>, <code>operator</code>, <code>value</code></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>是</td>
<td>无</td>
<td>字段名</td>
<td></td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>是</td>
<td>无</td>
<td>操作符</td>
<td>可选值 equal,not_equal,in,not_in,less,less_or_equal,greater,greater_or_equal,between,not_between</td>
</tr>
<tr>
<td>value</td>
<td>-</td>
<td>否</td>
<td>无</td>
<td>操作数</td>
<td>不同的 operator 对应不同的 value 格式</td>
</tr>
</tbody>
</table>
<p>组装规则可参考: <a href="https://github.com/Tencent/bk-cmdb/blob/master/src/common/querybuilder/README.md">https://github.com/Tencent/bk-cmdb/blob/master/src/common/querybuilder/README.md</a></p>
<h4 id="set_cond">set_cond</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>是</td>
<td>取值为集群的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>是</td>
<td>取值为：$eq $ne</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>是</td>
<td>field 配置的集群字段所对应的值</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 500</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10,
        &quot;sort&quot;: &quot;bk_host_id&quot;
    },
    &quot;set_cond&quot;: [
        {
            &quot;field&quot;: &quot;bk_set_name&quot;,
            &quot;operator&quot;: &quot;$eq&quot;,
            &quot;value&quot;: &quot;set1&quot;
        }
    ],
    &quot;bk_biz_id&quot;: 3,
    &quot;bk_module_ids&quot;: [54,56],
    &quot;fields&quot;: [
        &quot;bk_host_id&quot;,
        &quot;bk_cloud_id&quot;,
        &quot;bk_host_innerip&quot;,
        &quot;bk_os_type&quot;,
        &quot;bk_mac&quot;
    ],
    &quot;host_property_filter&quot;: {
        &quot;condition&quot;: &quot;AND&quot;,
        &quot;rules&quot;: [
            {
                &quot;field&quot;: &quot;bk_host_innerip&quot;,
                &quot;operator&quot;: &quot;begins_with&quot;,
                &quot;value&quot;: &quot;192.168&quot;
            },
            {
                &quot;condition&quot;: &quot;OR&quot;,
                &quot;rules&quot;: [
                    {
                        &quot;field&quot;: &quot;bk_os_type&quot;,
                        &quot;operator&quot;: &quot;not_in&quot;,
                        &quot;value&quot;: [
                            &quot;3&quot;
                        ]
                    },
                    {
                        &quot;field&quot;: &quot;bk_cloud_id&quot;,
                        &quot;operator&quot;: &quot;equal&quot;,
                        &quot;value&quot;: 0
                    }
                ]
            }
        ]
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;count&quot;: 2,
    &quot;info&quot;: [
      {
        &quot;bk_cloud_id&quot;: 0,
        &quot;bk_host_id&quot;: 1,
        &quot;bk_host_innerip&quot;: &quot;192.168.15.18&quot;,
        &quot;bk_mac&quot;: &quot;&quot;,
        &quot;bk_os_type&quot;: null
      },
      {
        &quot;bk_cloud_id&quot;: 0,
        &quot;bk_host_id&quot;: 2,
        &quot;bk_host_innerip&quot;: &quot;192.168.15.4&quot;,
        &quot;bk_mac&quot;: &quot;&quot;,
        &quot;bk_os_type&quot;: null
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>主机实际数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_isp_name</td>
<td>string</td>
<td>所属运营商</td>
<td>0:其它；1:电信；2:联通；3:移动</td>
</tr>
<tr>
<td>bk_sn</td>
<td>string</td>
<td>设备 SN</td>
<td></td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>主要维护人</td>
<td></td>
</tr>
<tr>
<td>bk_outer_mac</td>
<td>string</td>
<td>外网 MAC</td>
<td></td>
</tr>
<tr>
<td>bk_state_name</td>
<td>string</td>
<td>所在国家</td>
<td>CN:中国，详细值，请参考 CMDB 页面</td>
</tr>
<tr>
<td>bk_province_name</td>
<td>string</td>
<td>所在省份</td>
<td></td>
</tr>
<tr>
<td>import_from</td>
<td>string</td>
<td>录入方式</td>
<td>1:excel;2:agent;3:api</td>
</tr>
<tr>
<td>bk_sla</td>
<td>string</td>
<td>SLA 级别</td>
<td>1:L1;2:L2;3:L3</td>
</tr>
<tr>
<td>bk_service_term</td>
<td>int</td>
<td>质保年限</td>
<td>1-10</td>
</tr>
<tr>
<td>bk_os_type</td>
<td>string</td>
<td>操作系统类型</td>
<td>1:Linux;2:Windows;3:AIX</td>
</tr>
<tr>
<td>bk_os_version</td>
<td>string</td>
<td>操作系统版本</td>
<td></td>
</tr>
<tr>
<td>bk_os_bit</td>
<td>int</td>
<td>操作系统位数</td>
<td></td>
</tr>
<tr>
<td>bk_mem</td>
<td>string</td>
<td>内存容量</td>
<td></td>
</tr>
<tr>
<td>bk_mac</td>
<td>string</td>
<td>内网 MAC 地址</td>
<td></td>
</tr>
<tr>
<td>bk_host_outerip</td>
<td>string</td>
<td>外网 IP</td>
<td></td>
</tr>
<tr>
<td>bk_host_name</td>
<td>string</td>
<td>主机名称</td>
<td></td>
</tr>
<tr>
<td>bk_host_innerip</td>
<td>string</td>
<td>内网 IP</td>
<td></td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>主机 ID</td>
<td></td>
</tr>
<tr>
<td>bk_disk</td>
<td>int</td>
<td>磁盘容量</td>
<td></td>
</tr>
<tr>
<td>bk_cpu_module</td>
<td>string</td>
<td>CPU 型号</td>
<td></td>
</tr>
<tr>
<td>bk_cpu_mhz</td>
<td>int</td>
<td>CPU 频率</td>
<td></td>
</tr>
<tr>
<td>bk_cpu</td>
<td>int</td>
<td>CPU 逻辑核心数</td>
<td>1-1000000</td>
</tr>
<tr>
<td>bk_comment</td>
<td>string</td>
<td>备注</td>
<td></td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>云区域</td>
<td></td>
</tr>
<tr>
<td>bk_bak_operator</td>
<td>string</td>
<td>备份维护人</td>
<td></td>
</tr>
<tr>
<td>bk_asset_id</td>
<td>string</td>
<td>固资编号</td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_biz_hosts_topo/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询业务 id 业务下的主机和拓扑信息,可附带一些查询条件</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>host_property_filter</td>
<td>object</td>
<td>否</td>
<td>主机属性组合查询条件</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>主机属性列表，控制返回结果的主机里有哪些字段，能够加速接口请求和减少网络流量传输</td>
</tr>
</tbody>
</table>
<h4 id="host_property_filter">host_property_filter</h4>
<p>该参数为主机属性字段过滤规则的组合，用于根据主机属性字段搜索主机。组合支持 AND 和 OR 两种方式，可以嵌套，最多嵌套 2 层。
过滤规则为四元组 <code>field</code>, <code>operator</code>, <code>value</code></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>是</td>
<td>无</td>
<td>字段名</td>
<td></td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>是</td>
<td>无</td>
<td>操作符</td>
<td>可选值 equal,not_equal,in,not_in,less,less_or_equal,greater,greater_or_equal,between,not_between</td>
</tr>
<tr>
<td>value</td>
<td>-</td>
<td>否</td>
<td>无</td>
<td>操作数</td>
<td>不同的 operator 对应不同的 value 格式</td>
</tr>
</tbody>
</table>
<p>组装规则可参考: <a href="https://github.com/Tencent/bk-cmdb/blob/master/src/common/querybuilder/README.md">https://github.com/Tencent/bk-cmdb/blob/master/src/common/querybuilder/README.md</a></p>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大值为 500</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10,
        &quot;sort&quot;: &quot;bk_host_id&quot;
    },
    &quot;fields&quot;: [
        &quot;bk_host_id&quot;,
        &quot;bk_cloud_id&quot;,
        &quot;bk_host_innerip&quot;,
        &quot;bk_os_type&quot;,
        &quot;bk_mac&quot;
    ],
    &quot;host_property_filter&quot;: {
        &quot;condition&quot;: &quot;AND&quot;,
        &quot;rules&quot;: [
            {
                &quot;field&quot;: &quot;bk_host_innerip&quot;,
                &quot;operator&quot;: &quot;begins_with&quot;,
                &quot;value&quot;: &quot;192.168&quot;
            },
            {
                &quot;condition&quot;: &quot;OR&quot;,
                &quot;rules&quot;: [
                    {
                        &quot;field&quot;: &quot;bk_os_type&quot;,
                        &quot;operator&quot;: &quot;not_in&quot;,
                        &quot;value&quot;: [
                            &quot;3&quot;
                        ]
                    },
                    {
                        &quot;field&quot;: &quot;bk_cloud_id&quot;,
                        &quot;operator&quot;: &quot;equal&quot;,
                        &quot;value&quot;: 0
                    }
                ]
            }
        ]
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;count&quot;: 3,
    &quot;info&quot;: [
      {
        &quot;host&quot;: {
          &quot;bk_cloud_id&quot;: 0,
          &quot;bk_host_id&quot;: 1,
          &quot;bk_host_innerip&quot;: &quot;192.168.15.18&quot;,
          &quot;bk_mac&quot;: &quot;&quot;,
          &quot;bk_os_type&quot;: null
        },
        &quot;topo&quot;: [
          {
            &quot;bk_set_id&quot;: 11,
            &quot;bk_set_name&quot;: &quot;set1&quot;,
            &quot;module&quot;: [
              {
                &quot;bk_module_id&quot;: 56,
                &quot;bk_module_name&quot;: &quot;m1&quot;
              }
            ]
          }
        ]
      },
      {
        &quot;host&quot;: {
          &quot;bk_cloud_id&quot;: 0,
          &quot;bk_host_id&quot;: 2,
          &quot;bk_host_innerip&quot;: &quot;192.168.15.4&quot;,
          &quot;bk_mac&quot;: &quot;&quot;,
          &quot;bk_os_type&quot;: null
        },
        &quot;topo&quot;: [
          {
            &quot;bk_set_id&quot;: 11,
            &quot;bk_set_name&quot;: &quot;set1&quot;,
            &quot;module&quot;: [
              {
                &quot;bk_module_id&quot;: 56,
                &quot;bk_module_name&quot;: &quot;m1&quot;
              }
            ]
          }
        ]
      },
      {
        &quot;host&quot;: {
          &quot;bk_cloud_id&quot;: 0,
          &quot;bk_host_id&quot;: 3,
          &quot;bk_host_innerip&quot;: &quot;192.168.15.12&quot;,
          &quot;bk_mac&quot;: &quot;&quot;,
          &quot;bk_os_type&quot;: null
        },
        &quot;topo&quot;: [
          {
            &quot;bk_set_id&quot;: 10,
            &quot;bk_set_name&quot;: &quot;空闲机池&quot;,
            &quot;module&quot;: [
              {
                &quot;bk_module_id&quot;: 54,
                &quot;bk_module_name&quot;: &quot;空闲机&quot;
              }
            ]
          }
        ]
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>主机数据和拓扑信息</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>host</td>
<td>dict</td>
<td>主机实际数据</td>
</tr>
<tr>
<td>topo</td>
<td>array</td>
<td>主机拓扑信息</td>
</tr>
</tbody>
</table>
<h4 id="datainfohost">data.info.host</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_isp_name</td>
<td>string</td>
<td>所属运营商</td>
<td>0:其它；1:电信；2:联通；3:移动</td>
</tr>
<tr>
<td>bk_sn</td>
<td>string</td>
<td>设备 SN</td>
<td></td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>主要维护人</td>
<td></td>
</tr>
<tr>
<td>bk_outer_mac</td>
<td>string</td>
<td>外网 MAC</td>
<td></td>
</tr>
<tr>
<td>bk_state_name</td>
<td>string</td>
<td>所在国家</td>
<td>CN:中国，详细值，请参考 CMDB 页面</td>
</tr>
<tr>
<td>bk_province_name</td>
<td>string</td>
<td>所在省份</td>
<td></td>
</tr>
<tr>
<td>import_from</td>
<td>string</td>
<td>录入方式</td>
<td>1:excel;2:agent;3:api</td>
</tr>
<tr>
<td>bk_sla</td>
<td>string</td>
<td>SLA 级别</td>
<td>1:L1;2:L2;3:L3</td>
</tr>
<tr>
<td>bk_service_term</td>
<td>int</td>
<td>质保年限</td>
<td>1-10</td>
</tr>
<tr>
<td>bk_os_type</td>
<td>string</td>
<td>操作系统类型</td>
<td>1:Linux;2:Windows;3:AIX</td>
</tr>
<tr>
<td>bk_os_version</td>
<td>string</td>
<td>操作系统版本</td>
<td></td>
</tr>
<tr>
<td>bk_os_bit</td>
<td>int</td>
<td>操作系统位数</td>
<td></td>
</tr>
<tr>
<td>bk_mem</td>
<td>string</td>
<td>内存容量</td>
<td></td>
</tr>
<tr>
<td>bk_mac</td>
<td>string</td>
<td>内网 MAC 地址</td>
<td></td>
</tr>
<tr>
<td>bk_host_outerip</td>
<td>string</td>
<td>外网 IP</td>
<td></td>
</tr>
<tr>
<td>bk_host_name</td>
<td>string</td>
<td>主机名称</td>
<td></td>
</tr>
<tr>
<td>bk_host_innerip</td>
<td>string</td>
<td>内网 IP</td>
<td></td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>主机 ID</td>
<td></td>
</tr>
<tr>
<td>bk_disk</td>
<td>int</td>
<td>磁盘容量</td>
<td></td>
</tr>
<tr>
<td>bk_cpu_module</td>
<td>string</td>
<td>CPU 型号</td>
<td></td>
</tr>
<tr>
<td>bk_cpu_mhz</td>
<td>int</td>
<td>CPU 频率</td>
<td></td>
</tr>
<tr>
<td>bk_cpu</td>
<td>int</td>
<td>CPU 逻辑核心数</td>
<td>1-1000000</td>
</tr>
<tr>
<td>bk_comment</td>
<td>string</td>
<td>备注</td>
<td></td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>云区域</td>
<td></td>
</tr>
<tr>
<td>bk_bak_operator</td>
<td>string</td>
<td>备份维护人</td>
<td></td>
</tr>
<tr>
<td>bk_asset_id</td>
<td>string</td>
<td>固资编号</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="datainfotopo">data.info.topo</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>主机所属的集群 ID</td>
</tr>
<tr>
<td>bk_set_name</td>
<td>string</td>
<td>主机所属的集群名字</td>
</tr>
<tr>
<td>module</td>
<td>array</td>
<td>主机所属的集群下模块信息</td>
</tr>
</tbody>
</table>
<h4 id="datainfotopomodule">data.info.topo.module</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>模块 ID</td>
</tr>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>模块名字</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_hosts_without_biz/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>没有业务信息的主机查询</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务 id</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>是</td>
<td>查询条件</td>
</tr>
<tr>
<td>host_property_filter</td>
<td>object</td>
<td>否</td>
<td>主机属性组合查询条件</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>主机属性列表，控制返回结果的主机里有哪些字段，能够加速接口请求和减少网络流量传输</td>
</tr>
</tbody>
</table>
<h4 id="host_property_filter">host_property_filter</h4>
<p>该参数为主机属性字段过滤规则的组合，用于根据主机属性字段搜索主机。组合支持 AND 和 OR 两种方式，可以嵌套，最多嵌套 2 层。
过滤规则为四元组 <code>field</code>, <code>operator</code>, <code>value</code></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>是</td>
<td>无</td>
<td>字段名</td>
<td></td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>是</td>
<td>无</td>
<td>操作符</td>
<td>可选值 equal,not_equal,in,not_in,less,less_or_equal,greater,greater_or_equal,between,not_between</td>
</tr>
<tr>
<td>value</td>
<td>-</td>
<td>否</td>
<td>无</td>
<td>操作数</td>
<td>不同的 operator 对应不同的 value 格式</td>
</tr>
</tbody>
</table>
<p>组装规则可参考: <a href="https://github.com/Tencent/bk-cmdb/blob/master/src/common/querybuilder/README.md">https://github.com/Tencent/bk-cmdb/blob/master/src/common/querybuilder/README.md</a></p>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 500</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 3
    },
    &quot;fields&quot;: [
        &quot;bk_host_id&quot;,
        &quot;bk_cloud_id&quot;,
        &quot;bk_host_innerip&quot;,
        &quot;bk_os_type&quot;,
        &quot;bk_mac&quot;
    ],
    &quot;host_property_filter&quot;: {
        &quot;condition&quot;: &quot;AND&quot;,
        &quot;rules&quot;: [
            {
                &quot;field&quot;: &quot;bk_host_innerip&quot;,
                &quot;operator&quot;: &quot;begins_with&quot;,
                &quot;value&quot;: &quot;192.168&quot;
            },
            {
                &quot;condition&quot;: &quot;OR&quot;,
                &quot;rules&quot;: [
                    {
                        &quot;field&quot;: &quot;bk_os_type&quot;,
                        &quot;operator&quot;: &quot;not_in&quot;,
                        &quot;value&quot;: [
                            &quot;3&quot;
                        ]
                    },
                    {
                        &quot;field&quot;: &quot;bk_cloud_id&quot;,
                        &quot;operator&quot;: &quot;equal&quot;,
                        &quot;value&quot;: 0
                    }
                ]
            }
        ]
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;count&quot;: 30,
    &quot;info&quot;: [
      {
        &quot;bk_cloud_id&quot;: 0,
        &quot;bk_host_id&quot;: 1,
        &quot;bk_host_innerip&quot;: &quot;192.168.15.18&quot;,
        &quot;bk_mac&quot;: &quot;&quot;,
        &quot;bk_os_type&quot;: null
      },
      {
        &quot;bk_cloud_id&quot;: 0,
        &quot;bk_host_id&quot;: 2,
        &quot;bk_host_innerip&quot;: &quot;192.168.15.4&quot;,
        &quot;bk_mac&quot;: &quot;&quot;,
        &quot;bk_os_type&quot;: null
      },
      {
        &quot;bk_cloud_id&quot;: 0,
        &quot;bk_host_id&quot;: 3,
        &quot;bk_host_innerip&quot;: &quot;192.168.15.12&quot;,
        &quot;bk_mac&quot;: &quot;&quot;,
        &quot;bk_os_type&quot;: null
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>主机实际数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_isp_name</td>
<td>string</td>
<td>所属运营商</td>
<td>0:其它；1:电信；2:联通；3:移动</td>
</tr>
<tr>
<td>bk_sn</td>
<td>string</td>
<td>设备 SN</td>
<td></td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>主要维护人</td>
<td></td>
</tr>
<tr>
<td>bk_outer_mac</td>
<td>string</td>
<td>外网 MAC</td>
<td></td>
</tr>
<tr>
<td>bk_state_name</td>
<td>string</td>
<td>所在国家</td>
<td>CN:中国，详细值，请参考 CMDB 页面</td>
</tr>
<tr>
<td>bk_province_name</td>
<td>string</td>
<td>所在省份</td>
<td></td>
</tr>
<tr>
<td>import_from</td>
<td>string</td>
<td>录入方式</td>
<td>1:excel;2:agent;3:api</td>
</tr>
<tr>
<td>bk_sla</td>
<td>string</td>
<td>SLA 级别</td>
<td>1:L1;2:L2;3:L3</td>
</tr>
<tr>
<td>bk_service_term</td>
<td>int</td>
<td>质保年限</td>
<td>1-10</td>
</tr>
<tr>
<td>bk_os_type</td>
<td>string</td>
<td>操作系统类型</td>
<td>1:Linux;2:Windows;3:AIX</td>
</tr>
<tr>
<td>bk_os_version</td>
<td>string</td>
<td>操作系统版本</td>
<td></td>
</tr>
<tr>
<td>bk_os_bit</td>
<td>int</td>
<td>操作系统位数</td>
<td></td>
</tr>
<tr>
<td>bk_mem</td>
<td>string</td>
<td>内存容量</td>
<td></td>
</tr>
<tr>
<td>bk_mac</td>
<td>string</td>
<td>内网 MAC 地址</td>
<td></td>
</tr>
<tr>
<td>bk_host_outerip</td>
<td>string</td>
<td>外网 IP</td>
<td></td>
</tr>
<tr>
<td>bk_host_name</td>
<td>string</td>
<td>主机名称</td>
<td></td>
</tr>
<tr>
<td>bk_host_innerip</td>
<td>string</td>
<td>内网 IP</td>
<td></td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>主机 ID</td>
<td></td>
</tr>
<tr>
<td>bk_disk</td>
<td>int</td>
<td>磁盘容量</td>
<td></td>
</tr>
<tr>
<td>bk_cpu_module</td>
<td>string</td>
<td>CPU 型号</td>
<td></td>
</tr>
<tr>
<td>bk_cpu_mhz</td>
<td>int</td>
<td>CPU 频率</td>
<td></td>
</tr>
<tr>
<td>bk_cpu</td>
<td>int</td>
<td>CPU 逻辑核心数</td>
<td>1-1000000</td>
</tr>
<tr>
<td>bk_comment</td>
<td>string</td>
<td>备注</td>
<td></td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>云区域</td>
<td></td>
</tr>
<tr>
<td>bk_bak_operator</td>
<td>string</td>
<td>备份维护人</td>
<td></td>
</tr>
<tr>
<td>bk_asset_id</td>
<td>string</td>
<td>固资编号</td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_process_detail_by_ids/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询某业务下进程 ID 对应的进程详情 (v3.9.8)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int64</td>
<td>Yes</td>
<td>进程所在的业务 ID</td>
</tr>
<tr>
<td>bk_process_ids</td>
<td>int64 array</td>
<td>Yes</td>
<td>进程 ID 列表，最多传 500 个</td>
</tr>
<tr>
<td>fields</td>
<td>string array</td>
<td>No</td>
<td>进程属性列表，控制返回结果的进程实例信息里有哪些字段，能够加速接口请求和减少网络流量传输<br>为空时返回进程所有字段,bk_process_id 为必返回字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_process_ids&quot;: [
        43,
        44
    ],
    &quot;fields&quot;: [
        &quot;bk_process_id&quot;,
        &quot;bk_process_name&quot;,
        &quot;bk_func_id&quot;,
        &quot;bk_func_name&quot;
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: [
        {
            &quot;bk_func_id&quot;: &quot;&quot;,
            &quot;bk_func_name&quot;: &quot;pr1&quot;,
            &quot;bk_process_id&quot;: 43,
            &quot;bk_process_name&quot;: &quot;pr1&quot;
        },
        {
            &quot;bk_func_id&quot;: &quot;&quot;,
            &quot;bk_func_name&quot;: &quot;pr2&quot;,
            &quot;bk_process_id&quot;: 44,
            &quot;bk_process_name&quot;: &quot;pr2&quot;
        }
    ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_process_instance/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据服务实例 ID 查询进程实例列表</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service_instance_id</td>
<td>int</td>
<td>是</td>
<td>服务实例 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;service_instance_id&quot;: 54
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: [
    {
      &quot;property&quot;: {
        &quot;auto_start&quot;: false,
        &quot;auto_time_gap&quot;: 60,
        &quot;bk_biz_id&quot;: 2,
        &quot;bk_func_id&quot;: &quot;&quot;,
        &quot;bk_func_name&quot;: &quot;java&quot;,
        &quot;bk_process_id&quot;: 46,
        &quot;bk_process_name&quot;: &quot;job_java&quot;,
        &quot;bk_start_param_regex&quot;: &quot;&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;,
        &quot;create_time&quot;: &quot;2019-06-05T14:59:12.065+08:00&quot;,
        &quot;description&quot;: &quot;&quot;,
        &quot;face_stop_cmd&quot;: &quot;&quot;,
        &quot;last_time&quot;: &quot;2019-06-05T14:59:12.065+08:00&quot;,
          &quot;bk_biz_id&quot;: 1,
        &quot;pid_file&quot;: &quot;&quot;,
        &quot;priority&quot;: 1,
        &quot;proc_num&quot;: 1,
        &quot;reload_cmd&quot;: &quot;&quot;,
        &quot;restart_cmd&quot;: &quot;&quot;,
        &quot;start_cmd&quot;: &quot;&quot;,
        &quot;stop_cmd&quot;: &quot;&quot;,
        &quot;timeout&quot;: 30,
        &quot;user&quot;: &quot;&quot;,
        &quot;work_path&quot;: &quot;/data/bkce&quot;,
        &quot;bind_info&quot;: [
            {
                &quot;enable&quot;: false,  
                &quot;ip&quot;: &quot;127.0.0.1&quot;,  
                &quot;port&quot;: &quot;100&quot;,  
                &quot;protocol&quot;: &quot;1&quot;, 
                &quot;template_row_id&quot;: 1  
            }
        ]
      },
      &quot;relation&quot;: {
          &quot;bk_biz_id&quot;: 1,
        &quot;bk_process_id&quot;: 46,
        &quot;service_instance_id&quot;: 54,
        &quot;process_template_id&quot;: 1,
        &quot;bk_host_id&quot;: 1,
        &quot;bk_supplier_account&quot;: &quot;&quot;
      }
    }
  ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>array</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>property</td>
<td>object</td>
<td>进程属性信息</td>
<td></td>
</tr>
<tr>
<td>relation</td>
<td>object</td>
<td>进程与服务实例的关联信息</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="datainfoxpropertybind_infon">data.info[x].property.bind_info[n] 字段说明</h4>
<p>| 字段|类型|说明|
|---|---|---|---|
|enable|bool|端口是否启用||
|ip|string|绑定的 ip||
|port|string|绑定的端口||
|protocol|string|使用的协议||
|row_id|int|实例化使用的模板行索引，进程内唯一|</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_proc_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据服务模板 ID 查询进程模板信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>service_template_id</td>
<td>int</td>
<td>否</td>
<td>服务模板 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;limit&quot;: {
    &quot;start&quot;: 0,
    &quot;limit&quot;: 1
  },
  &quot;with_name&quot;: true,
  &quot;bk_set_id&quot;: 15,
  &quot;bk_module_id&quot;: 8,
  &quot;bk_host_id&quot;: 11,
  &quot;service_instance_ids&quot;: [49],
  &quot;selectors&quot;: [{
    &quot;key&quot;: &quot;key1&quot;,
    &quot;operator&quot;: &quot;notin&quot;,
    &quot;values&quot;: [&quot;value1&quot;]
  }]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 1,
        &quot;info&quot;: [
            {
                &quot;id&quot;: 50,
                &quot;bk_process_name&quot;: &quot;p1&quot;,
                &quot;bk_biz_id&quot;: 1,
                &quot;service_template_id&quot;: 51,
                &quot;property&quot;: {
                    &quot;proc_num&quot;: {
                        &quot;value&quot;: null,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;stop_cmd&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;restart_cmd&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;face_stop_cmd&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;bk_func_name&quot;: {
                        &quot;value&quot;: &quot;p1&quot;,
                        &quot;as_default_value&quot;: true
                    },
                    &quot;work_path&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;priority&quot;: {
                        &quot;value&quot;: null,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;reload_cmd&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;bk_process_name&quot;: {
                        &quot;value&quot;: &quot;p1&quot;,
                        &quot;as_default_value&quot;: true
                    },
                    &quot;pid_file&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;auto_start&quot;: {
                        &quot;value&quot;: false,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;auto_time_gap&quot;: {
                        &quot;value&quot;: null,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;start_cmd&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;bk_func_id&quot;: {
                        &quot;value&quot;: null,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;user&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;timeout&quot;: {
                        &quot;value&quot;: null,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;description&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;bk_start_param_regex&quot;: {
                        &quot;value&quot;: &quot;&quot;,
                        &quot;as_default_value&quot;: false
                    },
                    &quot;bind_info&quot;: {
                        &quot;value&quot;: [
                            {
                                &quot;enable&quot;: {
                                    &quot;value&quot;: false,
                                    &quot;as_default_value&quot;: true
                                },
                                &quot;ip&quot;: {
                                    &quot;value&quot;: &quot;1&quot;,
                                    &quot;as_default_value&quot;: true
                                },
                                &quot;port&quot;: {
                                    &quot;value&quot;: &quot;100&quot;,
                                    &quot;as_default_value&quot;: true
                                },
                                &quot;protocol&quot;: {
                                    &quot;value&quot;: &quot;1&quot;,
                                    &quot;as_default_value&quot;: true
                                },
                                &quot;row_id&quot;: 1
                            }
                        ],
                        &quot;as_default_value&quot;: true
                    }
                },
                &quot;creator&quot;: &quot;admin&quot;,
                &quot;modifier&quot;: &quot;admin&quot;,
                &quot;create_time&quot;: &quot;2019-06-19T15:24:04.763+08:00&quot;,
                &quot;last_time&quot;: &quot;2019-06-19T15:24:04.763+08:00&quot;,
                &quot;bk_supplier_account&quot;: &quot;0&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>integer</td>
<td>总数</td>
<td></td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>返回结果</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>进程模板 ID</td>
<td></td>
</tr>
<tr>
<td>bk_process_name</td>
<td>string</td>
<td>进程模板名称</td>
<td></td>
</tr>
<tr>
<td>property</td>
<td>object</td>
<td>进程模板属性</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="datainfoxpropertybind_infovaluen">data.info[x].property.bind_info.value[n] 字段说明</h4>
<p>| 字段|类型|说明|
|---|---|---|---|
|enable|object|端口是否启用||
|ip|object|绑定的 ip||
|port|object|绑定的端口||
|protocol|object|使用的协议||
|row_id|int|模板行索引，进程内唯一|</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_resource_pool_hosts/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询资源池中的主机</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>host_property_filter</td>
<td>object</td>
<td>否</td>
<td>主机属性组合查询条件</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>主机属性列表，控制返回结果的主机里有哪些字段，能够加速接口请求和减少网络流量传输</td>
</tr>
</tbody>
</table>
<h4 id="host_property_filter">host_property_filter</h4>
<p>该参数为主机属性字段过滤规则的组合，用于根据主机属性字段搜索主机。组合支持 AND 和 OR 两种方式，可以嵌套，最多嵌套 2 层。
过滤规则为四元组 <code>field</code>, <code>operator</code>, <code>value</code></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>是</td>
<td>无</td>
<td>字段名</td>
<td></td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>是</td>
<td>无</td>
<td>操作符</td>
<td>可选值 equal,not_equal,in,not_in,less,less_or_equal,greater,greater_or_equal,between,not_between</td>
</tr>
<tr>
<td>value</td>
<td>-</td>
<td>否</td>
<td>无</td>
<td>操作数</td>
<td>不同的 operator 对应不同的 value 格式</td>
</tr>
</tbody>
</table>
<p>组装规则可参考: <a href="https://github.com/Tencent/bk-cmdb/blob/master/src/common/querybuilder/README.md">https://github.com/Tencent/bk-cmdb/blob/master/src/common/querybuilder/README.md</a></p>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 500</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10,
        &quot;sort&quot;: &quot;bk_host_id&quot;
    },
    &quot;fields&quot;: [
        &quot;bk_host_id&quot;,
        &quot;bk_cloud_id&quot;,
        &quot;bk_host_innerip&quot;,
        &quot;bk_os_type&quot;,
        &quot;bk_mac&quot;
    ],
    &quot;host_property_filter&quot;: {
        &quot;condition&quot;: &quot;AND&quot;,
        &quot;rules&quot;: [
        {
            &quot;field&quot;: &quot;bk_host_outerip&quot;,
            &quot;operator&quot;: &quot;begins_with&quot;,
            &quot;value&quot;: &quot;127.0&quot;
        }, {
            &quot;condition&quot;: &quot;OR&quot;,
            &quot;rules&quot;: [{
                &quot;field&quot;: &quot;bk_os_type&quot;,
                &quot;operator&quot;: &quot;not_in&quot;,
                &quot;value&quot;: [&quot;3&quot;]
            }, {
                &quot;field&quot;: &quot;bk_sla&quot;,
                &quot;operator&quot;: &quot;equal&quot;,
                &quot;value&quot;: &quot;1&quot;
            }]
        }]
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;count&quot;: 1,
    &quot;info&quot;: [
      {
        &quot;bk_cloud_id&quot;: &quot;0&quot;,
        &quot;bk_host_id&quot;: 17,
        &quot;bk_host_innerip&quot;: &quot;192.168.1.1&quot;,
        &quot;bk_mac&quot;: &quot;&quot;,
        &quot;bk_os_type&quot;: &quot;1&quot;
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>主机实际数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_isp_name</td>
<td>string</td>
<td>所属运营商</td>
<td>0:其它；1:电信；2:联通；3:移动</td>
</tr>
<tr>
<td>bk_sn</td>
<td>string</td>
<td>设备 SN</td>
<td></td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>主要维护人</td>
<td></td>
</tr>
<tr>
<td>bk_outer_mac</td>
<td>string</td>
<td>外网 MAC</td>
<td></td>
</tr>
<tr>
<td>bk_state_name</td>
<td>string</td>
<td>所在国家</td>
<td>CN:中国，详细值，请参考 CMDB 页面</td>
</tr>
<tr>
<td>bk_province_name</td>
<td>string</td>
<td>所在省份</td>
<td></td>
</tr>
<tr>
<td>import_from</td>
<td>string</td>
<td>录入方式</td>
<td>1:excel;2:agent;3:api</td>
</tr>
<tr>
<td>bk_sla</td>
<td>string</td>
<td>SLA 级别</td>
<td>1:L1;2:L2;3:L3</td>
</tr>
<tr>
<td>bk_service_term</td>
<td>int</td>
<td>质保年限</td>
<td>1-10</td>
</tr>
<tr>
<td>bk_os_type</td>
<td>string</td>
<td>操作系统类型</td>
<td>1:Linux;2:Windows;3:AIX</td>
</tr>
<tr>
<td>bk_os_version</td>
<td>string</td>
<td>操作系统版本</td>
<td></td>
</tr>
<tr>
<td>bk_os_bit</td>
<td>int</td>
<td>操作系统位数</td>
<td></td>
</tr>
<tr>
<td>bk_mem</td>
<td>string</td>
<td>内存容量</td>
<td></td>
</tr>
<tr>
<td>bk_mac</td>
<td>string</td>
<td>内网 MAC 地址</td>
<td></td>
</tr>
<tr>
<td>bk_host_outerip</td>
<td>string</td>
<td>外网 IP</td>
<td></td>
</tr>
<tr>
<td>bk_host_name</td>
<td>string</td>
<td>主机名称</td>
<td></td>
</tr>
<tr>
<td>bk_host_innerip</td>
<td>string</td>
<td>内网 IP</td>
<td></td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>主机 ID</td>
<td></td>
</tr>
<tr>
<td>bk_disk</td>
<td>int</td>
<td>磁盘容量</td>
<td></td>
</tr>
<tr>
<td>bk_cpu_module</td>
<td>string</td>
<td>CPU 型号</td>
<td></td>
</tr>
<tr>
<td>bk_cpu_mhz</td>
<td>int</td>
<td>CPU 频率</td>
<td></td>
</tr>
<tr>
<td>bk_cpu</td>
<td>int</td>
<td>CPU 逻辑核心数</td>
<td>1-1000000</td>
</tr>
<tr>
<td>bk_comment</td>
<td>string</td>
<td>备注</td>
<td></td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>云区域</td>
<td></td>
</tr>
<tr>
<td>bk_bak_operator</td>
<td>string</td>
<td>备份维护人</td>
<td></td>
</tr>
<tr>
<td>bk_asset_id</td>
<td>string</td>
<td>固资编号</td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_service_category/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询服务分类列表，根据业务 ID 查询，共用服务分类也会返回</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: {
    &quot;count&quot;: 20,
    &quot;info&quot;: [
      {
    &quot;bk_biz_id&quot;: 0,
        &quot;id&quot;: 16,
        &quot;name&quot;: &quot;Apache&quot;,
        &quot;bk_root_id&quot;: 14,
        &quot;bk_parent_id&quot;: 14,
        &quot;bk_supplier_account&quot;: &quot;0&quot;,
        &quot;is_built_in&quot;: true
      },
      {
    &quot;bk_biz_id&quot;: 0,
        &quot;id&quot;: 19,
        &quot;name&quot;: &quot;Ceph&quot;,
        &quot;bk_root_id&quot;: 18,
        &quot;bk_parent_id&quot;: 18,
        &quot;bk_supplier_account&quot;: &quot;0&quot;,
        &quot;is_built_in&quot;: true
      },
      {
    &quot;bk_biz_id&quot;: 1,
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;Default&quot;,
        &quot;bk_root_id&quot;: 1,
        &quot;bk_supplier_account&quot;: &quot;0&quot;,
        &quot;is_built_in&quot;: true
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>integer</td>
<td>总数</td>
<td></td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>返回结果</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>服务分类 ID</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>服务分类名称</td>
<td></td>
</tr>
<tr>
<td>bk_root_id</td>
<td>integer</td>
<td>根服务分类 ID</td>
<td></td>
</tr>
<tr>
<td>bk_parent_id</td>
<td>integer</td>
<td>父服务分类 ID</td>
<td></td>
</tr>
<tr>
<td>is_built_in</td>
<td>bool</td>
<td>是否内置</td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_service_instance/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id 查询服务实例列表,也可以加上模块 id 等信息查询</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>否</td>
<td>模块 ID</td>
</tr>
<tr>
<td>selectors</td>
<td>int</td>
<td>否</td>
<td>label 过滤功能，operator 可选值: <code>=</code>,<code>!=</code>,<code>exists</code>,<code>!</code>,<code>in</code>,<code>notin</code></td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>No</td>
<td>分页参数</td>
</tr>
<tr>
<td>search_key</td>
<td>string</td>
<td>No</td>
<td>名字过滤参数</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;page&quot;: {
    &quot;start&quot;: 0,
    &quot;limit&quot;: 1
  },
  &quot;bk_module_id&quot;: 56,
  &quot;search_key&quot;: &quot;&quot;,
  &quot;selectors&quot;: [{
    &quot;key&quot;: &quot;key1&quot;,
    &quot;operator&quot;: &quot;notin&quot;,
    &quot;values&quot;: [&quot;value1&quot;]
  },{
    &quot;key&quot;: &quot;key1&quot;,
    &quot;operator&quot;: &quot;in&quot;,
    &quot;values&quot;: [&quot;value1&quot;, &quot;value2&quot;]
  }]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;count&quot;: 1,
    &quot;info&quot;: [
      {
        &quot;bk_biz_id&quot;: 1,
        &quot;id&quot;: 72,
        &quot;name&quot;: &quot;t1&quot;,
        &quot;bk_host_id&quot;: 26,
        &quot;bk_module_id&quot;: 62,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2019-06-20T22:46:00.69+08:00&quot;,
        &quot;last_time&quot;: &quot;2019-06-20T22:46:00.69+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>integer</td>
<td>总数</td>
<td></td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>返回结果</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>服务实例 ID</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>服务实例名称</td>
<td></td>
</tr>
<tr>
<td>service_template_id</td>
<td>integer</td>
<td>服务模板 ID</td>
<td></td>
</tr>
<tr>
<td>bk_module_id</td>
<td>integer</td>
<td>模块 ID</td>
<td></td>
</tr>
<tr>
<td>bk_host_id</td>
<td>integer</td>
<td>主机 ID</td>
<td></td>
</tr>
<tr>
<td>bk_host_innerip</td>
<td>string</td>
<td>内网 IP</td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_service_instance_by_host/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据主机 id 获取绑定到主机上的服务实例列表</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>否</td>
<td>主机 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;page&quot;: {
    &quot;start&quot;: 0,
    &quot;limit&quot;: 1
  },
  &quot;bk_host_id&quot;: 26
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;count&quot;: 1,
    &quot;info&quot;: [
      {
        &quot;bk_biz_id&quot;: 1,
        &quot;id&quot;: 72,
        &quot;name&quot;: &quot;t1&quot;,
        &quot;bk_host_id&quot;: 26,
        &quot;bk_module_id&quot;: 62,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2019-06-20T22:46:00.69+08:00&quot;,
        &quot;last_time&quot;: &quot;2019-06-20T22:46:00.69+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>integer</td>
<td>总数</td>
<td></td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>返回结果</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>服务实例 ID</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>服务实例名称</td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_service_instance_detail/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id 查询服务实例列表(带进程信息)，可再附加上模块 id 等查询条件</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>否</td>
<td>模块 ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>否</td>
<td>主机 ID</td>
</tr>
<tr>
<td>service_instance_ids</td>
<td>int</td>
<td>否</td>
<td>服务实例 ID 列表</td>
</tr>
<tr>
<td>selectors</td>
<td>int</td>
<td>否</td>
<td>label 过滤功能，operator 可选值: <code>=</code>,<code>!=</code>,<code>exists</code>,<code>!</code>,<code>in</code>,<code>notin</code></td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页参数</td>
</tr>
</tbody>
</table>
<h4 id="page">page 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 1000</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;page&quot;: {
    &quot;start&quot;: 0,
    &quot;limit&quot;: 10,
  },
  &quot;bk_module_id&quot;: 8,
  &quot;bk_host_id&quot;: 11,
  &quot;service_instance_ids&quot;: [49],
  &quot;selectors&quot;: [{
    &quot;key&quot;: &quot;key1&quot;,
    &quot;operator&quot;: &quot;notin&quot;,
    &quot;values&quot;: [&quot;value1&quot;]
  }]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: {
    &quot;count&quot;: 1,
    &quot;info&quot;: [
      {
        &quot;bk_biz_id&quot;: 1,
        &quot;id&quot;: 49,
        &quot;name&quot;: &quot;10.27.0.9_p1_81&quot;,
        &quot;service_template_id&quot;: 50,
        &quot;bk_host_id&quot;: 11,
        &quot;bk_module_id&quot;: 56,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2019-07-22T09:54:50.906+08:00&quot;,
        &quot;last_time&quot;: &quot;2019-07-22T09:54:50.906+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;,
        &quot;service_category_id&quot;: 22,
        &quot;process_instances&quot;: [
          {
            &quot;process&quot;: {
              &quot;bk_biz_id&quot;: 1,
              &quot;proc_num&quot;: 0,
              &quot;stop_cmd&quot;: &quot;&quot;,
              &quot;restart_cmd&quot;: &quot;&quot;,
              &quot;face_stop_cmd&quot;: &quot;&quot;,
              &quot;bk_process_id&quot;: 43,
              &quot;bk_func_name&quot;: &quot;p1&quot;,
              &quot;work_path&quot;: &quot;&quot;,
              &quot;bind_ip&quot;: &quot;0.0.0.0&quot;,
              &quot;priority&quot;: 0,
              &quot;reload_cmd&quot;: &quot;&quot;,
              &quot;bk_process_name&quot;: &quot;p1&quot;,
              &quot;port&quot;: &quot;81&quot;,
              &quot;pid_file&quot;: &quot;&quot;,
              &quot;auto_start&quot;: false,
              &quot;auto_time_gap&quot;: 0,
              &quot;last_time&quot;: &quot;2019-07-22T09:54:50.927+08:00&quot;,
              &quot;create_time&quot;: &quot;2019-07-22T09:54:50.927+08:00&quot;,
              &quot;bk_biz_id&quot;: 3,
              &quot;start_cmd&quot;: &quot;&quot;,
              &quot;bk_func_id&quot;: &quot;&quot;,
              &quot;user&quot;: &quot;&quot;,
              &quot;timeout&quot;: 0,
              &quot;protocol&quot;: &quot;1&quot;,
              &quot;description&quot;: &quot;&quot;,
              &quot;bk_supplier_account&quot;: &quot;0&quot;,
              &quot;bk_start_param_regex&quot;: &quot;&quot;
            },
            &quot;relation&quot;: {
              &quot;bk_biz_id&quot;: 1,
              &quot;bk_process_id&quot;: 43,
              &quot;service_instance_id&quot;: 49,
              &quot;process_template_id&quot;: 48,
              &quot;bk_host_id&quot;: 11,
              &quot;bk_supplier_account&quot;: &quot;0&quot;
            }
          }
        ]
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>integer</td>
<td>总数</td>
<td></td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>返回结果</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>服务实例 ID</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>服务实例名称</td>
<td></td>
</tr>
<tr>
<td>service_template_id</td>
<td>integer</td>
<td>服务模板 ID</td>
<td></td>
</tr>
<tr>
<td>bk_host_id</td>
<td>integer</td>
<td>主机 ID</td>
<td></td>
</tr>
<tr>
<td>bk_host_innerip</td>
<td>string</td>
<td>主机 IP</td>
<td></td>
</tr>
<tr>
<td>bk_module_id</td>
<td>integer</td>
<td>模块 ID</td>
<td></td>
</tr>
<tr>
<td>creator</td>
<td>string</td>
<td>创建人</td>
<td></td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>修改人</td>
<td></td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
<td></td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>修复时间</td>
<td></td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>供应商 ID</td>
<td></td>
</tr>
<tr>
<td>process_instances</td>
<td>数组</td>
<td>进程实例信息</td>
<td>包括</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
<td>业务 ID</td>
</tr>
<tr>
<td>process_instances.process</td>
<td>object</td>
<td>进程实例详情</td>
<td>进程属性字段</td>
</tr>
<tr>
<td>process_instances.relation</td>
<td>object</td>
<td>进程实例的关联信息</td>
<td>比如主机 ID，进程模板 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_service_instance_by_set_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据集群模版 id 获取服务实例列表</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>set_template_id</td>
<td>int</td>
<td>是</td>
<td>集群模版 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;set_template_id&quot;:1,
  &quot;page&quot;: {
    &quot;start&quot;: 0,
    &quot;limit&quot;: 10
  }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;bk_error_code&quot;: 0,
    &quot;bk_error_msg&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: {
        &quot;count&quot;: 2,
        &quot;info&quot;: [
            {
                &quot;bk_biz_id&quot;: 3,
                &quot;id&quot;: 1,
                &quot;name&quot;: &quot;197.193.0.2_lgh-process-1&quot;,
                &quot;labels&quot;: null,
                &quot;service_template_id&quot;: 50,
                &quot;bk_host_id&quot;: 1,
                &quot;bk_module_id&quot;: 59,
                &quot;creator&quot;: &quot;admin&quot;,
                &quot;modifier&quot;: &quot;admin&quot;,
                &quot;create_time&quot;: &quot;2020-10-09T02:46:25.002Z&quot;,
                &quot;last_time&quot;: &quot;2020-10-09T02:46:25.002Z&quot;,
                &quot;bk_supplier_account&quot;: &quot;0&quot;
            },
            {
                &quot;bk_biz_id&quot;: 3,
                &quot;id&quot;: 3,
                &quot;name&quot;: &quot;127.0.122.2_lgh-process-1&quot;,
                &quot;labels&quot;: null,
                &quot;service_template_id&quot;: 50,
                &quot;bk_host_id&quot;: 3,
                &quot;bk_module_id&quot;: 59,
                &quot;creator&quot;: &quot;admin&quot;,
                &quot;modifier&quot;: &quot;admin&quot;,
                &quot;create_time&quot;: &quot;2020-10-09T03:04:19.859Z&quot;,
                &quot;last_time&quot;: &quot;2020-10-09T03:04:19.859Z&quot;,
                &quot;bk_supplier_account&quot;: &quot;0&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>integer</td>
<td>总数</td>
<td></td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>返回结果</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>服务实例 ID</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>服务实例名称</td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_service_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id 查询服务模板列表,可加上服务分类 id 进一步查询</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>service_category_id</td>
<td>int</td>
<td>否</td>
<td>服务分类 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;service_category_id&quot;: 1,
  &quot;page&quot;: {
    &quot;start&quot;: 0,
    &quot;limit&quot;: 10,
    &quot;sort&quot;: &quot;-name&quot;
  }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: {
    &quot;count&quot;: 2,
    &quot;info&quot;: [
      {
        &quot;bk_biz_id&quot;: 1,
        &quot;id&quot;: 51,
        &quot;name&quot;: &quot;test3&quot;,
        &quot;service_category_id&quot;: 1,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2019-09-18T20:31:34.627+08:00&quot;,
        &quot;last_time&quot;: &quot;2019-09-18T20:31:34.627+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
      },
      {
    &quot;bk_biz_id&quot;: 1,
        &quot;id&quot;: 50,
        &quot;name&quot;: &quot;test2&quot;,
        &quot;service_category_id&quot;: 1,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2019-09-18T20:31:29.607+08:00&quot;,
        &quot;last_time&quot;: &quot;2019-09-18T20:31:29.607+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>integer</td>
<td>总数</td>
<td></td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>返回结果</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>服务模板 ID</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>服务模板名称</td>
<td></td>
</tr>
<tr>
<td>service_category_id</td>
<td>integer</td>
<td>服务分类 ID</td>
<td></td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_set_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id 查询集群模板</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>set_template_ids</td>
<td>array</td>
<td>否</td>
<td>集群模板 ID 数组</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>否</td>
<td>分页信息</td>
</tr>
</tbody>
</table>
<h4 id="page">page 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>否</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>否</td>
<td>每页限制条数,最大 1000</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段，'-'表示倒序</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;bk_supplier_account&quot;: &quot;0&quot;,
  &quot;bk_biz_id&quot;: 10,
  &quot;set_template_ids&quot;:[1, 11],
  &quot;page&quot;: {
    &quot;start&quot;: 0,
    &quot;limit&quot;: 10,
    &quot;sort&quot;: &quot;-name&quot;
  }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: {
    &quot;count&quot;: 2,
    &quot;info&quot;: [
      {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;zk1&quot;,
        &quot;bk_biz_id&quot;: 10,
        &quot;version&quot;: 0,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2020-03-16T15:09:23.859+08:00&quot;,
        &quot;last_time&quot;: &quot;2020-03-25T18:59:00.167+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
      },
      {
        &quot;id&quot;: 11,
        &quot;name&quot;: &quot;q&quot;,
        &quot;bk_biz_id&quot;: 10,
        &quot;version&quot;: 0,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2020-03-16T15:10:05.176+08:00&quot;,
        &quot;last_time&quot;: &quot;2020-03-16T15:10:05.176+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
      }
    ]
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>总数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>返回结果</td>
</tr>
</tbody>
</table>
<h4 id="info">info 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>集群模板 ID</td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>集群模板名称</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>version</td>
<td>int</td>
<td>集群模板版本</td>
</tr>
<tr>
<td>creator</td>
<td>string</td>
<td>创建者</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>最后修改人员</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/list_set_template_related_service_template/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id 和集群模板 id,获取指定业务下某集群模版的服务模版列表</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>set_template_id</td>
<td>int</td>
<td>是</td>
<td>集群模版 ID</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;set_template_id&quot;: 1,
  &quot;bk_biz_id&quot;: 3
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: [
        {
            &quot;bk_biz_id&quot;: 3,
            &quot;id&quot;: 48,
            &quot;name&quot;: &quot;sm1&quot;,
            &quot;service_category_id&quot;: 2,
            &quot;creator&quot;: &quot;admin&quot;,
            &quot;modifier&quot;: &quot;admin&quot;,
            &quot;create_time&quot;: &quot;2020-05-15T14:14:57.691Z&quot;,
            &quot;last_time&quot;: &quot;2020-05-15T14:14:57.691Z&quot;,
            &quot;bk_supplier_account&quot;: &quot;0&quot;
        },
        {
            &quot;bk_biz_id&quot;: 3,
            &quot;id&quot;: 49,
            &quot;name&quot;: &quot;sm2&quot;,
            &quot;&quot;: 16,
            &quot;creator&quot;: &quot;admin&quot;,
            &quot;modifier&quot;: &quot;admin&quot;,
            &quot;create_time&quot;: &quot;2020-05-15T14:19:09.813Z&quot;,
            &quot;last_time&quot;: &quot;2020-05-15T14:19:09.813Z&quot;,
            &quot;bk_supplier_account&quot;: &quot;0&quot;
        }
    ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<p>data 字段说明：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>int</td>
<td>服务模板 ID</td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>服务模板名称</td>
</tr>
<tr>
<td>service_category_id</td>
<td>int</td>
<td>服务分类 ID</td>
</tr>
<tr>
<td>creator</td>
<td>string</td>
<td>创建者</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>最后修改人员</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/remove_label_from_service_instance/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id 和服务实例 id，以及需要移除的标签，将指定业务下的服务实例移除标签</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>instance_ids</td>
<td>array</td>
<td>是</td>
<td>服务实例 ID 列表</td>
</tr>
<tr>
<td>keys</td>
<td>array</td>
<td>是</td>
<td>需要移除的标签 key 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;instance_ids&quot;: [60, 62],
  &quot;keys&quot;: [&quot;value1&quot;, &quot;value3&quot;]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: null
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/resource_watch/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>监听系统资源变化产生的事件(v3.8 以上)</p>
<p><strong>该 watch 功能的主要特性包括：</strong></p>
<ul>
<li>
<p>在有限的时间内（目前为 3 小时,可能会调整，请勿依赖此时间）为用户提供高可用的数据变更 watch 服务。</p>
</li>
<li>
<p>在有限时间内，用户可以根据自己上一次事件的 cursor(游标)进行事件回溯或者追数据，适用于异常数据回溯，或者系统变更进行数据补录。</p>
</li>
<li>
<p>支持根据时间点进行变更数据回溯，支持根据游标进行变更数据回溯，支持从当前时间点进行数据变更 watch。</p>
</li>
<li>
<p>支持根据事件类型进行 watch 的能力，包括增、删、改。事件中包含全量的数据。</p>
</li>
<li>
<p>支持主机与主机关系数据变化的事件 watch 能力。</p>
</li>
<li>
<p>采用短长链的设计，当用户通过游标进行事件 watch 时，如果没有事件，则会保持会话连接，在 25s 内有事件变更则直接直接将事件推回。避免用户不断请求，同时保证用户能及时的拿到变更的数据。</p>
</li>
<li>
<p>支持批量事件 watch 能力，提升系统吞吐能力。</p>
</li>
<li>
<p>支持定制关注的事件数据字段，满足用户轻量级的 watch 需求。</p>
</li>
</ul>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_event_types</td>
<td>array   string</td>
<td>否</td>
<td>事件类型，如果填了，即为只关注此类型的事件。可选的值为：create(新增)/update(更新)/delete(删除)。如，若使用 create，则只关注该资源的新增事件。不填为空，则为关注所有。</td>
</tr>
<tr>
<td>bk_fields</td>
<td>array string</td>
<td>看情况</td>
<td>返回的事件中需要返回的字段列表，目前监听主机资源该字段为必填字段，不能置空，主机关系可以置空。置空则默认为返回所有字段。</td>
</tr>
<tr>
<td>bk_start_from</td>
<td>Int64</td>
<td>否</td>
<td>监听事件的起始时间，该值为 unix time 的秒数，即为从 UTC1970 年 1 月 1 日 0 时 0 分 0 秒起至你要 watch 的时间点的总秒数。</td>
</tr>
<tr>
<td>bk_cursor</td>
<td>string</td>
<td>否</td>
<td>监听事件的游标，代表了要开始或者继续 watch(监听)的事件地址，系统会返回这个游标的下一个、或一批事件。</td>
</tr>
<tr>
<td>bk_resource</td>
<td>string</td>
<td>是</td>
<td>要监听的资源类型，枚举值为：host, host_relation, biz, set, module, set_template。其中 host 代表主机详情事件，host_relation 代表主机的关系事件，biz 代表业务详情事件，set 代表集群详情事件，module 代表模块详情事件，set_template 代表集群模板详情事件。</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_event_types&quot;: [&quot;create&quot;,&quot;update&quot;,&quot;delete&quot;],
    &quot;bk_fields&quot;: [&quot;bk_host_innerip&quot;, &quot;bk_mac&quot;],
    &quot;bk_start_from&quot;: 12345678999,
    &quot;bk_cursor&quot;: &quot;MQ0yDTE1ODkyMDcyODENMQ01ZWI3ZWZjNTBiOTA5ZTYyMGFmYWQzZGY=&quot;,
    &quot;bk_resource&quot;: &quot;host&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;
}</code></pre>


<h2 id="_8">返回参数</h2>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: {
        &quot;bk_watched&quot;: true,
        &quot;bk_events&quot;: [
            {
                &quot;bk_cursor&quot;: &quot;MQ0yDTE1ODkyMDcyODENMQ01ZWI3ZWZjNTBiOTA5ZTYyMGFmYWQzZGY=&quot;,
                &quot;bk_resource&quot;: &quot;host&quot;,
                &quot;bk_event_type&quot;: &quot;update&quot;,
                &quot;bk_detail&quot;: {
                    &quot;bk_cpu&quot;: 2
                }
            },
            {
                &quot;bk_cursor&quot;: &quot;MQ0yDTE1ODkzNDExMDcNMQ01ZWI3ZWZjNTBiOTA5ZTYyMGFmYWQzZGY=&quot;,
                &quot;bk_resource&quot;: &quot;host&quot;,
                &quot;bk_event_type&quot;: &quot;update&quot;,
                &quot;bk_detail&quot;: {
                    &quot;bk_cpu&quot;: 2
                }
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>Array</td>
<td>事件数据详情，是一个有序的数组，数组尾部的事件为新的事件。</td>
</tr>
</tbody>
</table>
<ul>
<li>data 数据描述</li>
</ul>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_watched</td>
<td>bool</td>
<td>是否监听到了事件，true：监听到了事件；false:未监听到事件</td>
</tr>
<tr>
<td>bk_events</td>
<td>监听到的事件详情</td>
<td>监听到的事件详情列表，最大长度为 200，后续可能会调，请勿依赖此长度。</td>
</tr>
</tbody>
</table>
<ul>
<li>bk_events 数据描述</li>
</ul>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_cursor</td>
<td>string</td>
<td>代表当前资源事件的游标值，调用方可以用该游标获取该事件后的下一个事件</td>
</tr>
<tr>
<td>bk_resource</td>
<td>enum string</td>
<td>该事件对应的资源类型</td>
</tr>
<tr>
<td>bk_event_type</td>
<td>enum string</td>
<td>该事件对应的事件类型，枚举值为：create(新增)/update(更新)/delete(删除)。</td>
</tr>
<tr>
<td>bk_detail</td>
<td>object</td>
<td>该事件的对应的资源的详情数据，不同的资源，对应的详情不同。</td>
</tr>
</tbody>
</table>
<h4 id="host_relation-bk_detail">host_relation 资源 bk_detail 字段数据示例</h4>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_biz_id&quot; : 1,
    &quot;bk_host_id&quot; : 2,
    &quot;bk_module_id&quot; : 3,
    &quot;bk_set_id&quot; : 4,
    &quot;bk_supplier_account&quot; : &quot;0&quot;
}</code></pre>


<h4 id="host-bk_detail">host 资源 bk_detail 字段数据示例</h4>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_host_name&quot; : &quot;hostname&quot;,
    &quot;bk_mem&quot; : null,
    &quot;bk_cloud_id&quot; : 0,
    &quot;operator&quot; : &quot;user&quot;,
    &quot;bk_cpu&quot; : null,
    &quot;bk_mac&quot; : &quot;&quot;,
    &quot;bk_host_innerip&quot; : &quot;192.168.1.1&quot;,  
    &quot;bk_supplier_account&quot; : &quot;0&quot;,
    ....
}</code></pre>


<h3 id="_10">使用说明</h3>
<p>该接口的使用的流程：</p>
<ol>
<li>
<p>确定起始的监听方式，分别可为：</p>
</li>
<li>
<p>1.1 指定从某一时间开始监听事件</p>
</li>
<li>
<p>1.2 指定当前时间开始监听事件</p>
</li>
<li>
<p>1.3 指定用游标 bk_cursor 位置开始监听事件</p>
</li>
</ol>
<p>确定后，发起请求。</p>
<ol>
<li>cmdb 返回符合你预期的事件列表：</li>
<li>2.1: 如果 bk_watched 为 ture, 表明已经监听到了事件，bk_events 中为事件详情列表，调用方可拿数组最后一个事件的 cursor，用 1.3 步骤中的方式继续进行下一次的 watch。</li>
<li>2.2: 如果 bk_watched 为 false，表明未监听到事件，bk_events 中只有一个事件，拿该事件的 cursor 进行下一次的 watch。</li>
</ol>
<p><strong>注意</strong>：</p>
<p>该事件是有过期时间的，目前为 3 小时，如果过期，事件将会释放，且过期的游标（cursor）也会失效。可以用以下两种方式重新 watch：</p>
<ol>
<li>指定从某一时间开始监听事件</li>
<li>指定当前时间开始监听事件</li>
</ol><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_biz_inst_topo/</p>
<h3 id="_2">请求方法</h3>
<p>GET</p>
<h3 id="_3">功能描述</h3>
<p>查询业务实例拓扑</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>level</td>
<td>int</td>
<td>否</td>
<td>拓扑的层级索引，索引取值从 0 开始，默认值为 2，当设置为 -1 的时候会读取完整的业务实例拓扑</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: [
        {
            &quot;bk_inst_id&quot;: 2,
            &quot;bk_inst_name&quot;: &quot;blueking&quot;,
            &quot;bk_obj_id&quot;: &quot;biz&quot;,
            &quot;bk_obj_name&quot;: &quot;business&quot;,
            &quot;child&quot;: [
                {
                    &quot;bk_inst_id&quot;: 3,
                    &quot;bk_inst_name&quot;: &quot;job&quot;,
                    &quot;bk_obj_id&quot;: &quot;set&quot;,
                    &quot;bk_obj_name&quot;: &quot;set&quot;,
                    &quot;child&quot;: [
                        {
                            &quot;bk_inst_id&quot;: 5,
                            &quot;bk_inst_name&quot;: &quot;job&quot;,
                            &quot;bk_obj_id&quot;: &quot;module&quot;,
                            &quot;bk_obj_name&quot;: &quot;module&quot;,
                            &quot;child&quot;: []
                        }
                    ]
                }
            ]
        }
    ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例 ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
<tr>
<td>child</td>
<td>array</td>
<td>当前节点下的所有实例的集合</td>
</tr>
</tbody>
</table>
<h4 id="child">child</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例 ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
<tr>
<td>child</td>
<td>array</td>
<td>当前节点下的所有实例的集合</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_business/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询业务</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>指定查询的字段，参数为业务的任意属性，如果不填写字段信息，系统会返回业务的所有字段</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>否</td>
<td>查询条件，参数为业务的任意属性，如果不写代表搜索全部数据</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>分页条件</td>
</tr>
</tbody>
</table>
<p>Note: 业务分为两类，未归档的业务和已归档的业务。
- 若要查询已归档的业务，请在 condition 中增加条件<code>bk_data_status:disabled</code>。
- 若要查询未归档的业务，请不要带字段"bk_data_status",或者在 condition 中增条件<code>bk_data_status: {"$ne":disabled"}</code>。</p>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段，通过在字段前面增加 -，如 sort:&#34;-field&#34; 可以表示按照字段 field 降序</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;fields&quot;: [
        &quot;bk_biz_id&quot;,
        &quot;bk_biz_name&quot;
    ],
    &quot;condition&quot;: {
        &quot;bk_biz_name&quot;: &quot;esb-test&quot;
    },
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10,
        &quot;sort&quot;: &quot;&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 1,
        &quot;info&quot;: [
            {
                &quot;bk_biz_id&quot;: 1,
                &quot;bk_biz_name&quot;: &quot;esb-test&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>业务实际数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_classifications/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询模型分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_supplier_account&quot;: &quot;0&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
     &quot;data&quot;: [
         {
            &quot;bk_classification_icon&quot;: &quot;icon-cc-business&quot;,
            &quot;bk_classification_id&quot;: &quot;bk_host_manage&quot;,
            &quot;bk_classification_name&quot;: &quot;主机管理&quot;,
            &quot;bk_classification_type&quot;: &quot;inner&quot;,
            &quot;id&quot;: 1
         }
     ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>分类 ID，英文描述用于系统内部使用</td>
</tr>
<tr>
<td>bk_classification_name</td>
<td>string</td>
<td>分类名</td>
</tr>
<tr>
<td>bk_classification_type</td>
<td>string</td>
<td>用于对分类进行分类（如：inner 代码为内置分类，空字符串为自定义分类）</td>
</tr>
<tr>
<td>bk_classification_icon</td>
<td>string</td>
<td>模型分类的图标,取值可参考，取值可参考<a href="resource_define/classIcon.json">(classIcon.json)</a></td>
</tr>
<tr>
<td>id</td>
<td>int</td>
<td>数据记录 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_cloud_area/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询云区域</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>condition</td>
<td>object</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>否</td>
<td>云区域 ID</td>
</tr>
<tr>
<td>bk_cloud_name</td>
<td>string</td>
<td>否</td>
<td>云区域名称</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页信息</td>
</tr>
</tbody>
</table>
<h4 id="page">page 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>否</td>
<td>获取数据偏移位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>过去数据条数限制，建议 为 200</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;condition&quot;: {
        &quot;bk_cloud_id&quot;: 12,
        &quot;bk_cloud_name&quot; &quot;aws&quot;,
    },
    &quot;page&quot;:{
        &quot;start&quot;:0,
        &quot;limit&quot;:10
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: {
    &quot;count&quot;: 10,
    &quot;info&quot;: [
         {
            &quot;bk_cloud_id&quot;: 0,
            &quot;bk_cloud_name&quot;: &quot;aws&quot;,
            &quot;bk_supplier_account&quot;: &quot;0&quot;,
            &quot;create_time&quot;: &quot;2019-05-20T14:59:48.354+08:00&quot;,
            &quot;last_time&quot;: &quot;2019-05-20T14:59:48.354+08:00&quot;
        },
        .....
    ]

  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<p>| 名称  | 类型  | 说明 |
|---|---|---|---|
| count| int| 记录条数 |
| info| object array |  查询到的云区域列表信息 |</p>
<h4 id="datainfo">data.info 字段说明</h4>
<p>| 名称  | 类型  | 说明 |
|---|---|---|---|
| bk_cloud_id | int | 云区域 ID |
| bk_cloud_name | string  | 云区域名字 | 
| create_time | string | 创建时间 |
| last_time | string | 最后修改时间 |</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_custom_query/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询自定义查询</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>否</td>
<td>查询条件，condition 字段为自定义查询的属性字段, 可以是 create_user,modify_user, name</td>
</tr>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 200</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;condition&quot;: {
        &quot;name&quot;: &quot;api1&quot;
    },
    &quot;start&quot;: 0,
    &quot;limit&quot;: 200
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 1,
        &quot;info&quot;: [
            {
                &quot;bk_biz_id&quot;: 1,
                &quot;id&quot;: &quot;bacfet4kd42325venmcg&quot;,
                &quot;name&quot;: &quot;api1&quot;,
                &quot;info&quot;: &quot;{\&quot;condition\&quot;:[{\&quot;bk_obj_id\&quot;:\&quot;biz\&quot;,\&quot;condition\&quot;:[{\&quot;field\&quot;:\&quot;default\&quot;,\&quot;operator\&quot;:\&quot;$ne\&quot;,\&quot;value\&quot;:1}],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;set\&quot;,\&quot;condition\&quot;:[],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;module\&quot;,\&quot;condition\&quot;:[],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;host\&quot;,\&quot;condition\&quot;:[{\&quot;field\&quot;:\&quot;bk_host_innerip\&quot;,\&quot;operator\&quot;:\&quot;$eq\&quot;,\&quot;value\&quot;:\&quot;127.0.0.1\&quot;}],\&quot;fields\&quot;:[\&quot;bk_host_innerip\&quot;,\&quot;bk_host_outerip\&quot;,\&quot;bk_agent_status\&quot;]}]}&quot;,
                &quot;create_user&quot;: &quot;admin&quot;,
                &quot;create_time&quot;: &quot;2018-03-27T16:22:43.271+08:00&quot;,
                &quot;modify_user&quot;: &quot;admin&quot;,
                &quot;last_time&quot;: &quot;2018-03-27T16:29:26.428+08:00&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>自定义查询数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>create_user</td>
<td>string</td>
<td>创建者</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>自定义查询主键 ID</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>自定义查询信息</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>modify_user</td>
<td>string</td>
<td>修改者</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>自定义查询命名</td>
</tr>
</tbody>
</table>
<h4 id="datainfoinfo">data.info.info</h4>
<p>| 字段      |  类型     |  描述      |
|-----------|------------|--------|------------|
| bk_obj_id |  string   | 对象名,可以为 biz,set,module,host,object |
| fields    |  array    | 查询输出字段 |
| condition |  array    | 查询条件 |</p>
<h4 id="datainfoinfocondition">data.info.info.condition</h4>
<p>| 字段      |  类型     |  描述      |
|-----------|------------|--------|------------|
| field     |  string    | 对象的字段 |
| operator  |  string    | 操作符, $eq 为相等，$ne 为不等，$in 为属于，$nin 为不属于 |
| value     |  string    | 字段对应的值 |</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_dynamic_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询动态分组列表 (V3.9.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>否</td>
<td>查询条件，condition 字段为自定义查询的属性字段, 可以是 create_user, modify_user, name</td>
</tr>
<tr>
<td>disable_counter</td>
<td>bool</td>
<td>否</td>
<td>是否返回总记录条数，默认返回</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页设置</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>检索排序， 默认按照创建时间排序</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;disable_counter&quot;: true,
    &quot;condition&quot;: {
        &quot;name&quot;: &quot;my-dynamic-group&quot;
    },
    &quot;page&quot;:{
        &quot;start&quot;: 0,
        &quot;limit&quot;: 200
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 0,
        &quot;info&quot;: [
            {
                &quot;bk_biz_id&quot;: 1,
                &quot;id&quot;: &quot;XXXXXXXX&quot;,
                &quot;name&quot;: &quot;my-dynamic-group&quot;,
                &quot;bk_obj_id&quot;: &quot;host&quot;,
                &quot;info&quot;: {
                    &quot;condition&quot;:[
                            {
                                &quot;bk_obj_id&quot;:&quot;set&quot;,
                                &quot;condition&quot;:[
                                    {
                                        &quot;field&quot;:&quot;default&quot;,
                                        &quot;operator&quot;:&quot;$ne&quot;,
                                        &quot;value&quot;:1
                                    }
                                ]
                            },
                            {
                                &quot;bk_obj_id&quot;:&quot;module&quot;,
                                &quot;condition&quot;:[
                                    {
                                        &quot;field&quot;:&quot;default&quot;,
                                        &quot;operator&quot;:&quot;$ne&quot;,
                                        &quot;value&quot;:1
                                    }
                                ]
                            },
                            {
                                &quot;bk_obj_id&quot;:&quot;host&quot;,
                                &quot;condition&quot;:[
                                    {
                                        &quot;field&quot;:&quot;bk_host_innerip&quot;,
                                        &quot;operator&quot;:&quot;$eq&quot;,
                                        &quot;value&quot;:&quot;127.0.0.1&quot;
                                    }
                                ]
                            }
                    ]
                },
                &quot;create_user&quot;: &quot;admin&quot;,
                &quot;create_time&quot;: &quot;2018-03-27T16:22:43.271+08:00&quot;,
                &quot;modify_user&quot;: &quot;admin&quot;,
                &quot;last_time&quot;: &quot;2018-03-27T16:29:26.428+08:00&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>当前规则能匹配到的总记录条数（用于调用者进行预分页，实际单次请求返回数量以及数据是否全部拉取完毕以 JSON Array 解析数量为准）</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>自定义查询数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfo">data.info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>动态分组主键 ID</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>动态分组命名</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>动态分组的目标资源对象类型,目前可以为 host,set</td>
</tr>
<tr>
<td>info</td>
<td>object</td>
<td>动态分组信息</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>modify_user</td>
<td>string</td>
<td>修改者</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>create_user</td>
<td>string</td>
<td>创建者</td>
</tr>
</tbody>
</table>
<h4 id="datainfoinfocondition">data.info.info.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>对象名,可以为 set,module,host</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="datainfoinfoconditioncondition">data.info.info.condition.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>对象的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>操作符, op 值为 eq(相等)/ne(不等)/in(属于)/nin(不属于)/like(模糊匹配)</td>
</tr>
<tr>
<td>value</td>
<td>object</td>
<td>字段对应的值</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_host_lock/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据主机 id 列表查询主机锁(v3.8.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id_list</td>
<td>int array</td>
<td>是</td>
<td>主机 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
   &quot;id_list&quot;:[1, 2]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: {
        1: true,
        2: false
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>map[int]bool</td>
<td>请求返回的数据, key 是 ID，value 是否上锁</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_hostidentifier/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据条件查询主机身份</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ip</td>
<td>dict</td>
<td>否</td>
<td>主机 ip 查询条件</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>分页查询条件</td>
</tr>
</tbody>
</table>
<h4 id="ip">ip</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>array</td>
<td>否</td>
<td>主机 ip 列表</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>否</td>
<td>云区域 ID</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大值为 500</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;ip&quot;: {
        &quot;data&quot;: [
            &quot;192.168.0.1&quot;
        ],
        &quot;bk_cloud_id&quot;: 0
    },
    &quot;page&quot;:{
        &quot;start&quot;:0,
        &quot;limit&quot;:10,
        &quot;sort&quot;:&quot;bk_host_name&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
        &quot;count&quot;: 1,
        &quot;info&quot;: [
            {
                &quot;bk_host_id&quot;: 4,
                &quot;bk_host_name&quot;: &quot;&quot;,
                &quot;bk_supplier_account&quot;: &quot;&quot;,
                &quot;bk_cloud_id&quot;: 0,
                &quot;bk_cloud_name&quot;: &quot;default area&quot;,
                &quot;bk_host_innerip&quot;: &quot;192.168.0.1&quot;,
                &quot;bk_host_outerip&quot;: &quot;&quot;,
                &quot;bk_os_type&quot;: &quot;&quot;,
                &quot;bk_os_name&quot;: &quot;&quot;,
                &quot;bk_mem&quot;: 0,
                &quot;bk_cpu&quot;: 0,
                &quot;bk_disk&quot;: 0,
                &quot;associations&quot;: {
                    &quot;51&quot;: {
                        &quot;bk_biz_id&quot;: 3,
                        &quot;bk_biz_name&quot;: &quot;test&quot;,
                        &quot;bk_set_id&quot;: 8,
                        &quot;bk_set_name&quot;: &quot;test&quot;,
                        &quot;bk_module_id&quot;: 51,
                        &quot;bk_module_name&quot;: &quot;test&quot;,
                        &quot;bk_service_status&quot;: &quot;1&quot;,
                        &quot;bk_set_env&quot;: &quot;3&quot;,
                         &quot;layer&quot;: {
                              &quot;bk_inst_id&quot;: 3,
                              &quot;bk_inst_name&quot;: &quot;a&quot;,
                              &quot;bk_obj_id&quot;: &quot;a&quot;,
                              &quot;child&quot;: {
                                    &quot;bk_inst_id&quot;: 5,
                                    &quot;bk_inst_name&quot;: &quot;b&quot;,
                                    &quot;bk_obj_id&quot;: &quot;b&quot;,
                                    &quot;child&quot;: {}
                              }
                        }
                    }
                },
                &quot;process&quot;: [
                    {
                        &quot;bk_process_id&quot;: 43,
                        &quot;bk_process_name&quot;: &quot;test&quot;,
                        &quot;bind_ip&quot;: &quot;&quot;,
                        &quot;port&quot;: &quot;8000&quot;,
                        &quot;protocol&quot;: &quot;1&quot;,
                        &quot;bk_func_id&quot;: &quot;&quot;,
                        &quot;bk_func_name&quot;: &quot;test&quot;,
                        &quot;bk_start_param_regex&quot;: &quot;&quot;,
                        &quot;bind_info&quot;: [
                            {
                                &quot;enable&quot;: false,  
                                &quot;ip&quot;: &quot;127.0.0.1&quot;,  
                                &quot;port&quot;: &quot;8000&quot;,  
                                &quot;protocol&quot;: &quot;1&quot;, 
                                &quot;template_row_id&quot;: 1  
                            }
                        ],
                        &quot;bind_modules&quot;: [
                            51
                        ]
                    }
                ]
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>主机身份数据</td>
</tr>
</tbody>
</table>
<h4 id="datainfon">data.info[n]</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_host_id</td>
<td>int</td>
<td>主机 ID</td>
</tr>
<tr>
<td>bk_host_name</td>
<td>string</td>
<td>主机名称</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>云区域 ID</td>
</tr>
<tr>
<td>bk_cloud_name</td>
<td>string</td>
<td>云区域名称</td>
</tr>
<tr>
<td>bk_host_innerip</td>
<td>string</td>
<td>内网 IP</td>
</tr>
<tr>
<td>bk_host_outerip</td>
<td>string</td>
<td>外网 IP</td>
</tr>
<tr>
<td>bk_os_type</td>
<td>string</td>
<td>操作系统类型</td>
</tr>
<tr>
<td>bk_os_name</td>
<td>string</td>
<td>操作系统名称</td>
</tr>
<tr>
<td>bk_mem</td>
<td>string</td>
<td>内存容量</td>
</tr>
<tr>
<td>bk_cpu</td>
<td>int</td>
<td>CPU 逻辑核心数</td>
</tr>
<tr>
<td>bk_disk</td>
<td>int</td>
<td>磁盘容量</td>
</tr>
<tr>
<td>associations</td>
<td>dict</td>
<td>主机主线关联，key 为主机所属的模块 ID</td>
</tr>
<tr>
<td>process</td>
<td>array</td>
<td>主机进程信息</td>
</tr>
</tbody>
</table>
<h4 id="datainfonassociations">data.info[n].associations</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>主机所属的业务 ID</td>
</tr>
<tr>
<td>bk_biz_name</td>
<td>string</td>
<td>主机所属的业务名字</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>主机所属的集群 ID</td>
</tr>
<tr>
<td>bk_set_name</td>
<td>string</td>
<td>主机所属的集群名字</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>主机所属的模块 ID</td>
</tr>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>主机所属的模块名字</td>
</tr>
<tr>
<td>bk_service_status</td>
<td>enum</td>
<td>服务状态:1/2(1:开放,2:关闭)</td>
</tr>
<tr>
<td>bk_set_env</td>
<td>enum</td>
<td>环境类型：1/2/3(1:测试,2:体验,3:正式)</td>
</tr>
<tr>
<td>layer</td>
<td>dict</td>
<td>自定义层级信息</td>
</tr>
</tbody>
</table>
<h4 id="datainfonassociationslayer">data.info[n].associations.layer</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>自定义层级实例 ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>自定义层级实例名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>int</td>
<td>自定义层级模型 ID</td>
</tr>
<tr>
<td>child</td>
<td>dict</td>
<td>自定义层级信息</td>
</tr>
</tbody>
</table>
<h4 id="datainfonprocess">data.info[n].process</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_process_id</td>
<td>int</td>
<td>进程 ID</td>
</tr>
<tr>
<td>bk_process_name</td>
<td>string</td>
<td>进程名</td>
</tr>
<tr>
<td>bind_ip</td>
<td>string</td>
<td>绑定 IP:1/2/3/4(1:127.0.0.1,2:0.0.0.0,3:第一内网 IP,4:第一外网 IP)</td>
</tr>
<tr>
<td>port</td>
<td>string</td>
<td>主机端口</td>
</tr>
<tr>
<td>protocol</td>
<td>enum</td>
<td>协议:1/2(1:tcp, 2:udp)</td>
</tr>
<tr>
<td>bk_func_id</td>
<td>int</td>
<td>功能 ID</td>
</tr>
<tr>
<td>bk_func_name</td>
<td>string</td>
<td>进程别名</td>
</tr>
<tr>
<td>bk_start_param_regex</td>
<td>string</td>
<td>进程启动参数</td>
</tr>
<tr>
<td>bind_modules</td>
<td>array</td>
<td>进程绑定的模块数组</td>
</tr>
<tr>
<td>bind_info</td>
<td>array</td>
<td>进程绑定信息</td>
</tr>
</tbody>
</table>
<h4 id="datainfonprocessbind_infox">data.info[n].process.bind_info[x] 描述</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>enable</td>
<td>bool</td>
<td>端口是否启用</td>
</tr>
<tr>
<td>ip</td>
<td>string</td>
<td>绑定的 ip</td>
</tr>
<tr>
<td>port</td>
<td>string</td>
<td>绑定的端口</td>
</tr>
<tr>
<td>protocol</td>
<td>string</td>
<td>使用的协议</td>
</tr>
<tr>
<td>row_id</td>
<td>int</td>
<td>实例化使用的模板行索引，进程内唯一</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据关联关系实例查询模型实例</p>
<ul>
<li>该接口只适用于自定义层级模型和通用模型实例上，不适用于业务、集群、模块、主机等模型实例</li>
</ul>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型 ID</td>
</tr>
<tr>
<td>page</td>
<td>object</td>
<td>是</td>
<td>分页参数</td>
</tr>
<tr>
<td>condition</td>
<td>object</td>
<td>否</td>
<td>具有关联关系的模型实例查询条件</td>
</tr>
<tr>
<td>fields</td>
<td>map</td>
<td>否</td>
<td>指定查询模型实例返回的字段,key 为模型 ID，value 为该查询模型要返回的模型属性字段</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h4 id="condition">condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>是</td>
<td>取值为模型的字段名</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>是</td>
<td>取值为：$regex $eq $ne</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>是</td>
<td>field 配置的模型字段名所对应的值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_obj_id&quot;: &quot;bk_switch&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10,
        &quot;sort&quot;: &quot;bk_inst_id&quot;
    },
    &quot;fields&quot;: {
        &quot;bk_switch&quot;: [
            &quot;bk_asset_id&quot;,
            &quot;bk_inst_id&quot;,
            &quot;bk_inst_name&quot;,
            &quot;bk_obj_id&quot;
        ]
    },
    &quot;condition&quot;: {
        &quot;host&quot;: [
            {
                &quot;field&quot;: &quot;operator&quot;,
                &quot;operator&quot;: &quot;$regex&quot;,
                &quot;value&quot;: &quot;admin&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: {
        &quot;count&quot;: 2,
        &quot;info&quot;: [
            {
                &quot;bk_asset_id&quot;: &quot;sw00001&quot;,
                &quot;bk_inst_id&quot;: 1,
                &quot;bk_inst_name&quot;: &quot;sw1&quot;,
                &quot;bk_obj_id&quot;: &quot;bk_switch&quot;
            },
            {
                &quot;bk_asset_id&quot;: &quot;sw00002&quot;,
                &quot;bk_inst_id&quot;: 2,
                &quot;bk_inst_name&quot;: &quot;sw2&quot;,
                &quot;bk_obj_id&quot;: &quot;bk_switch&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>模型实例实际数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_inst_association_topo/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询实例关联拓扑</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>无</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>无</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_supplier_account&quot;:&quot;0&quot;,
    &quot;bk_obj_id&quot;:&quot;test&quot;,
    &quot;bk_inst_id&quot;:1
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: [{
        &quot;bk_inst_id&quot;:0,
        &quot;bk_inst_name&quot;: &quot;&quot;,
        &quot;bk_obj_icon&quot;: &quot;icon-cc-business&quot;,
        &quot;bk_obj_id&quot;: &quot;biz&quot;,
        &quot;bk_obj_name&quot;: &quot;业务&quot;,
        &quot;count&quot;: 1,
        &quot;children&quot;: [{
            &quot;bk_inst_id&quot;: 2,
            &quot;bk_inst_name&quot;: &quot;蓝鲸&quot;,
            &quot;bk_obj_icon&quot;: &quot;&quot;,
            &quot;bk_obj_id&quot;: &quot;biz&quot;,
            &quot;bk_obj_name&quot;: &quot;业务&quot;
        }],

    }]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例 ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
<tr>
<td>children</td>
<td>object array</td>
<td>本模型下所有被关联的实例的集合</td>
</tr>
<tr>
<td>count</td>
<td>int</td>
<td>children 包含节点的数量</td>
</tr>
</tbody>
</table>
<h4 id="children">children</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例 ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例用于展示的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>模型图标的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>模型用于展示的名字</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_inst_asst_object_inst_base_info/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询实例关联模型实例基本信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>指定查询的字段，参数为业务的任意属性，如果不填写字段信息，系统会返回业务的所有字段</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>分页条件</td>
</tr>
</tbody>
</table>
<h4 id="condition">condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>实例模型 ID</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>实例 ID</td>
</tr>
<tr>
<td>association_obj_id</td>
<td>string</td>
<td>是</td>
<td>关联对象的模型 ID， 返回 association_obj_id 模型与 bk_inst_id 实例有关联的实例基本数据（bk_inst_id,bk_inst_name）</td>
</tr>
<tr>
<td>is_target_object</td>
<td>bool</td>
<td>否</td>
<td>bk_obj_id 是否为目标模型， 默认 false， 关联关系中的源模型，否则是目标模型</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>否</td>
<td>记录开始位置,默认值 0</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>否</td>
<td>每页限制条数,默认值 20,最大 200</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;condition&quot;: {
        &quot;bk_obj_id&quot;:&quot;bk_switch&quot;, 
        &quot;bk_inst_id&quot;:12, 
        &quot;association_obj_id&quot;:&quot;host&quot;, 
        &quot;is_target_object&quot;:true, 
    },
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10,
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: {
        &quot;count&quot;: 4,
        &quot;info&quot;: [
            {
                &quot;bk_inst_id&quot;: 1,
                &quot;bk_inst_name&quot;: &quot;127.0.0.3&quot;
            }
        ],
        &quot;page&quot;: {
            &quot;start&quot;: 0,
            &quot;limit&quot;: 1
        }
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<p>| 名称  | 类型  | 说明 |
|---|---|---|---|
| count| int| 记录条数 |
| info| object array |  关联对象的模型 ID， 实例关联模型的实例基本数据（bk_inst_id,bk_inst_name） |
| page| object|分页信息|</p>
<h4 id="datainfo">data.info 字段说明</h4>
<p>| 名称  | 类型  | 说明 |
|---|---|---|---|
| bk_inst_id | int | 实例 ID |
| bk_inst_name | string  | 实例名 | </p>
<h5 id="datainfobk_inst_iddatainfobk_inst_name">data.info.bk_inst_id,data.info.bk_inst_name 字段说明</h5>
<p>不同模型 bk_inst_id, bk_inst_name 对应的值</p>
<p>| 模型   | bk_inst_id   | bk_inst_name |
|---|---|---|---|
|业务 | bk_biz_id | bk_biz_name|
|集群 | bk_set_id | bk_set_name|
|模块 | bk_module_id | bk_module_name|
|进程 | bk_process_id | bk_process_name|
|主机 | bk_host_id | bk_host_inner_ip|
|通用模型 | bk_inst_id | bk_inst_name|</p>
<h4 id="datapage">data.page 字段说明</h4>
<p>| 名称  | 类型  | 说明 |
|---|---|---|---|
|start|int|服务端本次获取数据偏移位置|
|limit|int|服务端返回数据条数限制|</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_inst_by_object/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询给定模型的实例信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>自定义模型 ID</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>指定查询的字段</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>否</td>
<td>查询条件</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>否</td>
<td>分页条件</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h4 id="fields">fields 参数说明</h4>
<p>参数为查询的目标实例对应的模型定义的所有字段</p>
<h4 id="condition">condition 参数说明</h4>
<p>condition 参数为查询的目标实例对应的模型定义的所有字段</p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_obj_id&quot;: &quot;xxx&quot;,
    &quot;fields&quot;: [
    ],
    &quot;condition&quot;: {
    },
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10,
        &quot;sort&quot;: &quot;&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 4,
        &quot;info&quot;: [
            {
                &quot;bk_inst_id&quot;: 0,
                &quot;bk_inst_name&quot;: &quot;default area&quot;,
                &quot;bk_supplier_account&quot;: &quot;123456789&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>info 集合中元素的数量</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>查询的模型的实例集合</td>
</tr>
</tbody>
</table>
<h4 id="info">info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>实例 ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>实例名</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>否</td>
<td>集群 ID</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>查询字段，字段来自于模块定义的属性字段</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>是</td>
<td>查询条件，字段来自于模块定义的属性字段</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>是</td>
<td>分页条件</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 2,
    &quot;fields&quot;: [
        &quot;bk_module_name&quot;,
        &quot;bk_set_id&quot;
    ],
    &quot;condition&quot;: {
        &quot;bk_module_name&quot;: &quot;test&quot;
    },
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 2,
        &quot;info&quot;: [
            {
                &quot;bk_module_name&quot;: &quot;test&quot;,
                &quot;bk_set_id&quot;: 11
            },
            {
                &quot;bk_module_name&quot;: &quot;test&quot;,
                &quot;bk_set_id&quot;: 12
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>数据数量</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>结果集，其中，所有字段均为模块定义的属性字段</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_objects/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据可选条件查询模型</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>creator</td>
<td>string</td>
<td>否</td>
<td>本条数据创建者</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>否</td>
<td>本条数据的最后修改人员</td>
</tr>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>否</td>
<td>对象模型的分类 ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>对象模型的 ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>否</td>
<td>对象模型的名字，用于展示，可以使用人类可以阅读的任何语言</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;creator&quot;: &quot;user&quot;,
    &quot;modifier&quot;: &quot;user&quot;,
    &quot;bk_classification_id&quot;: &quot;test&quot;,
    &quot;bk_obj_id&quot;: &quot;biz&quot;,
    &quot;bk_supplier_account&quot;:&quot;0&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: [
        {
            &quot;bk_classification_id&quot;: &quot;bk_organization&quot;,
            &quot;create_time&quot;: &quot;2018-03-08T11:30:28.005+08:00&quot;,
            &quot;creator&quot;: &quot;cc_system&quot;,
            &quot;description&quot;: &quot;&quot;,
            &quot;id&quot;: 4,
            &quot;bk_ispaused&quot;: false,
            &quot;ispre&quot;: true,
            &quot;last_time&quot;: null,
            &quot;modifier&quot;: &quot;&quot;,
            &quot;bk_obj_icon&quot;: &quot;icon-XXX&quot;,
            &quot;bk_obj_id&quot;: &quot;XX&quot;,
            &quot;bk_obj_name&quot;: &quot;XXX&quot;,
            &quot;position&quot;: &quot;{\&quot;test_obj\&quot;:{\&quot;x\&quot;:-253,\&quot;y\&quot;:137}}&quot;,
            &quot;bk_supplier_account&quot;: &quot;0&quot;
        }
    ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>数据记录的 ID</td>
</tr>
<tr>
<td>creator</td>
<td>string</td>
<td>本条数据创建者</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>本条数据的最后修改人员</td>
</tr>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>对象模型的分类 ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>对象模型的 ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>对象模型的名字，用于展示</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_ispaused</td>
<td>bool</td>
<td>是否停用, true or false</td>
</tr>
<tr>
<td>ispre</td>
<td>bool</td>
<td>是否预定义, true or false</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>对象模型的 ICON 信息，用于前端显示，取值可参考<a href="/static/esb/api_docs/res/cc/modleIcon.json">(modleIcon.json)</a></td>
</tr>
<tr>
<td>position</td>
<td>json object string</td>
<td>用于前端展示的坐标</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_object_attribute/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>可通过可选参数根据模型 id 或业务 id 查询对象模型属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务 id，设置后查询结果包含业务自定义字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_obj_id&quot;: &quot;test&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_biz_id&quot;: 2
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
   &quot;data&quot;: [
       {
           &quot;bk_biz_id&quot;: 0,
           &quot;bk_asst_obj_id&quot;: &quot;&quot;,
           &quot;bk_asst_type&quot;: 0,
           &quot;create_time&quot;: &quot;2018-03-08T11:30:27.898+08:00&quot;,
           &quot;creator&quot;: &quot;cc_system&quot;,
           &quot;description&quot;: &quot;&quot;,
           &quot;editable&quot;: false,
           &quot;id&quot;: 51,
           &quot;isapi&quot;: false,
           &quot;isonly&quot;: true,
           &quot;ispre&quot;: true,
           &quot;isreadonly&quot;: false,
           &quot;isrequired&quot;: true,
           &quot;last_time&quot;: &quot;2018-03-08T11:30:27.898+08:00&quot;,
           &quot;bk_obj_id&quot;: &quot;process&quot;,
           &quot;option&quot;: &quot;&quot;,
           &quot;placeholder&quot;: &quot;&quot;,
           &quot;bk_property_group&quot;: &quot;default&quot;,
           &quot;bk_property_group_name&quot;: &quot;基础信息&quot;,
           &quot;bk_property_id&quot;: &quot;bk_process_name&quot;,
           &quot;bk_property_index&quot;: 0,
           &quot;bk_property_name&quot;: &quot;进程名称&quot;,
           &quot;bk_property_type&quot;: &quot;singlechar&quot;,
           &quot;bk_supplier_account&quot;: &quot;0&quot;,
           &quot;unit&quot;: &quot;&quot;
       },
       {
            &quot;bk_biz_id&quot;: 2,
            &quot;id&quot;: 7,
            &quot;bk_supplier_account&quot;: &quot;0&quot;,
            &quot;bk_obj_id&quot;: &quot;process&quot;,
            &quot;bk_property_id&quot;: &quot;biz_custom_field&quot;,
            &quot;bk_property_name&quot;: &quot;业务自定义字段&quot;,
            &quot;bk_property_group&quot;: &quot;biz_custom_group&quot;,
            &quot;bk_property_index&quot;: 4,
            &quot;unit&quot;: &quot;&quot;,
            &quot;placeholder&quot;: &quot;&quot;,
            &quot;editable&quot;: true,
            &quot;ispre&quot;: true,
            &quot;isrequired&quot;: false,
            &quot;isreadonly&quot;: false,
            &quot;isonly&quot;: false,
            &quot;bk_issystem&quot;: false,
            &quot;bk_isapi&quot;: false,
            &quot;bk_property_type&quot;: &quot;singlechar&quot;,
            &quot;option&quot;: &quot;&quot;,
            &quot;description&quot;: &quot;&quot;,
            &quot;creator&quot;: &quot;admin&quot;,
            &quot;create_time&quot;: &quot;2020-03-25 17:12:08&quot;,
            &quot;last_time&quot;: &quot;2020-03-25 17:12:08&quot;,
            &quot;bk_property_group_name&quot;: &quot;业务自定义分组&quot;
       }
   ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>creator</td>
<td>string</td>
<td>数据的创建者</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>editable</td>
<td>bool</td>
<td>表明数据是否可编辑</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>ispre</td>
<td>bool</td>
<td>true:预置字段,false:非内置字段</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>true:只读，false:非只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>true:必填，false:可选</td>
</tr>
<tr>
<td>option</td>
<td>string</td>
<td>用户自定义内容，存储的内容及格式由调用方决定</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_property_id</td>
<td>string</td>
<td>模型的属性 ID</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>定义的属性字段用于存储数据的数据类型 （singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool)</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务自定义字段的业务 id</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_object_topo/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>通过对象模型的分类 ID 查询普通模型拓扑</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的分类 ID，只能用英文字母序列命名</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_classification_id&quot;: &quot;test&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: [
        {
           &quot;arrows&quot;: &quot;to&quot;,
           &quot;from&quot;: {
               &quot;bk_classification_id&quot;: &quot;bk_host_manage&quot;,
               &quot;bk_obj_id&quot;: &quot;host&quot;,
               &quot;bk_obj_name&quot;: &quot;主机&quot;,
               &quot;position&quot;: &quot;{\&quot;bk_host_manage\&quot;:{\&quot;x\&quot;:-357,\&quot;y\&quot;:-344},\&quot;lhmtest\&quot;:{\&quot;x\&quot;:163,\&quot;y\&quot;:75}}&quot;,
               &quot;bk_supplier_account&quot;: &quot;0&quot;
           },
           &quot;label&quot;: &quot;switch_to_host&quot;,
           &quot;label_name&quot;: &quot;&quot;,
           &quot;label_type&quot;: &quot;&quot;,
           &quot;to&quot;: {
               &quot;bk_classification_id&quot;: &quot;bk_network&quot;,
               &quot;bk_obj_id&quot;: &quot;bk_switch&quot;,
               &quot;bk_obj_name&quot;: &quot;交换机&quot;,
               &quot;position&quot;: &quot;{\&quot;bk_network\&quot;:{\&quot;x\&quot;:-172,\&quot;y\&quot;:-160}}&quot;,
               &quot;bk_supplier_account&quot;: &quot;0&quot;
           }
        }
   ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>arrows</td>
<td>string</td>
<td>取值 to（单向） 或 to,from（双向）</td>
</tr>
<tr>
<td>label_name</td>
<td>string</td>
<td>关联关系的名字</td>
</tr>
<tr>
<td>label</td>
<td>string</td>
<td>表明 From 通过哪个字段关联到 To 的</td>
</tr>
<tr>
<td>from</td>
<td>string</td>
<td>对象模型的英文 id，拓扑关系的发起方</td>
</tr>
<tr>
<td>to</td>
<td>string</td>
<td>对象模型的英文 ID，拓扑关系的终止方</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_related_inst_asso/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询某实例所有的关联关系（包含其作为关联关系原模型和关联关系目标模型的情况）。(v3.5.36)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th align="left">字段</th>
<th align="left">类型</th>
<th align="left">必选</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">bk_app_code</td>
<td align="left">string</td>
<td align="left">是</td>
<td align="left">应用 ID</td>
</tr>
<tr>
<td align="left">bk_app_secret</td>
<td align="left">string</td>
<td align="left">是</td>
<td align="left">安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td align="left">bk_token</td>
<td align="left">string</td>
<td align="left">否</td>
<td align="left">当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td align="left">bk_username</td>
<td align="left">string</td>
<td align="left">否</td>
<td align="left">当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th align="left">字段</th>
<th align="left">类型</th>
<th align="left">必选</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">bk_inst_id</td>
<td align="left">int</td>
<td align="left">是</td>
<td align="left">实例 id</td>
</tr>
<tr>
<td align="left">bk_obj_id</td>
<td align="left">string</td>
<td align="left">是</td>
<td align="left">模型 id</td>
</tr>
<tr>
<td align="left">fields</td>
<td align="left">array</td>
<td align="left">Yes</td>
<td align="left">需要返回的字段</td>
</tr>
<tr>
<td align="left">start</td>
<td align="left">int</td>
<td align="left">否</td>
<td align="left">记录开始位置</td>
</tr>
<tr>
<td align="left">limit</td>
<td align="left">int</td>
<td align="left">否</td>
<td align="left">分页大小，最大值 500。</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;condition&quot;: {
        &quot;bk_inst_id&quot;: 8,
        &quot;bk_obj_id&quot;: &quot;bk_router&quot;
    },
    &quot;fields&quot;: [
        &quot;id&quot;,
        &quot;bk_inst_id&quot;,
        &quot;bk_obj_id&quot;,
        &quot;bk_asst_inst_id&quot;,
        &quot;bk_asst_obj_id&quot;,
        &quot;bk_obj_asst_id&quot;,
        &quot;bk_asst_id&quot;
        ],
    &quot;limit&quot;: {
        &quot;start&quot;:1,
        &quot;limit&quot;:2
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: {
        &quot;count&quot;: 2,
        &quot;info&quot;: [
            {
                &quot;id&quot;: 15,
                &quot;bk_inst_id&quot;: 10,
                &quot;bk_obj_id&quot;: &quot;bk_switch&quot;,
                &quot;bk_asst_inst_id&quot;: 8,
                &quot;bk_asst_obj_id&quot;: &quot;bk_router&quot;,
                &quot;bk_obj_asst_id&quot;: &quot;bk_switch_default_bk_router&quot;
            },
            {
                &quot;id&quot;: 14,
                &quot;bk_inst_id&quot;: 9,
                &quot;bk_obj_id&quot;: &quot;bk_switch&quot;,
                &quot;bk_asst_inst_id&quot;: 8,
                &quot;bk_asst_obj_id&quot;: &quot;bk_router&quot;,
                &quot;bk_obj_asst_id&quot;: &quot;bk_switch_default_bk_router&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<p>| 名称  | 类型  | 说明 |
|---|---|---|---|
| count| int| 记录条数 |
| info| object array |  查询到的关联关系信息 |</p>
<h4 id="datainfo">data.info 字段说明</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int64</td>
<td>关联 id</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int64</td>
<td>源模型实例 id</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>关联关系源模型 id</td>
</tr>
<tr>
<td>bk_asst_inst_id</td>
<td>int64</td>
<td>关联关系目标模型 id</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>目标模型实例 id</td>
</tr>
<tr>
<td>bk_obj_asst_id</td>
<td>string</td>
<td>自动生成的模型关联关系 id</td>
</tr>
<tr>
<td>bk_asst_id</td>
<td>string</td>
<td>关系名称</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>是</td>
<td>查询字段，所有字段均为 set 定义的字段，这些字段包括预置字段，也包括用户自定义字段</td>
</tr>
<tr>
<td>condition</td>
<td>dict</td>
<td>是</td>
<td>查询条件，所有字段均为 Set 定义的字段，这些字段包括预置字段，也包括用户自定义字段</td>
</tr>
<tr>
<td>page</td>
<td>dict</td>
<td>是</td>
<td>分页条件</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 2,
    &quot;fields&quot;: [
        &quot;bk_set_name&quot;
    ],
    &quot;condition&quot;: {
        &quot;bk_set_name&quot;: &quot;test&quot;
    },
    &quot;page&quot;: {
        &quot;start&quot;: 0,
        &quot;limit&quot;: 10,
        &quot;sort&quot;: &quot;bk_set_name&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 1,
        &quot;info&quot;: [
            {
                &quot;bk_set_name&quot;: &quot;test&quot;
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>数据数量</td>
</tr>
<tr>
<td>info</td>
<td>array</td>
<td>结果集，其中，所有字段均为集群定义的属性字段</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_subscription/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>查询事件订阅</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>page</td>
<td>object</td>
<td>否</td>
<td>分页参数</td>
</tr>
<tr>
<td>condition</td>
<td>object</td>
<td>否</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="page">page</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>int</td>
<td>是</td>
<td>记录开始位置</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>是</td>
<td>每页限制条数,最大 200</td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>否</td>
<td>排序字段</td>
</tr>
</tbody>
</table>
<h4 id="condition">condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>subscription_name</td>
<td>string</td>
<td>是</td>
<td>此处仅为示例数据，需要被设置为查询的字段</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_supplier_account&quot;:&quot;0&quot;,
    &quot;condition&quot;:{
        &quot;subscription_name&quot;:&quot;name&quot;
    },
    &quot;page&quot;:{
        &quot;start&quot;:0,
        &quot;limit&quot;:10,
        &quot;sort&quot;:&quot;HostName&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: {
        &quot;count&quot;: 1,
        &quot;info&quot;: [
            {
                &quot;subscription_id&quot;: 1,
                &quot;subscription_name&quot;: &quot;mysubscribe&quot;,
                &quot;system_name&quot;: &quot;SystemName&quot;,
                &quot;callback_url&quot;: &quot;http://127.0.0.1:8080/callback&quot;,
                &quot;confirm_mode&quot;: &quot;httpstatus&quot;,
                &quot;confirm_pattern&quot;: &quot;200&quot;,
                &quot;time_out&quot;: 10,
                &quot;subscription_form&quot;: &quot;hostcreate&quot;,
                &quot;operator&quot;: &quot;user&quot;,
                &quot;bk_supplier_account&quot;: &quot;0&quot;,
                &quot;last_time&quot;: &quot;2017-09-19 16:57:07&quot;,
                &quot;statistics&quot;: {
                    &quot;total&quot;: 30,
                    &quot;failure&quot;: 2
                }
            }
        ]
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>记录条数</td>
</tr>
<tr>
<td>info</td>
<td>object array</td>
<td>事件订阅的详情列表</td>
</tr>
</tbody>
</table>
<h4 id="info">info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>subscription_id</td>
<td>int</td>
<td>订阅 ID</td>
</tr>
<tr>
<td>subscription_name</td>
<td>string</td>
<td>订阅名</td>
</tr>
<tr>
<td>system_name</td>
<td>string</td>
<td>系统名称</td>
</tr>
<tr>
<td>callback_url</td>
<td>string</td>
<td>回调地址</td>
</tr>
<tr>
<td>confirm_mode</td>
<td>string</td>
<td>回调成功确认模式，可选:httpstatus，regular</td>
</tr>
<tr>
<td>confirm_pattern</td>
<td>string</td>
<td>回调成功标志</td>
</tr>
<tr>
<td>subscription_form</td>
<td>string</td>
<td>订阅单，用","分隔</td>
</tr>
<tr>
<td>timeout</td>
<td>int</td>
<td>超时时间，单位：秒</td>
</tr>
<tr>
<td>operator</td>
<td>int</td>
<td>本条数据的最后更新人员</td>
</tr>
<tr>
<td>last_time</td>
<td>int</td>
<td>更新时间</td>
</tr>
<tr>
<td>statistics.total</td>
<td>int</td>
<td>推送总数</td>
</tr>
<tr>
<td>statistics.failure</td>
<td>int</td>
<td>推送失败数</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/search_topo_tree/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务名、自定义层级名、集群、模块名模糊搜索业务的拓扑树。</p>
<p>主机规则包括：
- 在多业务搜索下，如果扫描的业务数量超过一定数量，可以直接拒绝搜索，直接返回，报查询数据过多的错误，暂定为 20 个业务。
- 可以支持业务名、自定义层级名、集群、模块组合的查询方式进行模糊搜索。
- 除主机、模块外，其它的这些可以提供当前层级或者下一层级的拓扑信息，但是总的搜索的节点数量不能超过 50 个。如果超过 50 个，则直接拒绝搜索，报查询数据过多的错误。 </p>
<p>注意： 
- 该接口仅用于 web 页面搜索使用，不建议后台使用。
- 该接口有 5 分钟的缓存，在最极端的情况下，5 分钟内的数据可能会不对。
- 每次搜索会自动触发缓存更新，所以在数据不对的情况下，第二次搜索数据即准确。</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID，其中-1 代表所有业务，不能为 0。正整数值代表对应的业务 ID</td>
</tr>
<tr>
<td>bk_biz_name</td>
<td>string</td>
<td>是</td>
<td>业务名，业务名和业务 ID 可以选择只用一个，但不能同时为空。如果 bk_biz_id &gt; 0, 则 bk_biz_name 会被忽略,因为已经指定了具体的业务。</td>
</tr>
<tr>
<td>bk_set_name</td>
<td>string</td>
<td>否</td>
<td>集群名</td>
</tr>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>否</td>
<td>模块名</td>
</tr>
<tr>
<td>bk_level</td>
<td>object</td>
<td>否</td>
<td>自定义层级描述</td>
</tr>
</tbody>
</table>
<p>注意： bk_set_name, bk_module_name, bk_level 只能使用期中一个。 </p>
<ul>
<li>bk_level</li>
</ul>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>自定义层级的模型名称</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>是</td>
<td>自定义层级的实例名称</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_biz_id&quot;: 2,
    &quot;bk_biz_name&quot;: &quot;&quot;,
    &quot;bk_set_name&quot;: &quot;paas&quot;,
    &quot;bk_module_name&quot;: &quot;&quot;,
    &quot;bk_level&quot;: {
        &quot;bk_obj_id&quot;: &quot;&quot;,
        &quot;bk_inst_name&quot;: &quot;&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: [
    {
      &quot;bk_biz_id&quot;: 2,
      &quot;bk_biz_name&quot;: &quot;蓝鲸&quot;,
      &quot;bk_topo_tree&quot;: [
        {
          &quot;bk_obj_id&quot;: &quot;set&quot;,
          &quot;bk_inst_name&quot;: &quot;PaaS平台&quot;,
          &quot;bk_inst_id&quot;: 4,
          &quot;children&quot;: [
            {
              &quot;bk_obj_id&quot;: &quot;module&quot;,
              &quot;bk_inst_name&quot;: &quot;nginx&quot;,
              &quot;bk_inst_id&quot;: 15,
              &quot;children&quot;: null
            },
            {
              &quot;bk_obj_id&quot;: &quot;module&quot;,
              &quot;bk_inst_name&quot;: &quot;elasticsearch&quot;,
              &quot;bk_inst_id&quot;: 14,
              &quot;children&quot;: null
            },
            {
              &quot;bk_obj_id&quot;: &quot;module&quot;,
              &quot;bk_inst_name&quot;: &quot;nfs&quot;,
              &quot;bk_inst_id&quot;: 5000083,
              &quot;children&quot;: null
            }
          ]
        }
      ]
    }
  ]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data-array">data array</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_biz_name</td>
<td>string</td>
<td>业务名</td>
</tr>
<tr>
<td>bk_topo_tree</td>
<td>Object Array</td>
<td>根据查询条件生成的拓扑树层级信息，该树包含查询对象到业务根节点的所有层级信息，及下一层级信息，但模块例外，没有下一层级。</td>
</tr>
</tbody>
</table>
<h4 id="bk_obj_tree-array">bk_obj_tree array</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>对象类型，可以为自定义层级对名称，set,module 名称</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>对象名，如集群名、模块名等</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>Int</td>
<td>对象实例身份 id，唯一标识这个实例 ID</td>
</tr>
<tr>
<td>children</td>
<td>object array</td>
<td>表示该对象实例的子节点信息，可以是自定义层级集群、模块等</td>
</tr>
</tbody>
</table>
<h4 id="children-array">children array</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>对象类型，可以为自定义层级对名称，set,module 名称</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>对象名，如集群名、模块名等</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>Int</td>
<td>对象实例身份 id，唯一标识这个实例 ID</td>
</tr>
</tbody>
</table>
<p>注意： 模块没有子层级，即没有 children.</p><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/subscribe_event/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>订阅事件</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>subscription_name</td>
<td>string</td>
<td>是</td>
<td>订阅的名字</td>
</tr>
<tr>
<td>system_name</td>
<td>string</td>
<td>是</td>
<td>订阅事件的系统的名字</td>
</tr>
<tr>
<td>callback_url</td>
<td>string</td>
<td>是</td>
<td>回调函数</td>
</tr>
<tr>
<td>confirm_mode</td>
<td>string</td>
<td>是</td>
<td>事件发送成功校验模式,可选 1-httpstatus,2-regular</td>
</tr>
<tr>
<td>confirm_pattern</td>
<td>string</td>
<td>是</td>
<td>callback 的 httpstatus 或正则</td>
</tr>
<tr>
<td>subscription_form</td>
<td>string</td>
<td>是</td>
<td>订阅的事件,以逗号分隔</td>
</tr>
<tr>
<td>timeout</td>
<td>int</td>
<td>是</td>
<td>发送事件超时时间</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_supplier_account&quot;: &quot;0&quot;,
  &quot;subscription_name&quot;:&quot;mysubscribe&quot;,
  &quot;system_name&quot;:&quot;SystemName&quot;,
  &quot;callback_url&quot;:&quot;http://127.0.0.1:8080/callback&quot;,
  &quot;confirm_mode&quot;:&quot;httpstatus&quot;,
  &quot;confirm_pattern&quot;:&quot;200&quot;,
  &quot;subscription_form&quot;:&quot;hostcreate&quot;,
  &quot;timeout&quot;:10
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;:{
        &quot;subscription_id&quot;: 1
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>subscription_id</td>
<td>int</td>
<td>新增订阅的订阅 ID</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/sync_set_template_to_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id，集群模板 id,待同步集群 id 列表，将指定业务下的集群模板同步到集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>set_template_id</td>
<td>int</td>
<td>是</td>
<td>集群模板 ID</td>
</tr>
<tr>
<td>bk_set_ids</td>
<td>array</td>
<td>是</td>
<td>待同步集群 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_biz_id&quot;: 20,
    &quot;set_template_id&quot;: 6,
    &quot;bk_set_ids&quot;: [46]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: null
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_host_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>业务内主机转移模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机 ID</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>array</td>
<td>是</td>
<td>模块 ID</td>
</tr>
<tr>
<td>is_increment</td>
<td>bool</td>
<td>是</td>
<td>覆盖或者追加,会删除原有关系. true 是更新，false 是覆盖</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_host_id&quot;: [
        9,
        10
    ],
    &quot;bk_module_id&quot;: [
        10
    ],
    &quot;is_increment&quot;: true
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_host_to_faultmodule/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>上交主机到业务的故障机模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_host_id&quot;: [
        9,
        10
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_host_to_idlemodule/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>上交主机到业务的空闲机模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_host_id&quot;: [
        9,
        10
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_host_to_resourcemodule/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>上交主机至资源池</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_host_id&quot;: [
        9,
        10
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_resourcehost_to_idlemodule/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>资源池主机分配至业务的空闲机模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>array</td>
<td>是</td>
<td>主机 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_host_id&quot;: [
        9,
        10
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/transfer_sethost_to_idle_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id,集群 id,模块 id,将指定业务集群模块下的主机上交到业务的空闲机模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群 id</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>是</td>
<td>模块 id</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_biz_id&quot;:10,
    &quot;bk_module_id&quot;:58,
    &quot;bk_set_id&quot;:1
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;sucess&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/unsubcribe_event/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>退订事件</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>subscription_id</td>
<td>int</td>
<td>是</td>
<td>订阅 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_supplier_account&quot;:&quot;0&quot;,
    &quot;subscription_id&quot;:1
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;:&quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_biz_custom_field/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新业务自定义模型属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>是</td>
<td>目标数据的记录 ID</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>否</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>否</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>否</td>
<td>表明是否只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>否</td>
<td>表明是否必填</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>否</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>option</td>
<td>object</td>
<td>否</td>
<td _min_:1_max_:2="&quot;min&quot;:1,&quot;max&quot;:2">用户自定义内容，存储的内容及格式由调用方决定, 以数字内容为例（</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>否</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>否</td>
<td>定义的属性字段用于存储数据的数据类型（singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool)</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>否</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>否</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>否</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;id&quot;:1,
    &quot;bk_biz_id&quot;: 2,
    &quot;description&quot;:&quot;test&quot;,
    &quot;placeholder&quot;:&quot;test&quot;,
    &quot;unit&quot;:&quot;1&quot;,
    &quot;isonly&quot;:false,
    &quot;isreadonly&quot;:false,
    &quot;isrequired&quot;:false,
    &quot;bk_property_group&quot;:&quot;default&quot;,
    &quot;option&quot;:{&quot;min&quot;:1,&quot;max&quot;:4},
    &quot;bk_property_name&quot;:&quot;aaa&quot;,
    &quot;bk_property_type&quot;:&quot;int&quot;,
    &quot;bk_asst_obj_id&quot;:&quot;0&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: null
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_business/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新业务信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>业务数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_name</td>
<td>string</td>
<td>否</td>
<td>业务名</td>
</tr>
<tr>
<td>bk_biz_developer</td>
<td>string</td>
<td>否</td>
<td>开发人员</td>
</tr>
<tr>
<td>bk_biz_maintainer</td>
<td>string</td>
<td>否</td>
<td>运维人员</td>
</tr>
<tr>
<td>bk_biz_productor</td>
<td>string</td>
<td>否</td>
<td>产品人员</td>
</tr>
<tr>
<td>bk_biz_tester</td>
<td>string</td>
<td>否</td>
<td>测试人员</td>
</tr>
</tbody>
</table>
<p><strong>注意：此处的输入参数仅对必填以及系统内置的参数做了说明，其余需要填写的参数取决于用户自己定义的属性字段</strong></p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;data&quot;: {
        &quot;bk_biz_name&quot;: &quot;cc_app_test&quot;,
        &quot;bk_biz_maintainer&quot;: &quot;admin&quot;,
        &quot;bk_biz_productor&quot;: &quot;admin&quot;,
        &quot;bk_biz_developer&quot;: &quot;admin&quot;,
        &quot;bk_biz_tester&quot;: &quot;admin&quot;,
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_business_enable_status/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id 和状态值修改业务启用状态</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>flag</td>
<td>string</td>
<td>是</td>
<td>启用状态，为 disabled 或者 enable</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_biz_id&quot;: &quot;3&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;flag&quot;: &quot;enable&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_classification/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新模型分类</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>否</td>
<td>目标数据的记录 ID，作为更新操作的条件</td>
</tr>
<tr>
<td>bk_classification_name</td>
<td>string</td>
<td>否</td>
<td>分类名</td>
</tr>
<tr>
<td>bk_classification_icon</td>
<td>string</td>
<td>否</td>
<td>模型分类的图标,取值可参考，取值可参考<a href="resource_define/classIcon.json">(classIcon.json)</a></td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;id&quot;: 1,
    &quot;bk_classification_name&quot;: &quot;cc_test_new&quot;,
    &quot;bk_classification_icon&quot;: &quot;icon-cc-business&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_cloud_area/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新云区域</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>是</td>
<td>云区域 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_cloud_name&quot;: &quot;云区域1&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_custom_query/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新自定义查询</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>主键 ID</td>
</tr>
<tr>
<td>info</td>
<td>string</td>
<td>否</td>
<td>通用查询条件</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>否</td>
<td>收藏的名称</td>
</tr>
</tbody>
</table>
<h4 id="info">info</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>对象名,可以为 biz,set,module,host,object</td>
</tr>
<tr>
<td>fields</td>
<td>array</td>
<td>否</td>
<td>查询输出字段</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>否</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="infoconditioncondition">info.condition.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>否</td>
<td>对象的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>否</td>
<td>操作符, $eq 为相等，$ne 为不等，$in 为属于，$nin 为不属于</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>否</td>
<td>字段对应的值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: &quot;xxx&quot;,
    &quot;info&quot;: &quot;{\&quot;condition\&quot;:[{\&quot;bk_obj_id\&quot;:\&quot;biz\&quot;,\&quot;condition\&quot;:[{\&quot;field\&quot;:\&quot;default\&quot;,\&quot;operator\&quot;:\&quot;$ne\&quot;,\&quot;value\&quot;:1}],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;set\&quot;,\&quot;condition\&quot;:[],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;module\&quot;,\&quot;condition\&quot;:[],\&quot;fields\&quot;:[]},{\&quot;bk_obj_id\&quot;:\&quot;host\&quot;,\&quot;condition\&quot;:[{\&quot;field\&quot;:\&quot;bk_host_innerip\&quot;,\&quot;operator\&quot;:\&quot;$eq\&quot;,\&quot;value\&quot;:\&quot;127.0.0.1\&quot;}],\&quot;fields\&quot;:[\&quot;bk_host_innerip\&quot;,\&quot;bk_host_outerip\&quot;,\&quot;bk_agent_status\&quot;]}]}&quot;,
    &quot;name&quot;: &quot;api1&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_dynamic_group/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新动态分组 (V3.9.6)</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>是</td>
<td>主键 ID</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>否</td>
<td>动态分组的目标资源对象类型, 目前可以为 host,set.更新规则时需同时提供该字段和 info 两个字段</td>
</tr>
<tr>
<td>info</td>
<td>object</td>
<td>否</td>
<td>通用查询条件</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>否</td>
<td>动态分组名称</td>
</tr>
</tbody>
</table>
<h4 id="infocondition">info.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>条件对象资源类型, host 类型的动态分组支持的 info.conditon:set,module,host；set 类型的动态分组支持的 info.condition:set</td>
</tr>
<tr>
<td>condition</td>
<td>array</td>
<td>是</td>
<td>查询条件</td>
</tr>
</tbody>
</table>
<h4 id="infoconditioncondition">info.condition.condition</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>field</td>
<td>string</td>
<td>是</td>
<td>对象的字段</td>
</tr>
<tr>
<td>operator</td>
<td>string</td>
<td>是</td>
<td>操作符, op 值为 eq(相等)/ne(不等)/in(属于)/nin(不属于)</td>
</tr>
<tr>
<td>value</td>
<td>object</td>
<td>是</td>
<td>字段对应的值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: &quot;XXXXXXXX&quot;,
    &quot;bk_obj_id&quot;: &quot;host&quot;,
    &quot;name&quot;: &quot;my-dynamic-group&quot;,
    &quot;info&quot;: {
        &quot;condition&quot;:[
            {
                &quot;bk_obj_id&quot;:&quot;set&quot;,
                &quot;condition&quot;:[
                    {
                        &quot;field&quot;:&quot;default&quot;,
                        &quot;operator&quot;:&quot;$ne&quot;,
                        &quot;value&quot;:1
                    }
                ]
            },
            {
                &quot;bk_obj_id&quot;:&quot;module&quot;,
                &quot;condition&quot;:[
                    {
                        &quot;field&quot;:&quot;default&quot;,
                        &quot;operator&quot;:&quot;$ne&quot;,
                        &quot;value&quot;:1
                    }
                ]
            },
            {
                &quot;bk_obj_id&quot;:&quot;host&quot;,
                &quot;condition&quot;:[
                    {
                        &quot;field&quot;:&quot;bk_host_innerip&quot;,
                        &quot;operator&quot;:&quot;$eq&quot;,
                        &quot;value&quot;:&quot;127.0.0.1&quot;
                    }
                ]
            }
        ]
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_event_subscribe/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>修改订阅</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>是</td>
<td>开发商账号</td>
</tr>
<tr>
<td>subscription_id</td>
<td>int</td>
<td>是</td>
<td>订阅 ID</td>
</tr>
<tr>
<td>subscription_name</td>
<td>string</td>
<td>是</td>
<td>订阅的名字</td>
</tr>
<tr>
<td>system_name</td>
<td>string</td>
<td>是</td>
<td>订阅事件的系统的名字</td>
</tr>
<tr>
<td>callback_url</td>
<td>string</td>
<td>是</td>
<td>回调函数</td>
</tr>
<tr>
<td>confirm_mode</td>
<td>string</td>
<td>是</td>
<td>事件发送成功校验模式,可选 1-httpstatus,2-regular</td>
</tr>
<tr>
<td>confirm_pattern</td>
<td>string</td>
<td>是</td>
<td>callback 的 httpstatus 或正则</td>
</tr>
<tr>
<td>subscription_form</td>
<td>string</td>
<td>是</td>
<td>订阅的事件,以逗号分隔</td>
</tr>
<tr>
<td>timeout</td>
<td>int</td>
<td>是</td>
<td>发送事件超时时间</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_supplier_account&quot;: &quot;0&quot;,
  &quot;subscription_name&quot;:&quot;mysubscribe&quot;,
  &quot;subscription_id&quot;: 2,
  &quot;system_name&quot;:&quot;SystemName&quot;,
  &quot;callback_url&quot;:&quot;http://127.0.0.1:8080/callback&quot;,
  &quot;confirm_mode&quot;:&quot;httpstatus&quot;,
  &quot;confirm_pattern&quot;:&quot;200&quot;,
  &quot;subscription_form&quot;:&quot;hostcreate&quot;,
  &quot;timeout&quot;:10
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_host/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新主机属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_host_id</td>
<td>string</td>
<td>是</td>
<td>主机 ID，多个以逗号分隔</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>否</td>
<td>主机数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_host_name</td>
<td>string</td>
<td>否</td>
<td>主机名</td>
</tr>
</tbody>
</table>
<p><strong>注意：输入的字段为主机定义的属性</strong></p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_host_id&quot;: &quot;1,2,3&quot;,
    &quot;data&quot;: {
        &quot;bk_host_name&quot;: &quot;test&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: none
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_host_cloud_area_field/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据主机 id 列表和云区域 id,更新主机的云区域字段</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务 ID</td>
</tr>
<tr>
<td>bk_cloud_id</td>
<td>int</td>
<td>是</td>
<td>云区域 ID</td>
</tr>
<tr>
<td>bk_host_ids</td>
<td>array</td>
<td>是</td>
<td>主机 IDs, 最多 2000 个</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_host_ids&quot;: [43, 44], 
    &quot;bk_cloud_id&quot;: 27,
    &quot;bk_biz_id&quot;: 1
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: &quot;&quot;
}</code></pre>


<h3 id="-ip">返回结果实例 - 云区域 + 内网 IP 重复</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: false,
  &quot;code&quot;: 1199014,
  &quot;message&quot;: &quot;数据唯一性校验失败， bk_host_innerip 重复&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: null
}</code></pre>


<h3 id="-">返回结果实例 - 一次操作主机数太多</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: false,
  &quot;code&quot;: 1199077,
  &quot;message&quot;: &quot;一次操作记录数超过最大限制：2000&quot;,
  &quot;permission&quot;: null,
  &quot;data&quot;: null
}</code></pre>


<p>```bash</p>
<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0表示success，&gt;0表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>无数据返回</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_inst/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新对象实例</p>
<ul>
<li>该接口只适用于自定义层级模型和通用模型实例上，不适用于业务、集群、模块、主机等模型实例</li>
</ul>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>模型 ID</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>实例 ID</td>
</tr>
<tr>
<td>bk_inst_name</td>
<td>string</td>
<td>否</td>
<td>实例名，也可以为其它自定义字段</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>否</td>
<td>业务 ID， 当删除的是自定义主线层级模型实例时则必传</td>
</tr>
</tbody>
</table>
<p>注意：当操作的是自定义主线层级模型实例时，而又有使用权限中心的，对于 cmdb 小于 3.9 的版本，还需要传包含实例所在业务 id 的 metadata 参数，否则会导致权限中心鉴权失败，格式为
"metadata": {
    "label": {
        "bk_biz_id": "64"
    }
}</p>
<h3 id="_7">请求参数示例(通用实例示例)</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_obj_id&quot;: &quot;1&quot;,
    &quot;bk_inst_id&quot;: 0,
    &quot;bk_inst_name&quot;: &quot;test&quot;
 }</code></pre>


<h3 id="json">json</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_module/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新模块</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群 id</td>
</tr>
<tr>
<td>bk_module_id</td>
<td>int</td>
<td>是</td>
<td>模块 id</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>是</td>
<td>模块数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_module_name</td>
<td>string</td>
<td>否</td>
<td>模块名</td>
</tr>
</tbody>
</table>
<p><strong>注意：输入的字段为模块定义的属性</strong></p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_set_id&quot;: 1,
    &quot;bk_module_id&quot;: 1,
    &quot;data&quot;: {
        &quot;bk_module_name&quot;: &quot;test&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_object/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新模型定义</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>否</td>
<td>对象模型的 ID，作为更新操作的条件</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>否</td>
<td>本条数据的最后修改人员</td>
</tr>
<tr>
<td>bk_classification_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的分类 ID，只能用英文字母序列命名</td>
</tr>
<tr>
<td>bk_obj_name</td>
<td>string</td>
<td>否</td>
<td>对象模型的名字</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>否</td>
<td>对象模型的 ICON 信息，用于前端显示，取值可参考<a href="/static/esb/api_docs/res/cc/modleIcon.json">(modleIcon.json)</a></td>
</tr>
<tr>
<td>position</td>
<td>json object string</td>
<td>否</td>
<td>用于前端展示的坐标</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;id&quot;: 1,
    &quot;modifier&quot;: &quot;admin&quot;,
    &quot;bk_classification_id&quot;: &quot;cc_test&quot;,
    &quot;bk_obj_name&quot;: &quot;cc2_test_inst&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;bk_obj_icon&quot;: &quot;icon-cc-business&quot;,
    &quot;position&quot;:&quot;{\&quot;ff\&quot;:{\&quot;x\&quot;:-863,\&quot;y\&quot;:1}}&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_object_attribute/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新对象模型属性</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>是</td>
<td>目标数据的记录 ID</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>否</td>
<td>数据的描述信息</td>
</tr>
<tr>
<td>isonly</td>
<td>bool</td>
<td>否</td>
<td>表明唯一性</td>
</tr>
<tr>
<td>isreadonly</td>
<td>bool</td>
<td>否</td>
<td>表明是否只读</td>
</tr>
<tr>
<td>isrequired</td>
<td>bool</td>
<td>否</td>
<td>表明是否必填</td>
</tr>
<tr>
<td>bk_property_group</td>
<td>string</td>
<td>否</td>
<td>字段分栏的名字</td>
</tr>
<tr>
<td>option</td>
<td>string</td>
<td>否</td>
<td _min_:_1_max_:_2_="&quot;min&quot;:&quot;1&quot;,&quot;max&quot;:&quot;2&quot;">用户自定义内容，存储的内容及格式由调用方决定, 以数字内容为例（</td>
</tr>
<tr>
<td>bk_property_name</td>
<td>string</td>
<td>否</td>
<td>模型属性名，用于展示</td>
</tr>
<tr>
<td>bk_property_type</td>
<td>string</td>
<td>否</td>
<td>定义的属性字段用于存储数据的数据类型（singlechar,longchar,int,enum,date,time,objuser,singleasst,multiasst,timezone,bool)</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>否</td>
<td>单位</td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>否</td>
<td>占位符</td>
</tr>
<tr>
<td>bk_asst_obj_id</td>
<td>string</td>
<td>否</td>
<td>如果有关联其它的模型，那么就必需设置此字段，否则就不需要设置</td>
</tr>
</tbody>
</table>
<h4 id="bk_property_type">bk_property_type</h4>
<table>
<thead>
<tr>
<th>标识</th>
<th>名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>singlechar</td>
<td>短字符</td>
</tr>
<tr>
<td>longchar</td>
<td>长字符</td>
</tr>
<tr>
<td>int</td>
<td>整形</td>
</tr>
<tr>
<td>enum</td>
<td>枚举类型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>objuser</td>
<td>用户</td>
</tr>
<tr>
<td>singleasst</td>
<td>单关联</td>
</tr>
<tr>
<td>multiasst</td>
<td>多关联</td>
</tr>
<tr>
<td>timezone</td>
<td>时区</td>
</tr>
<tr>
<td>bool</td>
<td>布尔</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;id&quot;:1,
    &quot;description&quot;:&quot;test&quot;,
    &quot;placeholder&quot;:&quot;test&quot;,
    &quot;unit&quot;:&quot;1&quot;,
    &quot;isonly&quot;:false,
    &quot;isreadonly&quot;:false,
    &quot;isrequired&quot;:false,
    &quot;bk_property_group&quot;:&quot;default&quot;,
    &quot;option&quot;:&quot;{\&quot;min\&quot;:\&quot;1\&quot;,\&quot;max\&quot;:\&quot;4\&quot;}&quot;,
    &quot;bk_property_name&quot;:&quot;aaa&quot;,
    &quot;bk_property_type&quot;:&quot;int&quot;,
    &quot;bk_asst_obj_id&quot;:&quot;0&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_object_topo_graphics/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新拓扑图</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>scope_type</td>
<td>string</td>
<td>是</td>
<td>图形范围类型,可选 global,biz,cls(当前只有 global)</td>
</tr>
<tr>
<td>scope_id</td>
<td>string</td>
<td>是</td>
<td>图形范围类型下的 ID,如果为 global,则填 0</td>
</tr>
<tr>
<td>action</td>
<td>string</td>
<td>是</td>
<td>更新方法,可选 update,override</td>
</tr>
<tr>
<td>data</td>
<td>list</td>
<td>否</td>
<td>更新数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>node_type</td>
<td>string</td>
<td>是</td>
<td>节点类型,可选 obj,inst</td>
</tr>
<tr>
<td>bk_obj_id</td>
<td>string</td>
<td>是</td>
<td>对象模型的 ID</td>
</tr>
<tr>
<td>bk_inst_id</td>
<td>int</td>
<td>是</td>
<td>实例 ID</td>
</tr>
<tr>
<td>position</td>
<td>dict</td>
<td>否</td>
<td>节点在图中的位置</td>
</tr>
<tr>
<td>ext</td>
<td>dict</td>
<td>否</td>
<td>前端扩展字段</td>
</tr>
<tr>
<td>bk_obj_icon</td>
<td>string</td>
<td>否</td>
<td>对象模型的图标</td>
</tr>
</tbody>
</table>
<p><strong>注意</strong>：</p>
<ul>
<li>
<p>scope_type,scope_id 唯一确定一张图</p>
</li>
<li>
<p>node_type,bk_obj_id,bk_inst_id 三者唯一确定每张图的一个节点，故必填</p>
</li>
</ul>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;scope_type&quot;: &quot;global&quot;,
    &quot;scope_id&quot;: 0,
    &quot;action&quot;: &quot;update&quot;,
    &quot;data&quot;: [
        {
            &quot;node_type&quot;: &quot;obj&quot;,
            &quot;bk_obj_id&quot;: &quot;switch&quot;,
            &quot;bk_inst_id&quot;: 0,
            &quot;position&quot;: {
                &quot;x&quot;: 100,
                &quot;y&quot;: 100
            },
            &quot;ext&quot;: {},
            &quot;bk_obj_icon&quot;: &quot;icon-cc-switch2&quot;
        }
    ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;data&quot;: &quot;success&quot;
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_process_instance/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>批量更新进程信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>processes</td>
<td>array</td>
<td>是</td>
<td>进程信息</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;processes&quot;: [
    {
      &quot;bk_process_id&quot;: 43,
      &quot;bk_supplier_account&quot;: &quot;0&quot;,
      &quot;description&quot;: &quot;&quot;,
      &quot;start_cmd&quot;: &quot;&quot;,
      &quot;restart_cmd&quot;: &quot;&quot;,
      &quot;pid_file&quot;: &quot;&quot;,
      &quot;auto_start&quot;: false,
      &quot;timeout&quot;: 30,
      &quot;auto_time_gap&quot;: 60,
      &quot;reload_cmd&quot;: &quot;&quot;,
      &quot;bk_func_name&quot;: &quot;java&quot;,
      &quot;work_path&quot;: &quot;/data/bkce&quot;,
      &quot;stop_cmd&quot;: &quot;&quot;,
      &quot;face_stop_cmd&quot;: &quot;&quot;,
      &quot;bk_process_name&quot;: &quot;job_java&quot;,
      &quot;user&quot;: &quot;&quot;,
      &quot;proc_num&quot;: 1,
      &quot;priority&quot;: 1,
      &quot;bk_biz_id&quot;: 2,
      &quot;bk_func_id&quot;: &quot;&quot;,
      &quot;bind_info&quot;: [
        {
            &quot;enable&quot;: false,  
            &quot;ip&quot;: &quot;127.0.0.1&quot;,  
            &quot;port&quot;: &quot;100&quot;,  
            &quot;protocol&quot;: &quot;1&quot;, 
            &quot;template_row_id&quot;: 1  
        }
      ],
    }
  ]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: [43]
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_proc_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新进程模板信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>process_template_id</td>
<td>int</td>
<td>否</td>
<td>进程模板 ID</td>
</tr>
<tr>
<td>process_property</td>
<td>object</td>
<td>是</td>
<td>需要更新的进程模板字段信息</td>
</tr>
</tbody>
</table>
<h4 id="process_property">process_property 可以出现的字段</h4>
<p>注解：</p>
<p>as_default_value: 进程的值是否以模板为准
value: 进程的值，不同的字段类型不一样</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>proc_num</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false" null_="null,"></td>
</tr>
<tr>
<td>stop_cmd</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>restart_cmd</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>face_stop_cmd</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>bk_func_name</td>
<td>object</td>
<td>否</td>
<td _a7_as_default_value_:="&quot;a7&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" true="true"></td>
</tr>
<tr>
<td>work_path</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>priority</td>
<td>object</td>
<td>否</td>
<td _value_:="&quot;value&quot;:" false="false" null_as_default_value_:="null,&quot;as_default_value&quot;:"></td>
</tr>
<tr>
<td>reload_cmd</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>bk_process_name</td>
<td>object</td>
<td>否</td>
<td _a7_as_default_value_:="&quot;a7&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" true="true"></td>
</tr>
<tr>
<td>pid_file</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>auto_start</td>
<td>object</td>
<td>否</td>
<td _value_:="&quot;value&quot;:" null="null" null_as_default_value_:="null,&quot;as_default_value&quot;:"></td>
</tr>
<tr>
<td>auto_time_gap</td>
<td>object</td>
<td>否</td>
<td _value_:="&quot;value&quot;:" false="false" null_as_default_value_:="null,&quot;as_default_value&quot;:"></td>
</tr>
<tr>
<td>start_cmd</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>bk_func_id</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>user</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>timeout</td>
<td>object</td>
<td>否</td>
<td _value_:="&quot;value&quot;:" false="false" null_as_default_value_:="null,&quot;as_default_value&quot;:"></td>
</tr>
<tr>
<td>description</td>
<td>object</td>
<td>否</td>
<td _1_as_default_value_:="&quot;1&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" true="true"></td>
</tr>
<tr>
<td>bk_start_param_regex</td>
<td>object</td>
<td>否</td>
<td _as_default_value_:="&quot;&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" false="false"></td>
</tr>
<tr>
<td>bind_info</td>
<td>object</td>
<td>否</td>
<td _value_:_as_default_value_:="&quot;value&quot;:[],,&quot;as_default_value&quot;:" true="true"></td>
</tr>
</tbody>
</table>
<h4 id="process_propertybind_infovaluen">process_property.bind_info.value[n] 可以出现的字段</h4>
<p>注意：</p>
<p>修改 bind_info 的时候，必须先获取原有进程的 bind_info 的内容， 然后在进程已有的 bind_info 上修改，将修改后的内容传递给修改结构。</p>
<p>注解：</p>
<p>as_default_value: 进程的值是否以模板为准
value: 进程的值，不同的字段类型不一样</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>enable</td>
<td>object</td>
<td>否</td>
<td _value_:="&quot;value&quot;:" false_as_default_value_:="false,&quot;as_default_value&quot;:" true="true"></td>
</tr>
<tr>
<td>ip</td>
<td>object</td>
<td>否</td>
<td _1_as_default_value_:="&quot;1&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" true="true"></td>
</tr>
<tr>
<td>port</td>
<td>object</td>
<td>否</td>
<td _100_as_default_value_:="&quot;100&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" true="true"></td>
</tr>
<tr>
<td>protocol</td>
<td>object</td>
<td>否</td>
<td _1_as_default_value_:="&quot;1&quot;,&quot;as_default_value&quot;:" _value_:="&quot;value&quot;:" true="true"></td>
</tr>
<tr>
<td>row_id</td>
<td>int</td>
<td>否</td>
<td>唯一表示 id,新加的行可以设置为空，更新必须保持原值</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;process_template_id&quot;: 50,
  &quot;process_property&quot;: {
    &quot;user&quot;: {
      &quot;as_default_value&quot;: true,
      &quot;value&quot;: &quot;root100&quot;
    },
    &quot;proc_num&quot;: {
      &quot;as_default_value&quot;: true,
      &quot;value&quot;: 300
    }
  }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;id&quot;: 50,
    &quot;bk_process_name&quot;: &quot;p1&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;service_template_id&quot;: 51,
    &quot;property&quot;: {
      &quot;proc_num&quot;: {
        &quot;value&quot;: 300,
        &quot;as_default_value&quot;: false
      },
      &quot;stop_cmd&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;restart_cmd&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;face_stop_cmd&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;bk_func_name&quot;: {
        &quot;value&quot;: &quot;p1&quot;,
        &quot;as_default_value&quot;: true
      },
      &quot;work_path&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;bind_ip&quot;: {
        &quot;value&quot;: &quot;1&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;priority&quot;: {
        &quot;value&quot;: null,
        &quot;as_default_value&quot;: false
      },
      &quot;reload_cmd&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;bk_process_name&quot;: {
        &quot;value&quot;: &quot;p1&quot;,
        &quot;as_default_value&quot;: true
      },
      &quot;port&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;pid_file&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;auto_start&quot;: {
        &quot;value&quot;: false,
        &quot;as_default_value&quot;: false
      },
      &quot;auto_time_gap&quot;: {
        &quot;value&quot;: null,
        &quot;as_default_value&quot;: false
      },
      &quot;start_cmd&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;bk_func_id&quot;: {
        &quot;value&quot;: null,
        &quot;as_default_value&quot;: false
      },
      &quot;user&quot;: {
        &quot;value&quot;: &quot;root100&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;timeout&quot;: {
        &quot;value&quot;: null,
        &quot;as_default_value&quot;: false
      },
      &quot;protocol&quot;: {
        &quot;value&quot;: &quot;1&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;description&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;bk_start_param_regex&quot;: {
        &quot;value&quot;: &quot;&quot;,
        &quot;as_default_value&quot;: false
      },
      &quot;bind_info&quot;: {
        &quot;value&quot;: [
            {
                &quot;enable&quot;: {
                    &quot;value&quot;: false,
                    &quot;as_default_value&quot;: true
                },
                &quot;ip&quot;: {
                    &quot;value&quot;: &quot;1&quot;,
                    &quot;as_default_value&quot;: true
                },
                &quot;port&quot;: {
                    &quot;value&quot;: &quot;100&quot;,
                    &quot;as_default_value&quot;: true
                },
                &quot;protocol&quot;: {
                    &quot;value&quot;: &quot;1&quot;,
                    &quot;as_default_value&quot;: true
                },
                &quot;row_id&quot;: 1
            }
        ],
        &quot;as_default_value&quot;: true
      }
    },
    &quot;creator&quot;: &quot;admin&quot;,
    &quot;modifier&quot;: &quot;admin&quot;,
    &quot;create_time&quot;: &quot;2019-06-19T15:24:04.763+08:00&quot;,
    &quot;last_time&quot;: &quot;2019-06-21T16:25:03.962512+08:00&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>更新后的进程模板信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_service_category/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新服务模板信息（目前仅名称字段可更新）</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>否</td>
<td>服务模板 ID</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>否</td>
<td>服务模板名称</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;id&quot;: 3,
  &quot;name&quot;: &quot;222&quot;
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: 3,
    &quot;name&quot;: &quot;222&quot;,
    &quot;root_id&quot;: 3,
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;is_built_in&quot;: false
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>更新后的服务分类信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_service_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新服务模板名称信息</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>int</td>
<td>是</td>
<td>服务模板名称</td>
</tr>
<tr>
<td>id</td>
<td>int</td>
<td>是</td>
<td>服务模板 ID</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;bk_biz_id&quot;: 1,
  &quot;name&quot;: &quot;test1&quot;,
  &quot;id&quot;: 50,
  &quot;service_category_id&quot;: 3
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
  &quot;result&quot;: true,
  &quot;code&quot;: 0,
  &quot;message&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;bk_biz_id&quot;: 1,
    &quot;id&quot;: 50,
    &quot;name&quot;: &quot;test1&quot;,
    &quot;service_category_id&quot;: 3,
    &quot;creator&quot;: &quot;admin&quot;,
    &quot;modifier&quot;: &quot;admin&quot;,
    &quot;create_time&quot;: &quot;2019-06-05T11:22:22.951+08:00&quot;,
    &quot;last_time&quot;: &quot;2019-06-05T11:22:22.951+08:00&quot;,
    &quot;bk_supplier_account&quot;: &quot;0&quot;
  }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>更新后的服务模板信息</td>
</tr>
</tbody>
</table><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_set/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>更新集群</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>否</td>
<td>开发商账号</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 id</td>
</tr>
<tr>
<td>bk_set_id</td>
<td>int</td>
<td>是</td>
<td>集群 id</td>
</tr>
<tr>
<td>data</td>
<td>dict</td>
<td>否</td>
<td>集群数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_parent_id</td>
<td>int</td>
<td>否</td>
<td>父节点的 ID</td>
</tr>
<tr>
<td>bk_set_name</td>
<td>string</td>
<td>否</td>
<td>集群名字</td>
</tr>
</tbody>
</table>
<p><strong>注意：用户自定义的字段也可以作为参数传入</strong></p>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;bk_app_code&quot;: &quot;esb_test&quot;,
    &quot;bk_app_secret&quot;: &quot;xxx&quot;,
    &quot;bk_token&quot;: &quot;xxx&quot;,
    &quot;bk_supplier_account&quot;: &quot;123456789&quot;,
    &quot;bk_biz_id&quot;: 1,
    &quot;bk_set_id&quot;: 1,
    &quot;data&quot;: {
        &quot;bk_set_name&quot;: &quot;test&quot;
    }
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-python">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;&quot;,
    &quot;data&quot;: {}
}</code></pre><h3 id="_1">请求地址</h3>
<p>/api/c/compapi/v2/cc/update_set_template/</p>
<h3 id="_2">请求方法</h3>
<p>POST</p>
<h3 id="_3">功能描述</h3>
<p>根据业务 id 和集群模板 id,编辑指定业务下的集群模板</p>
<h3 id="_4">请求参数</h3>
<h4 id="_5">通用参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_app_code</td>
<td>string</td>
<td>是</td>
<td>应用 ID</td>
</tr>
<tr>
<td>bk_app_secret</td>
<td>string</td>
<td>是</td>
<td>安全密钥(应用 TOKEN)，可以通过 蓝鲸智云开发者中心 -&gt; 点击应用 ID -&gt; 基本信息 获取</td>
</tr>
<tr>
<td>bk_token</td>
<td>string</td>
<td>否</td>
<td>当前用户登录态，bk_token 与 bk_username 必须一个有效，bk_token 可以通过 Cookie 获取</td>
</tr>
<tr>
<td>bk_username</td>
<td>string</td>
<td>否</td>
<td>当前用户用户名，应用免登录态验证白名单中的应用，用此字段指定当前用户</td>
</tr>
</tbody>
</table>
<h4 id="_6">接口参数</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必选</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>是</td>
<td>业务 ID</td>
</tr>
<tr>
<td>set_template_id</td>
<td>int</td>
<td>是</td>
<td>集群模板 ID</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>二选一</td>
<td>集群模板名称</td>
</tr>
<tr>
<td>service_template_ids</td>
<td>array</td>
<td>二选一</td>
<td>服务模板 ID 列表</td>
</tr>
</tbody>
</table>
<h3 id="_7">请求参数示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;bk_supplier_account&quot;: &quot;0&quot;,
    &quot;name&quot;: &quot;test&quot;,
    &quot;bk_biz_id&quot;: 20,
    &quot;set_template_id&quot;: 6,
    &quot;service_template_ids&quot;: [59]
}</code></pre>


<h3 id="_8">返回结果示例</h3>
<pre class="codehilite"><code class="language-json">{
    &quot;result&quot;: true,
    &quot;code&quot;: 0,
    &quot;message&quot;: &quot;success&quot;,
    &quot;permission&quot;: null,
    &quot;data&quot;: {
        &quot;id&quot;: 6,
        &quot;name&quot;: &quot;test&quot;,
        &quot;bk_biz_id&quot;: 20,
        &quot;version&quot;: 0,
        &quot;creator&quot;: &quot;admin&quot;,
        &quot;modifier&quot;: &quot;admin&quot;,
        &quot;create_time&quot;: &quot;2019-11-27T17:24:10.671658+08:00&quot;,
        &quot;last_time&quot;: &quot;2019-11-27T17:24:10.671658+08:00&quot;,
        &quot;bk_supplier_account&quot;: &quot;0&quot;
    }
}</code></pre>


<h3 id="_9">返回结果参数说明</h3>
<h4 id="response">response</h4>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>bool</td>
<td>请求成功与否。true:请求成功；false 请求失败</td>
</tr>
<tr>
<td>code</td>
<td>int</td>
<td>错误编码。 0 表示 success，&gt;0 表示失败错误</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>请求失败返回的错误信息</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>请求返回的数据</td>
</tr>
</tbody>
</table>
<h4 id="data">data 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>集群模板 ID</td>
</tr>
<tr>
<td>name</td>
<td>array</td>
<td>集群模板名称</td>
</tr>
<tr>
<td>bk_biz_id</td>
<td>int</td>
<td>业务 ID</td>
</tr>
<tr>
<td>version</td>
<td>int</td>
<td>集群模板版本</td>
</tr>
<tr>
<td>creator</td>
<td>string</td>
<td>创建者</td>
</tr>
<tr>
<td>modifier</td>
<td>string</td>
<td>最后修改人员</td>
</tr>
<tr>
<td>create_time</td>
<td>string</td>
<td>创建时间</td>
</tr>
<tr>
<td>last_time</td>
<td>string</td>
<td>更新时间</td>
</tr>
<tr>
<td>bk_supplier_account</td>
<td>string</td>
<td>开发商账号</td>
</tr>
</tbody>
</table><h1 id="_1">结语</h1>
<p>蓝鲸基于 Golang 全新重构了蓝鲸配置平台，相对于之前的配置平台（CMDB2.0） 提供了全新的机器数据快照、数据自动发现、变更事件主动推送、更加精细的权限管理、可拓展的业务拓扑等功能；系统的运行效率得到较大提升的同时，采用了服务化、去中心化的架构设计，使得系统的部署发布可以支持传统方式和容器方式。</p>
<p>新版蓝鲸配置平台已正式对外开源。</p>
<p>GitHub 地址： <a href="https://github.com/Tencent/bk-cmdb">https://github.com/Tencent/bk-cmdb</a></p>
    </body>
    </html>
    